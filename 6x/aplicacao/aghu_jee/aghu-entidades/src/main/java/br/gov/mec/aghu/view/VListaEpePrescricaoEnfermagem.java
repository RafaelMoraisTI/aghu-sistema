package br.gov.mec.aghu.view;

import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.EnumType;
import javax.persistence.Enumerated;
import javax.persistence.FetchType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.JoinColumns;
import javax.persistence.ManyToOne;
import javax.persistence.Table;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;
import javax.persistence.Transient;

import org.hibernate.annotations.Immutable;

import br.gov.mec.aghu.core.persistence.BaseEntity;
import br.gov.mec.aghu.dominio.DominioIndConcluido;
import br.gov.mec.aghu.dominio.DominioOrigemAtendimento;
import br.gov.mec.aghu.dominio.DominioPacAtendimento;
import br.gov.mec.aghu.model.AghEspecialidades;
import br.gov.mec.aghu.model.AghUnidadesFuncionais;
import br.gov.mec.aghu.model.RapServidores;

/**
 * VListaEpePrescricaoEnfermagem generated by hbm2java
 */
@Entity
@Table(name = "V_LISTA_PRESCRICAO_ENFERMAGEM", schema = "AGH")
@Immutable
public class VListaEpePrescricaoEnfermagem implements BaseEntity  {
	

	private static final long serialVersionUID = -5697829889834283362L;

	private Integer atdSeq;
	private String nome;
	private Date dtNascimento;
	private Date dtAtendimento;
	private Integer prontuario;
	private Integer pacCodigo;
	private DominioOrigemAtendimento origem;
	private AghUnidadesFuncionais unidadeFuncional;
	private String local;
	private Boolean solicitacaoConsultoriaResp;
	private Boolean solicitacaoConsultoriaSolic;
	private DominioIndConcluido indAltaMedica;
	private Boolean germMultiResistente;
	private Boolean pacientePossuiControle;
	private Boolean existeProjetoPaciente;
	private String corGermMultiResistente;
	private Boolean habilitaPrescricaoEnfermagem;
	private Boolean possuiPrescricaoVigente;
	private Integer servidorPrescricaoVigente;
	private Integer servidorPrescricaoFutura;
	private Integer servidorPrescricaoVigenteValida;
	private Integer servidorPrescricaoFuturaValida;
	private Date dthrFimPrescricaoVigente;
	private Boolean prescricaoFutura;
	private Boolean habilitaBotaoPrescricao;
	private Boolean ulceraPressao;
	private Integer ulceraMedicao;
	private Date dthrFim;
	private AghEspecialidades especialidade;
	private RapServidores servidor;
	private DominioPacAtendimento indPacAtendimento;
	private Boolean indPacCpa;
	private Integer idade;
	private Boolean evolucaoPeloMedico;
	private Boolean evolucaoPeloOutros;
	private Boolean evolucaoPeloEnfermeiro;
	private Date dtPrevAlta;
	private Boolean  respPrevAlta;
	private Date dtPrevAltaAtdMae;
	private Boolean respPrevAltaAtdMae;
	private String  origemAtdMae;


	@Column(name="ORIGEM_ATD_MAE")
	public String getOrigemAtdMae() {
		return origemAtdMae;
	}

	public void setOrigemAtdMae(String origemAtdMae) {
		this.origemAtdMae = origemAtdMae;
	}

	@Temporal(TemporalType.TIMESTAMP)
	@Column(name = "DT_PREV_ALTA", nullable = false)
	public Date getDtPrevAlta() {
		return dtPrevAlta;
	}

	public void setDtPrevAlta(Date dtPrevAlta) {
		this.dtPrevAlta = dtPrevAlta;
	}

	@Column(name = "RESP_PREV_ALTA", length = 1)	
	@org.hibernate.annotations.Type(type = "br.gov.mec.aghu.core.persistence.type.BooleanUserType")
	public Boolean getRespPrevAlta() {
		return respPrevAlta;
	}

	public void setRespPrevAlta(Boolean respPrevAlta) {
		this.respPrevAlta = respPrevAlta;
	}

	@Temporal(TemporalType.TIMESTAMP)
	@Column(name = "DT_PREV_ALTA_ATD_MAE", nullable = false)
	public Date getDtPrevAltaAtdMae() {
		return dtPrevAltaAtdMae;
	}

	public void setDtPrevAltaAtdMae(Date dtPrevAltaAtdMae) {
		this.dtPrevAltaAtdMae = dtPrevAltaAtdMae;
	}

	@Column(name = "RESP_PREV_ALTA_ATD_MAE", length = 1)	
	@org.hibernate.annotations.Type(type = "br.gov.mec.aghu.core.persistence.type.BooleanUserType")
	public Boolean getRespPrevAltaAtdMae() {
		return respPrevAltaAtdMae;
	}

	public void setRespPrevAltaAtdMae(Boolean respPrevAltaAtdMae) {
		this.respPrevAltaAtdMae = respPrevAltaAtdMae;
	}

	@Id	
	@Column(name = "ATD_SEQ", precision = 8, scale = 0)
	public Integer getAtdSeq() {
		return this.atdSeq;
	}

	public void setAtdSeq(Integer atdSeq) {
		this.atdSeq = atdSeq;
	}

	@Column(name = "NOME", nullable = false, length = 50)
	public String getNome() {
		return nome;
	}

	public void setNome(String nome) {
		this.nome = nome;
	}

	@Temporal(TemporalType.TIMESTAMP)
	@Column(name = "DT_NASCIMENTO", nullable = false)
	public Date getDtNascimento() {
		return dtNascimento;
	}

	public void setDtNascimento(Date dtNascimento) {
		this.dtNascimento = dtNascimento;
	}


	@Temporal(TemporalType.TIMESTAMP)
	@Column(name = "DT_ATENDIMENTO", nullable = false)
	public Date getDtAtendimento() {
		return dtAtendimento;
	}

	public void setDtAtendimento(Date dtAtendimento) {
		this.dtAtendimento = dtAtendimento;
	}

	
	@Column(name = "PRONTUARIO", precision = 8, scale = 0)	
	public Integer getProntuario() {
		return prontuario;
	}

	public void setProntuario(Integer prontuario) {
		this.prontuario = prontuario;
	}

	@Column(name = "PAC_CODIGO",precision = 8, scale = 0)	
	public Integer getPacCodigo() {
		return pacCodigo;
	}

	public void setPacCodigo(Integer pacCodigo) {
		this.pacCodigo = pacCodigo;
	}

	@Column(name = "ORIGEM", nullable = false, length = 1)
	@Enumerated(EnumType.STRING)
	public DominioOrigemAtendimento getOrigem() {
		return origem;
	}

	public void setOrigem(DominioOrigemAtendimento origem) {
		this.origem = origem;
	}

	@ManyToOne(fetch = FetchType.LAZY, optional = false)
	@JoinColumn(name = "UNF_SEQ", nullable = false, referencedColumnName = "SEQ")	
	public AghUnidadesFuncionais getUnidadeFuncional() {
		return unidadeFuncional;
	}

	public void setUnidadeFuncional(AghUnidadesFuncionais unidadeFuncional) {
		this.unidadeFuncional = unidadeFuncional;
	}	

	@Column(name = "LOCAL", nullable = false, length = 50)
	public String getLocal() {
		return local;
	}

	public void setLocal(String local) {
		this.local = local;
	}

	@Column(name = "SOLIC_CONSULTORIA_RESP", length = 1)	
	@org.hibernate.annotations.Type(type = "br.gov.mec.aghu.core.persistence.type.BooleanUserType")
	public Boolean getSolicitacaoConsultoriaResp() {
		return solicitacaoConsultoriaResp;
	}

	public void setSolicitacaoConsultoriaResp(
			Boolean solicitacaoConsultoriaResp) {
		this.solicitacaoConsultoriaResp = solicitacaoConsultoriaResp;
	}

	
	@Column(name = "SOLIC_CONSULTORIA_SOLIC", length = 1)	
	@org.hibernate.annotations.Type(type = "br.gov.mec.aghu.core.persistence.type.BooleanUserType")
	public Boolean getSolicitacaoConsultoriaSolic() {
		return solicitacaoConsultoriaSolic;
	}

	public void setSolicitacaoConsultoriaSolic(
			Boolean solicitacaoConsultoriaSolic) {
		this.solicitacaoConsultoriaSolic = solicitacaoConsultoriaSolic;
	}
	
	@Column(name = "IND_ALTA_MEDICA", nullable = true, length = 1)
	@Enumerated(EnumType.STRING)
	public DominioIndConcluido getIndAltaMedica() {
		return this.indAltaMedica;
	}
	
	public void setIndAltaMedica(DominioIndConcluido indAltaMedica) {
		this.indAltaMedica = indAltaMedica;
	}

	
	@Column(name = "GERM_MULTI_RESISTENTE", length = 1)	
	@org.hibernate.annotations.Type(type = "br.gov.mec.aghu.core.persistence.type.BooleanUserType")
	public Boolean getGermMultiResistente() {
		return germMultiResistente;
	}

	public void setGermMultiResistente(Boolean germMultiResistente) {
		this.germMultiResistente = germMultiResistente;
	}

	
	@Column(name = "paciente_possui_controle", length = 1)	
	@org.hibernate.annotations.Type(type = "br.gov.mec.aghu.core.persistence.type.BooleanUserType")
	public Boolean getPacientePossuiControle() {
		return pacientePossuiControle;
	}

	public void setPacientePossuiControle(Boolean pacientePossuiControle) {
		this.pacientePossuiControle = pacientePossuiControle;
	}

	
	@Column(name = "EXISTE_PROJETO_PACIENTE", length = 1)	
	@org.hibernate.annotations.Type(type = "br.gov.mec.aghu.core.persistence.type.BooleanUserType")
	public Boolean getExisteProjetoPaciente() {
		return existeProjetoPaciente;
	}

	public void setExisteProjetoPaciente(Boolean existeProjetoPaciente) {
		this.existeProjetoPaciente = existeProjetoPaciente;
	}

	@Column(name = "COR_GERME_MULTIRESISTENTE", nullable = true, length = 50)
	public String getCorGermMultiResistente() {
		return corGermMultiResistente;
	}

	public void setCorGermMultiResistente(String corGermMultiResistente) {
		this.corGermMultiResistente = corGermMultiResistente;
	}

	@Column(name = "HABILITA_PRESCRICAO", length = 1)	
	@org.hibernate.annotations.Type(type = "br.gov.mec.aghu.core.persistence.type.BooleanUserType")
	public Boolean getHabilitaPrescricaoEnfermagem() {
		return habilitaPrescricaoEnfermagem;
	}

	public void setHabilitaPrescricaoEnfermagem(
			Boolean habilitaPrescricaoEnfermagem) {
		this.habilitaPrescricaoEnfermagem = habilitaPrescricaoEnfermagem;
	}

	@Column(name = "POSSUI_PRESCRICAO_VIGENTE", length = 1)	
	@org.hibernate.annotations.Type(type = "br.gov.mec.aghu.core.persistence.type.BooleanUserType")
	public Boolean getPossuiPrescricaoVigente() {
		return possuiPrescricaoVigente;
	}

	public void setPossuiPrescricaoVigente(Boolean possuiPrescricaoVigente) {
		this.possuiPrescricaoVigente = possuiPrescricaoVigente;
	}

	@Column(name = "SERVIDOR_PRESCRICAO_VIGENTE")	
	public Integer getServidorPrescricaoVigente() {
		return servidorPrescricaoVigente;
	}

	public void setServidorPrescricaoVigente(Integer servidorPrescricaoVigente) {
		this.servidorPrescricaoVigente = servidorPrescricaoVigente;
	}
	
	@Column(name = "SERVIDOR_PRESCRICAO_FUTURA")	
	public Integer getServidorPrescricaoFutura() {
		return servidorPrescricaoFutura;
	}

	public void setServidorPrescricaoFutura(Integer servidorPrescricaoFutura) {
		this.servidorPrescricaoFutura = servidorPrescricaoFutura;
	}


	@Column(name ="DTHR_FIM_PRESCRICAO_VIGENTE")
	@Temporal(TemporalType.TIMESTAMP)
	public Date getDthrFimPrescricaoVigente() {
		return dthrFimPrescricaoVigente;
	}

	public void setDthrFimPrescricaoVigente(Date dthrFimPrescricaoVigente) {
		this.dthrFimPrescricaoVigente = dthrFimPrescricaoVigente;
	}

	@Column(name = "PRESCRICAO_FUTURA", length = 1)	
	@org.hibernate.annotations.Type(type = "br.gov.mec.aghu.core.persistence.type.BooleanUserType")
	public Boolean getPrescricaoFutura() {
		return prescricaoFutura;
	}

	public void setPrescricaoFutura(Boolean prescricaoFutura) {
		this.prescricaoFutura = prescricaoFutura;
	}
	
	@Column(name = "SERVIDOR_PRESC_VIGENTE_VALIDA")	
	public Integer getServidorPrescricaoVigenteValida() {
		return servidorPrescricaoVigenteValida;
	}

	public void setServidorPrescricaoVigenteValida(
			Integer servidorPrescricaoVigenteValida) {
		this.servidorPrescricaoVigenteValida = servidorPrescricaoVigenteValida;
	}

	@Column(name = "SERVIDOR_PRESC_FUTURA_VALIDA")	
	public Integer getServidorPrescricaoFuturaValida() {
		return servidorPrescricaoFuturaValida;
	}

	public void setServidorPrescricaoFuturaValida(
			Integer servidorPrescricaoFuturaValida) {
		this.servidorPrescricaoFuturaValida = servidorPrescricaoFuturaValida;
	}

	@Column(name = "EVOLUCAO_PELO_MEDICO", length = 1)	
	@org.hibernate.annotations.Type(type = "br.gov.mec.aghu.core.persistence.type.BooleanUserType")
	public Boolean getEvolucaoPeloMedico() {
		return evolucaoPeloMedico;
	}

	public void setEvolucaoPeloMedico(Boolean evolucaoPeloMedico) {
		this.evolucaoPeloMedico = evolucaoPeloMedico;
	}
	
	@Column(name = "EVOLUCAO_PELO_OUTROS", length = 1)	
	@org.hibernate.annotations.Type(type = "br.gov.mec.aghu.core.persistence.type.BooleanUserType")
	public Boolean getEvolucaoPeloOutros() {
		return evolucaoPeloOutros;
	}

	public void setEvolucaoPeloOutros(Boolean evolucaoPeloOutros) {
		this.evolucaoPeloOutros = evolucaoPeloOutros;
	}
	
	@Column(name = "EVOLUCAO_PELO_ENFERMEIRO", length = 1)	
	@org.hibernate.annotations.Type(type = "br.gov.mec.aghu.core.persistence.type.BooleanUserType")
	public Boolean getEvolucaoPeloEnfermeiro() {
		return evolucaoPeloEnfermeiro;
	}

	public void setEvolucaoPeloEnfermeiro(Boolean evolucaoPeloEnfermeiro) {
		this.evolucaoPeloEnfermeiro = evolucaoPeloEnfermeiro;
	}

	@Column(name = "habilita_botao_prescricao", length = 1)	
	@org.hibernate.annotations.Type(type = "br.gov.mec.aghu.core.persistence.type.BooleanUserType")
	public Boolean getHabilitaBotaoPrescricao() {
		return habilitaBotaoPrescricao;
	}

	public void setHabilitaBotaoPrescricao(Boolean habilitaBotaoPrescricao) {
		this.habilitaBotaoPrescricao = habilitaBotaoPrescricao;
	}

	@Column(name="ULCERA_MEDICAO")
	public Integer getUlceraMedicao() {
		return ulceraMedicao;
	}

	public void setUlceraMedicao(Integer ulceraMedicao) {
		this.ulceraMedicao = ulceraMedicao;
	}

	@Column(name = "ULCERA_PRESSAO", length = 1)	
	@org.hibernate.annotations.Type(type = "br.gov.mec.aghu.core.persistence.type.BooleanUserType")
	public Boolean getUlceraPressao() {
		return ulceraPressao;
	}

	public void setUlceraPressao(Boolean ulceraPressao) {
		this.ulceraPressao = ulceraPressao;
	}
	
	@Temporal(TemporalType.TIMESTAMP)
	@Column(name = "DTHR_FIM", length = 7)
	public Date getDthrFim() {
		return this.dthrFim;
	}

	public void setDthrFim(Date dthrFim) {
		this.dthrFim = dthrFim;
	}
	
	@ManyToOne(fetch = FetchType.LAZY)
	@JoinColumn(name = "ESP_SEQ")
	public AghEspecialidades getEspecialidade() {
		return this.especialidade;
	}

	public void setEspecialidade(AghEspecialidades especialidade) {
		this.especialidade = especialidade;
	}

	@ManyToOne(fetch = FetchType.LAZY)
	@JoinColumns({
			@JoinColumn(name = "SER_MATRICULA", referencedColumnName = "MATRICULA"),
			@JoinColumn(name = "SER_VIN_CODIGO", referencedColumnName = "VIN_CODIGO") })
	public RapServidores getServidor() {
		return this.servidor;
	}

	public void setServidor(RapServidores servidor) {
		this.servidor = servidor;
	}
	
	
	@Column(name = "IND_PAC_ATENDIMENTO", nullable = false, length = 1)
	@Enumerated(EnumType.STRING)
	public DominioPacAtendimento getIndPacAtendimento() {
		return this.indPacAtendimento;
	}

	public void setIndPacAtendimento(DominioPacAtendimento indPacAtendimento) {
		this.indPacAtendimento = indPacAtendimento;
	}

	@Column(name = "IND_PAC_CPA", length = 1)
	@org.hibernate.annotations.Type(type = "br.gov.mec.aghu.core.persistence.type.BooleanUserType")
	public Boolean getIndPacCpa() {
		return this.indPacCpa;
	}

	public void setIndPacCpa(Boolean indPacCpa) {
		this.indPacCpa = indPacCpa;
	}
	

	
	/**
	 * Campo sintÃ©tico criado para calcular e exibir em tela a idade atual do
	 * paciente conforme sua data de nascimento
	 * 
	 * @return
	 */
	@Transient
	public Integer getIdade() {
		// Cria um objeto calendar com a data atual
		Calendar today = Calendar.getInstance();
		return this.getIdade(today.getTime());
	}

	/**
	 * Campo sintético criado para calcular a idade do paciente em uma
	 * determinada data, conforme sua data de nascimento
	 * 
	 * @return
	 */
	@Transient
	public Integer getIdade(Date data) {
		if (this.getDtNascimento() != null) {
			Calendar dataNascimento = new GregorianCalendar();
			dataNascimento.setTime(this.getDtNascimento());
			Calendar dataCalendario = new GregorianCalendar();
			dataCalendario.setTime(data);
			// ObtÃ©m a idade baseado no ano
			this.idade = dataCalendario.get(Calendar.YEAR)
					- dataNascimento.get(Calendar.YEAR);
			dataNascimento.add(Calendar.YEAR, this.idade);
			// se a data de hoje Ã© antes da data de Nascimento, entÃ£o diminui
			// 1(um)
			if (dataCalendario.before(dataNascimento)) {
				this.idade--;
			}
		}

		return this.idade;
	}

	public void setIdade(Integer idade) {
		this.idade = idade;
	}
	

	public enum Fields {
		UNIDADE_FUNCIONAL("unidadeFuncional"),
		UNIDADE_FUNCIONAL_SEQ("unidadeFuncional.seq"),
		PAC_CODIGO("pacCodigo"),
		NOME("nome"),
		PRONTUARIO("prontuario"),
		ATENDIMENTO("atdSeq"), 
		DTHR_FIM("dthrFim"),
		ESPECIALIDADE("especialidade"),
		ESPECIALIDADE_SEQ("especialidade.seq"),
		SERVIDOR("servidor")
				, IND_PAC_ATENDIMENTO("indPacAtendimento")
		, IND_PAC_CPA("indPacCpa")

;

		private String fields;

		private Fields(String fields) {
			this.fields = fields;
		}

		@Override
		public String toString() {
			return fields;
		}
	}

}