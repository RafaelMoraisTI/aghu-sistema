<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:aghu="http://xmlns.jcp.org/jsf/component" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:mf="http://www.mec.gov.br/taglib">  
  <ui:composition template="/WEB-INF/templates/form_template.xhtml"> 
    <ui:define name="head"> 
      <title>#{messages.LABEL_SOLICITAR_INTERCONSULTA_TITULO} :: AGHU - MEC</title> 
    </ui:define>  
    <ui:define name="metadata"> 
      <f:metadata> 
        <f:viewAction action="#{solicitarInterconsultaController.init}"/> 
      </f:metadata> 
    </ui:define>  
    <ui:define name="body"> 
      <mec:pageConfig controller="#{solicitarInterconsultaController}"/>  
      <h:form prependId="false" id="formPesquisa"> 
	  <p:outputPanel id="panelCampos" layout="inline" styleClass="aghu-panel-geral">
        <aghu:panelGeral legend="#{messages.LABEL_SOLICITAR_INTERCONSULTA_TITULO}"> 
         <aghu:linha> 
			<p:column> 
			      <h:outputLabel value="#{messages.LABEL_PACIENTE_INTERCONSULTA}"/> 
                  <h:outputText value="#{solicitarInterconsultaController.pacNome}" style="margin-right: 150px;" /> 
          	</p:column> 
			<p:column style="float:left;margin-left: 5px;"> 			
                  <h:outputLabel value="#{messages.LABEL_CONSULTA_INTERCONSULTA}"/> 
                  <h:outputText value="#{solicitarInterconsultaController.numConsulta}"/> 
			</p:column> 
        </aghu:linha> 
         <aghu:linha> 
                   
             <mec:suggestionBox  requiredFake="true" label="#{messages.LABEL_AGENDA_INTERCONSULTA}" title="#{messages.TITLE_AGENDA_INTERCONSULTA}" descricaoInput="sigla" descricaoLabel="nomeEspecialidade"  width="800px" maxlength="60" descricaoLimite="30" suggestionAction="pesquisarAgenda" id="suggestion_agenda" controller="#{solicitarInterconsultaController}" value="#{solicitarInterconsultaController.aghEspecialidades}"> 
	              <p:column> 
	                <f:facet name="header"> 
	                  <b>#{messages.LABEL_SIGLA_INTERCONSULTA}</b> 
	                </f:facet> #{item.sigla}
	              </p:column>  
	              <p:column> 
	                <f:facet name="header"> 
	                  <b>#{messages.LABEL_ESPECIALIDADE_INTERCONSULTA}</b> 
	                </f:facet> #{item.nomeEspecialidade}
	              </p:column> 
	                <p:column> 
	                <f:facet name="header"> 
	                  <b>#{messages.LABEL_CODIGO}</b> 
	                </f:facet> #{item.seq}
	              </p:column> 
           </mec:suggestionBox>   
           
           <mec:suggestionBox  label="#{messages.LABEL_EQUIPE_INTERCONSULTA}" title="#{messages.TITLE_EQUIPE_INTERCONSULTA}" descricaoInput="seq" descricaoLabel="nome"  width="700px" maxlength="60" descricaoLimite="30" suggestionAction="pesquisarEquipe" id="suggestion_equipe" controller="#{solicitarInterconsultaController}" value="#{solicitarInterconsultaController.aghEquipes}"> 
	              <p:column> 
	                <f:facet name="header"> 
	                  <b>#{messages.LABEL_CODIGO}</b> 
	                </f:facet> #{item.seq}
	              </p:column>  
	              <p:column> 
	                <f:facet name="header"> 
	                  <b>#{messages.LABEL_NOME_INTERCONSULTA}</b> 
	                </f:facet> #{item.nome}
	              </p:column> 
	               <p:column> 
	                <f:facet name="header"> 
	                  <b>#{messages.LABEL_VINCULO_INTERCONSULTA}</b> 
	                </f:facet> #{item.vinculo}
	              </p:column> 
	              <p:column> 
	                <f:facet name="header"> 
	                  <b>#{messages.LABEL_MATRICULA_INTERCONSULTA}</b> 
	                </f:facet> #{item.matricula}
	              </p:column> 
	   
	        </mec:suggestionBox> 
              
        </aghu:linha> 
          
          <aghu:linha>
               <mec:suggestionBox  label="#{messages.LABEL_PROFISSIONAL_INTERCONSULTA}" title="#{messages.TITLE_PROFISSIONAL_INTERCONSULTA}" descricaoInput="labelProfissional" descricaoLabel="rpfNome"  width="800px" maxlength="60" descricaoLimite="30" suggestionAction="pesquisarProfissional" id="suggestion_profissional" controller="#{solicitarInterconsultaController}" value="#{solicitarInterconsultaController.rapServidoresVO}"> 
	            <p:column> 
	                <f:facet name="header"> 
	                  <b>#{messages.LABEL_VINCULO_INTERCONSULTA}</b> 
	                </f:facet> #{item.vinculo}
	              </p:column> 
	              <p:column> 
	                <f:facet name="header"> 
	                  <b>#{messages.LABEL_MATRICULA_INTERCONSULTA}</b> 
	                </f:facet> #{item.matricula}
	              </p:column> 
	              <p:column> 
	                <f:facet name="header"> 
	                  <b>#{messages.LABEL_NOME_INTERCONSULTA}</b> 
	                </f:facet> #{item.rpfNome}
	              </p:column>
           </mec:suggestionBox> 
         </aghu:linha>
		   
		   <aghu:linha>
		       		<mec:inputTextArea requiredFake="true"  cols="70" rows="5" maxlength="1000" value="#{solicitarInterconsultaController.observacao}" label="#{messages.LABEL_OBSERVACAO_INTERCONSULTA}" title="#{messages.TITLE_OBSERVACAO_INTERCONSULTA}" id="observacao" />
			</aghu:linha>
              
        </aghu:panelGeral>  
		   </p:outputPanel> 
        <aghu:acao>
          <mec:commandButton value="#{messages.LABEL_ALTERAR}" id="bt_alterar" rendered="#{!solicitarInterconsultaController.exibirBotaoAdicionar}" action="#{solicitarInterconsultaController.adicionar}" profile="ok"/>   
          <mec:commandButton includePageParams="false" id="bt_cancelarEdic" value="#{messages.LABEL_CANCELAR_EDICAO}" action="#{solicitarInterconsultaController.cancelarEdicao}" rendered="#{!solicitarInterconsultaController.exibirBotaoAdicionar}"  style="float:none !important" profile="cancel" immediate="true" ajax="true" process="@this" render="formPesquisa, observacao, resultado"/> 
		  <mec:commandButton value="#{messages.LABEL_GENERICO_BOTAO_ADICIONAR}" id="bt_adiciona" rendered="#{solicitarInterconsultaController.exibirBotaoAdicionar}" action="#{solicitarInterconsultaController.adicionar}" profile="ok"/>  
          <mec:commandButton id="bt_limpar" value="#{messages.LABEL_GENERICO_BOTAO_LIMPAR}"  action="#{solicitarInterconsultaController.limparPesquisa}" styleClass="bt_cinza" profile="clear" immediate="true" ajax="true" process="@this" render="formPesquisa, observacao"/>  
		</aghu:acao> 
      </h:form>  
      <h:form prependId="false" id="resultado"> 
        <p:outputPanel id="panelResultado" layout="inline"> 
		<aghu:linha></aghu:linha><aghu:linha></aghu:linha>
          <aghu:linha> 
             <mec:serverDataTable id="tabelaSolicitaInterconsulta" list="#{solicitarInterconsultaController.solicitaInterconsultaVO}"  scrollable="true" scrollWidth="false" selection="parametroSelecionado"  controller="#{solicitarInterconsultaController}"> 
              <c:set var="interconsulta" value="#{item}"/>  
              <p:column style="width:5%;" > 
                <f:facet name="header">
						<h:outputText value="#{messages.LABEL_ACAO}" />
				</f:facet>
                <mec:commandLink id="link_editar"  title="#{messages.TITLE_BOTAO_EDITAR_INTERCONSULTA}" action="#{solicitarInterconsultaController.editar}" styleClass="silk-pencil silk-icon" rendered="#{!interconsulta.edita}"   render="formPesquisa"> 
                  <f:setPropertyActionListener for="command" target="#{solicitarInterconsultaController.parametroSelecionado}" value="#{interconsulta}"/> 
                </mec:commandLink> 
                         
                <mec:commandLink id="link_excluir" title="#{messages.TITLE_BOTAO_EXCLUIR_INTERCONSULTA}" action="#{solicitarInterconsultaController.excluir}" styleClass="silk-delete silk-icon"> 
                  <f:setPropertyActionListener for="command" target="#{solicitarInterconsultaController.parametroSelecionado}" value="#{interconsulta}"/> 
                </mec:commandLink> 
                
              </p:column>  
              <p:column> 
                <f:facet name="header"> 
                  <h:outputText value="#{messages.LABEL_AGENDA_INTERCONSULTA}"/> 
                </f:facet>  
             	<h:outputText value="#{(interconsulta.agendaFormatado.length() &gt; 40) ? fn:substring(interconsulta.agendaFormatado,0,40) : interconsulta.agendaFormatado}#{(interconsulta.agendaFormatado.length() &gt; 40) ? '...' : '' }"
                			  title="#{(interconsulta.agendaFormatado.length() &gt; 40) ? interconsulta.agendaFormatado : null}"/> 
              </p:column>  
              <p:column> 
                <f:facet name="header"> 
                  <h:outputText value="#{messages.LABEL_EQUIPE_INTERCONSULTA}"/> 
                </f:facet>  
              	<h:outputText value="#{(interconsulta.equipeFormatado.length() &gt; 40) ? fn:substring(interconsulta.equipeFormatado,0,40) : interconsulta.equipeFormatado}#{(interconsulta.equipeFormatado.length() &gt; 40) ? '...' : '' }"
                			  title="#{(interconsulta.equipeFormatado.length() &gt; 40) ? interconsulta.equipeFormatado : null}"/> 
              </p:column>  
              <p:column> 
                <f:facet name="header"> 
                  <h:outputText value="#{messages.LABEL_PROFISSIONAL_INTERCONSULTA}"/> 
                </f:facet>  
                <h:outputText value="#{(interconsulta.profissionalFormatado.length() &gt; 40) ? fn:substring(interconsulta.profissionalFormatado,0,40) : interconsulta.profissionalFormatado}#{(interconsulta.profissionalFormatado.length() &gt; 40) ? '...' : '' }"
                			  title="#{(interconsulta.profissionalFormatado.length() &gt; 40) ? interconsulta.profissionalFormatado : null}"/> 
              </p:column>  
              <p:column style="width:5%;"> 
                <f:facet name="header"> 
                  <h:outputText value="#{messages.LABEL_PREVISAO_INTERCONSULTA}"/> 
                </f:facet>  
                <h:outputText value="#{interconsulta.previsao}">
               	 <f:convertDateTime pattern="dd/MM/yyyy" />
                </h:outputText> 
              </p:column> 
            </mec:serverDataTable> 
          </aghu:linha>  
	 
		</p:outputPanel> 
        <aghu:acao> 
          <mec:commandButton value="#{messages.LABEL_GENERICO_BOTAO_GRAVAR_INTERCONSULTA}" id="bt_gravar" rendered="#{!solicitarInterconsultaController.exibirBotaoGravar}" action="#{solicitarInterconsultaController.gravar}" profile="ok"/>  
        </aghu:acao> 
	   <aghu:acao> 
	    <mec:commandButton id="bt_cancelar" value="#{messages.LABEL_GENERICO_BOTAO_CANCELAR_INTERCONSULTA}" action="#{solicitarInterconsultaController.cancelar}" profile="cancel" immediate="true" />  
		</aghu:acao>
      </h:form> 
    </ui:define> 
  </ui:composition> 
</html>
