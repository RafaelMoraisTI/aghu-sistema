<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:aghu="http://xmlns.jcp.org/jsf/component" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:mf="http://www.mec.gov.br/taglib">  
  <ui:fragment> 
    <aghu:linha> 
      <p:accordionPanel id="togglePanelExclusao" rendered="#{solicitacaoServicoController.solicitacaoServico.numero != null}" activeIndex="-1" prependId="false"> 
        <p:tab title="#{messages.EXCLUSAO_SOL_SERVICO}"> 
          <aghu:panelGeral style="margin-left: 4px !important; margin-right: 4px !important"> 
            <aghu:linha> 
              <p:outputPanel id="panel_excluido" layout="inline"> 
                <mec:selectBooleanCheckbox label="#{messages.LABEL_EXCLUIDO_SOL_SERVICO}" title="#{messages.TITLE_EXCLUIDO_SOL_SERVICO}" readonly="#{!mf:hasPermission(securityController,'cadastrarSolicitacaoServico,gravar') or solicitacaoServicoController.rdEdicao}" value="#{solicitacaoServicoController.solicitacaoServico.indExclusao}" id="excluido"> 
                  <p:ajax event="change" process="@this" listener="#{solicitacaoServicoController.validaExcluidoDevolvido}"/>  
                  <p:ajax update="@(#motivoExclusaoPanel)" event="change"/> 
                </mec:selectBooleanCheckbox> 
              </p:outputPanel>  
              <p:outputPanel id="motivoExclusaoPanel" layout="inline"> 
                <mec:inputText id="motivoExclusao" value="#{solicitacaoServicoController.solicitacaoServico.motivoExclusao}" label="#{messages.LABEL_MOTIVO_DEV_SOL_SERVICO}" title="#{messages.TITLE_MOTIVO_EXCLS_SOL_SERVICO}" readonly="#{!mf:hasPermission(securityController,'cadastrarSolicitacaoServico,gravar') or !solicitacaoServicoController.solicitacaoServico.indExclusao }" required="#{solicitacaoServicoController.solicitacaoServico.indExclusao}" maxlength="240" size="60" removerCaratersEspeciais="false" panelView="true"> 
                  <p:ajax event="change" eventsQueue="storeQueue" process="@this"/> 
                </mec:inputText> 
              </p:outputPanel>  
              <mec:inputTextData id="dtExc" label="#{messages.LABEL_DT_EXCLUSAO}" value="#{solicitacaoServicoController.solicitacaoServico.dtExclusao}" readonly="true" tipo="data"/>  
              <mec:inputText id="servidorExc" label="#{messages.LABEL_SERVIDOR}" size="40" value="#{solicitacaoServicoController.obterPessoaNome(solicitacaoServicoController.solicitacaoServico.servidorExcluidor)}" readonly="true"/> 
            </aghu:linha>  
            <aghu:linha> 
              <p:outputPanel id="panel_devolucao" layout="inline"> 
                <mec:selectBooleanCheckbox label="#{messages.LABEL_DEVOLVIDO_SOL_SERVICO}" title="#{messages.TITLE_DEVOLVIDO_SOL_SERVICO}" readonly="#{!(mf:hasPermission(securityController,'cadastrarSSComprador,gravar') or mf:hasPermission(securityController,'cadastrarSSChefias,gravar')             or mf:hasPermission(securityController,'cadastrarSSChefias,gravar')             or mf:hasPermission(securityController,'cadastrarSSPlanejamento,gravar')             or mf:hasPermission(securityController,'cadastrarSSEngenharia,gravar')) or solicitacaoServicoController.rdEdicao}" value="#{solicitacaoServicoController.solicitacaoServico.indDevolucao}" id="devolvido"> 
                  <p:ajax event="change" update="@(#panel_devolucao)" process="@this" listener="#{solicitacaoServicoController.validaExcluidoDevolvido}"/>  
                  <p:ajax update="@(#motivoDevolucaoPanel)" event="change"/> 
                </mec:selectBooleanCheckbox> 
              </p:outputPanel>  
              <p:outputPanel id="motivoDevolucaoPanel" layout="inline"> 
                <mec:inputText id="motivoDev" value="#{solicitacaoServicoController.solicitacaoServico.justificativaDevolucao}" label="#{messages.LABEL_MOTIVO_DEV_SOL_SERVICO}" title="#{messages.TITLE_MOTIVO_DEV_SOL_SERVICO}" readonly="#{!(mf:hasPermission(securityController,'cadastrarSSComprador,gravar') or mf:hasPermission(securityController,'cadastrarSSChefias,gravar')             or mf:hasPermission(securityController,'cadastrarSSChefias,gravar') or mf:hasPermission(securityController,'cadastrarSSPlanejamento,gravar')             or mf:hasPermission(securityController,'cadastrarSSEngenharia,gravar'))  or !solicitacaoServicoController.solicitacaoServico.indDevolucao }" required="#{solicitacaoServicoController.solicitacaoServico.indDevolucao}" maxlength="240" size="60" removerCaratersEspeciais="false" panelView="true"> 
                  <p:ajax event="change" eventsQueue="storeQueue" process="@this"/> 
                </mec:inputText> 
              </p:outputPanel> 
            </aghu:linha> 
          </aghu:panelGeral> 
        </p:tab> 
      </p:accordionPanel> 
    </aghu:linha> 
  </ui:fragment> 
</html>
