<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml"
		xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
		xmlns:mec="http://xmlns.jcp.org/jsf/composite/components"
		xmlns:p="http://primefaces.org/ui"
		xmlns:pe="http://primefaces.org/ui/extensions"
		xmlns:aghu="http://xmlns.jcp.org/jsf/component"
		xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
		xmlns:f="http://xmlns.jcp.org/jsf/core"
		xmlns:h="http://xmlns.jcp.org/jsf/html"
		xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
		xmlns:mf="http://www.mec.gov.br/taglib">

	<ui:composition> 
		<p:dialog id="modalCentralMensagens" zindex="2" width="80%" height="60%" modal="true" resizable="false" widgetVar="modalCentralMensagensWG"
				closable="true" visible="#{modalCentralMensagensController.showModal}" >
			<p:ajax event="close" listener="#{modalCentralMensagensController.hideModal}" />

      		<f:facet name="header">
        		<h:outputText value="#{messages.LABEL_CENTRAL_MENSAGENS}" /> 
   			</f:facet>

			<h:form prependId="false" id="centralMensagensForm"> 
        		<aghu:panelGeral legend="#{messages.LABEL_INFORMACOES_PACIENTE}">
          			<aghu:linha>
          				<mec:inputTextProntuario label="#{messages.LABEL_PRONTUARIO}" value="#{manterPrescricaoMedicaController.prescricaoMedicaVO.prontuario}"
			              		size="10" emptyStringToNullConverter="emptyStringToNullConverter" readonly="true" id="txProntuario"
			              		converter="#{prontuarioConverter}" />

		              	<mec:inputText label="#{messages.LABEL_PACIENTE}" value="#{manterPrescricaoMedicaController.prescricaoMedicaVO.nome}" size="50" 
		              			style="text-transform:uppercase" readonly="true" id="txPaciente" />

		              	<mec:inputText label="#{messages.LABEL_LOCAL}" value="#{manterPrescricaoMedicaController.prescricaoMedicaVO.local}" size="20"
		              			style="text-transform:uppercase" readonly="true" id="txLocal" />
	  				</aghu:linha>
        		</aghu:panelGeral>

        		<aghu:panelGeral legend="#{messages.LABEL_MENSAGENS}">
        			<aghu:linha>
	  					<mec:serverDataTable id="gridMensagens" list="#{modalCentralMensagensController.listaMensagens}"
	  					selection=""
	  					 scrollable="true">
	                    	<p:column styleClass="tdAcao" style="width: 5%;">
	                      		<f:facet name="header">
	                        		<h:outputText value="#{messages.LABEL_ACAO}"/>
	                      		</f:facet>
	
								<mec:commandLink title="#{messages.LABEL_DETALHAR}" profile="view"
										action="#{modalCentralMensagensController.redirecionarMensagem(item)}" />
							</p:column>
	
	                    	<p:column style="width: 65%;">
	                      		<f:facet name="header">
	                        		<h:outputText value="#{messages.LABEL_MENSAGEM}"/>
	                      		</f:facet>
	
		                      	<h:outputText value="#{item.mensagem}" />
		                    </p:column>
	                  	</mec:serverDataTable>
                  	</aghu:linha> 
        		</aghu:panelGeral> 
      		</h:form> 
    	</p:dialog> 
  	</ui:composition> 
</html>
