<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:aghu="http://xmlns.jcp.org/jsf/component" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:mf="http://www.mec.gov.br/taglib">  
  <ui:composition template="/WEB-INF/templates/form_template.xhtml"> 
    <ui:define name="head"> 
      <title>#{messages.LABEL_MANTER_ATENDIMENTO_DIVERSO} :: #{messages.NOME_ABREVIADO_PROJETO}</title> 
    </ui:define>  
    <ui:define name="metadata"> 
      <f:metadata> 
        <f:viewAction action="#{atendimentoDiversoController.inicio}"/> 
      </f:metadata> 
    </ui:define>  
    <ui:define name="body"> 
      <mec:pageConfig controller="#{atendimentoDiversoController}" ignoreEnter="true"/>  
      <h:form prependId="false" id="formatendimentoDiverso"> 
        <aghu:panelGeral legend="#{messages.LABEL_MANTER_ATENDIMENTO_DIVERSO}"> 
          <aghu:linha> 
            <mec:suggestionBox id="sbIdentificacaoUnidade" 
           			label="#{messages.LABEL_UNID_EXEC}" 
           			title="#{messages.TITLE_DESCRICAO_UNID_EXEC_SUGGESTION}" 
           			suggestionAction="obterAghUnidadesFuncionaisExecutoras" 
           			width="500" 
           			descricaoInput="seq" 
           			posSelectionAction="persistirIdentificacaoUnidadeExecutora" 
           			descricaoLabel="seqAndarAlaDescricao" 
           			maxlength="30" 
           			required="true" 
           			block="true" 
           			controller="#{atendimentoDiversoController}" 
           			value="#{atendimentoDiversoController.unidadeExecutora}"
           			var="_itemIdentificacaoUnidade"
					itemValue="#{_itemIdentificacaoUnidade}"> 
              <p:column> 
                <f:facet name="header"> 
                  <b>#{messages.LABEL_CODIGO}</b> 
                </f:facet> #{_itemIdentificacaoUnidade.seq}
              </p:column>  
              <p:column> 
                <f:facet name="header"> 
                  <b>#{messages.LABEL_DESCRICAO}</b> 
                </f:facet> #{_itemIdentificacaoUnidade.descricao}
              </p:column> 
            </mec:suggestionBox>  
            <mec:inputNumero id="seq" 
            		value="#{atendimentoDiversoController.aelAtendimentoDiversos.seq}" 
            		label="#{messages.LABEL_CODIGO}" 
            		readonly="true" 
            		size="8"/> 
          </aghu:linha>  
          <br />
          <aghu:panelGeral legend="#{messages.LABEL_TIPO_ATENDIMENTO}"> 
            <p:outputPanel id="panelTipoAtendimento" layout="inline"> 
              <p:outputPanel rendered="#{atendimentoDiversoController.renderizaProjPesquisa}" layout="inline"> 
                <aghu:linha> 
                  <mec:suggestionBox id="suggestionProjetoPesquisa"
                  		label="#{messages.LABEL_SOLICITACAO_DIVERSOS_PROJETO_PESQUISA}" 
                  		title="#{messages.TITLE_PROJETO_PESQUISA_ATENDIMENTO_DIVERSOS}" 
                  		descricaoInput="numero" 
                  		descricaoLabel="nome" 
                  		posSelectionAction="atualizaSuggestionsTipoAtendimento" 
                  		posDeleteAction="atualizaSuggestionsTipoAtendimento" 
                  		suggestionAction="obterProjetosPesquisa" 
                  		width="900" 
                  		controller="#{atendimentoDiversoController}" 
                  		value="#{atendimentoDiversoController.aelAtendimentoDiversos.aelProjetoPesquisas}" 
                  		render="panelTipoAtendimento"
                  		var="_itemProjetoPesquisa"
						itemValue="#{_itemProjetoPesquisa}"> 
                    <p:column> 
                      <f:facet name="header"> 
                        <b>#{messages.LABEL_SOLICITACAO_DIVERSOS_CODIGO}</b> 
                      </f:facet> #{_itemProjetoPesquisa.seq}
                    </p:column>  
                    <p:column> 
                      <f:facet name="header"> 
                        <b>#{messages.LABEL_SOLICITACAO_DIVERSOS_NUMERO}</b> 
                      </f:facet> #{_itemProjetoPesquisa.numero}
                    </p:column>  
                    <p:column> 
                      <f:facet name="header"> 
                        <b>#{messages.LABEL_SOLICITACAO_DIVERSOS_PROJETO_PESQUISA}</b> 
                      </f:facet> #{_itemProjetoPesquisa.nome}
                    </p:column> 
                  </mec:suggestionBox> 
                </aghu:linha> 
              </p:outputPanel>  
              <p:outputPanel rendered="#{atendimentoDiversoController.renderizaLabExterno}" layout="inline"> 
                <aghu:linha> 
                  <mec:suggestionBox id="suggestionLaboratorioExterno"
                  		label="#{messages.LABEL_SOLICITACAO_DIVERSOS_LABORATORIO_EXTERNO}" 
                  		title="#{messages.TITLE_LABORATORIO_EXTERNO_ATENDIMENTO_DIVERSOS}" 
                  		descricaoInput="seq" 
                  		descricaoLabel="nome" 
                  		suggestionAction="obterLaboratoriosExternos" 
                  		posSelectionAction="atualizaSuggestionsTipoAtendimento" 
                  		posDeleteAction="atualizaSuggestionsTipoAtendimento" 
                  		width="900" 
                  		controller="#{atendimentoDiversoController}" 
                  		value="#{atendimentoDiversoController.aelAtendimentoDiversos.aelLaboratorioExternos}" 
                  		render="panelTipoAtendimento"
                  		var="_itemLaboratorioExterno"
						itemValue="#{_itemLaboratorioExterno}"> 
                    <p:column> 
                      <f:facet name="header"> 
                        <b>#{messages.LABEL_SOLICITACAO_DIVERSOS_CODIGO}</b> 
                      </f:facet> #{_itemLaboratorioExterno.seq}
                    </p:column>  
                    <p:column> 
                      <f:facet name="header"> 
                        <b>#{messages.LABEL_SOLICITACAO_DIVERSOS_LABORATORIO}</b> 
                      </f:facet> #{_itemLaboratorioExterno.nome}
                    </p:column> 
                  </mec:suggestionBox> 
                </aghu:linha> 
              </p:outputPanel>  
              <p:outputPanel rendered="#{atendimentoDiversoController.renderizaContrQualidade}" layout="inline"> 
                <aghu:linha> 
                  <mec:suggestionBox id="suggestionControleQualidade" 
                  		label="#{messages.LABEL_SOLICITACAO_DIVERSOS_CONTROLE_QUALIDADE}" 
                  		title="#{messages.TITLE_MATERIAL_ATENDIMENTO_DIVERSOS}" 
                  		descricaoInput="seq" 
                  		descricaoLabel="material" 
                  		suggestionAction="obterControlesQualidade" 
                  		posSelectionAction="atualizaSuggestionsTipoAtendimento" 
                  		posDeleteAction="atualizaSuggestionsTipoAtendimento" 
                  		width="900" 
                  		controller="#{atendimentoDiversoController}" 
                  		value="#{atendimentoDiversoController.aelAtendimentoDiversos.aelCadCtrlQualidades}" 
                  		render="panelTipoAtendimento"
                  		var="_itemControleQualidade"
						itemValue="#{_itemControleQualidade}"> 
                    <p:column> 
                      <f:facet name="header"> 
                        <b>#{messages.LABEL_SOLICITACAO_DIVERSOS_CODIGO}</b> 
                      </f:facet> #{_itemControleQualidade.seq}
                    </p:column>  
                    <p:column> 
                      <f:facet name="header"> 
                        <b>#{messages.LABEL_SOLICITACAO_DIVERSOS_MATERIAL}</b> 
                      </f:facet> #{_itemControleQualidade.material}
                    </p:column> 
                  </mec:suggestionBox> 
                </aghu:linha> 
              </p:outputPanel>  
              <p:outputPanel rendered="#{atendimentoDiversoController.renderizaCadaver}" layout="inline"> 
                <aghu:linha> 
                  <mec:suggestionBox id="suggestionCadaver"
                  		label="#{messages.LABEL_SOLICITACAO_DIVERSOS_CADAVER}" 
                  		title="#{messages.TITLE_CADAVER_ATENDIMENTO_DIVERSOS}" 
                  		descricaoInput="seq" 
                  		descricaoLabel="nome" 
                  		suggestionAction="obterCadaveres" 
                  		posSelectionAction="atualizaSuggestionsTipoAtendimento" 
                  		posDeleteAction="atualizaSuggestionsTipoAtendimento" 
                  		width="900" 
                  		controller="#{atendimentoDiversoController}" 
                  		value="#{atendimentoDiversoController.aelAtendimentoDiversos.aelDadosCadaveres}" 
                  		render="panelTipoAtendimento"
                  		var="_itemCadaver"
						itemValue="#{_itemCadaver}"> 
                    <p:column> 
                      <f:facet name="header"> 
                        <b>#{messages.LABEL_SOLICITACAO_DIVERSOS_CODIGO}</b> 
                      </f:facet> #{_itemCadaver.seq}
                    </p:column>  
                    <p:column> 
                      <f:facet name="header"> 
                        <b>#{messages.LABEL_SOLICITACAO_DIVERSOS_NOME}</b> 
                      </f:facet> #{_itemCadaver.nome}
                    </p:column> 
                  </mec:suggestionBox> 
                </aghu:linha> 
              </p:outputPanel> 
            </p:outputPanel> 
          </aghu:panelGeral>  
          <aghu:panelGeral legend="#{messages.LABEL_INFORMACAO_COMPLEMENTAR}"> 
            <aghu:linha> 
              <mec:selectOneMenu id="origemAmostra" 
              		noSelectionOption="false" 
              		maxlength="2" size="5" 
              		enum="DominioOrigemAmostra" 
              		label="#{messages.LABEL_ORIGEM_AMOSTRA}" 
              		title="#{messages.TITLE_ORIGEM_AMOSTRA_ATENDIMENTO_DIVERSOS}" 
              		value="#{atendimentoDiversoController.aelAtendimentoDiversos.origemAmostra}"/>  
              <mec:selectOneMenu id="tipoAmostra" 
              		maxlength="2" size="5" 
              		enum="DominioTipoAmostra" 
              		label="#{messages.LABEL_TIPO_AMOSTRA}" 
              		title="#{messages.TITLE_TIPO_AMOSTRA_ATENDIMENTO_DIVERSOS}" 
              		value="#{atendimentoDiversoController.aelAtendimentoDiversos.tipoAmostra}"/>  
              <mec:inputText id="identificacaoAmostra" 
              		label="#{messages.LABEL_IDENTIFICACAO}" 
              		title="#{messages.TITLE_IDENTIFICACAO_AMOSTRA_ATENDIMENTO_DIVERSOS}" 
              		value="#{atendimentoDiversoController.aelAtendimentoDiversos.identificacaoAmostra}" 
              		style="text-transform:uppercase" 
              		size="20" maxlength="20"/>  
              <mec:inputTextData id="dtSoro" 
              		label="#{messages.LABEL_DATA_SORO}" 
              		title="#{messages.TITLE_DATA_SORO_ATENDIMENTO_DIVERSOS}" 
              		value="#{atendimentoDiversoController.aelAtendimentoDiversos.dtSoro}" 
              		tipo="data"/> 
            </aghu:linha>  
            <aghu:linha> 
              <mec:inputTextArea id="descricaoMaterial" 
              		rows="3" cols="88" 
              		label="#{messages.LABEL_MATERIAL}" 
              		title="#{messages.TITLE_DESCRICAO_MATERIAL_ATENDIMENTO_DIVERSOS}" 
              		value="#{atendimentoDiversoController.aelAtendimentoDiversos.descricaoMaterial}" 
              		maxlength="240" 
              		style="text-transform:uppercase"/> 
            </aghu:linha>  
            <aghu:linha> 
              <mec:suggestionBox id="especialidade" 
              		label="#{messages.LABEL_ESPECIALIDADE}" 
              		title="#{messages.TITLE_ESPECIALIDADE_ATENDIMENTO_DIVERSOS}" 
              		converter="#{aghEspecialidadesConverter}" 
              		descricaoInput="sigla" 
              		descricaoLabel="nomeEspecialidade" 
              		suggestionAction="pesquisarEspecialidades" 
              		width="900" 
              		controller="#{atendimentoDiversoController}" 
              		value="#{atendimentoDiversoController.aelAtendimentoDiversos.aghEspecialidades}"
              		var="_itemEspecialidade"
					itemValue="#{_itemEspecialidade}"> 
                <p:column> 
                  <f:facet name="header"> 
                    <b>#{messages.LABEL_CODIGO}</b> 
                  </f:facet> #{_itemEspecialidade.seq}
                </p:column>  
                <p:column> 
                  <f:facet name="header"> 
                    <b>#{messages.LABEL_ESPECIALIDADE}</b> 
                  </f:facet> #{_itemEspecialidade.nomeEspecialidade}
                </p:column>  
                <p:column> 
                  <f:facet name="header"> 
                    <b>#{messages.LABEL_SIGLA}</b> 
                  </f:facet> #{_itemEspecialidade.sigla}
                </p:column> 
              </mec:suggestionBox> 
            </aghu:linha>  
            <aghu:linha> 
              <mec:suggestionBox id="fccCentroCustos"
              		label="#{messages.LABEL_CENTRO_CUSTO}" 
              		title="#{messages.TITLE_CENTRO_CUSTO_ATENDIMENTO_DIVERSOS}" 
              		converter="#{fccCentroCustosConverter}" 
              		descricaoInput="codigo" 
              		descricaoLabel="descricao" 
              		suggestionAction="pesquisarServicos" 
              		width="900" 
              		controller="#{atendimentoDiversoController}" 
              		value="#{atendimentoDiversoController.aelAtendimentoDiversos.fccCentroCustos}"
              		var="_itemCentroCustos"
					itemValue="#{_itemCentroCustos}"> 
                <p:column> 
                  <f:facet name="header"> 
                    <b>#{messages.LABEL_CODIGO}</b> 
                  </f:facet> #{_itemCentroCustos.codigo}
                </p:column>  
                <p:column> 
                  <f:facet name="header"> 
                    <b>#{messages.LABEL_DESCRICAO}</b> 
                  </f:facet> #{_itemCentroCustos.descricao}
                </p:column> 
              </mec:suggestionBox> 
            </aghu:linha>  
            <aghu:linha> 
              <p:outputPanel id="pacienteDecorate" layout="inline"> 
                <mec:pesquisaPaciente id="pesqPaciente" 
                		value="#{atendimentoDiversoController.paciente}" 
                		valueChangeListener="#{atendimentoDiversoController.pesquisaPaciente}" 
                		render="pacienteDecorate, panelPaciente" 
                		readonly="#{atendimentoDiversoController.aelAtendimentoDiversos.nomePaciente != null}"/>  
                <br clear="none"/>  
                <mec:commandButton id="botaoPesquisaFonetica" 
                		value="#{messages.LABEL_PESQUISA_FONETICA}" 
                		readonly="#{atendimentoDiversoController.aelAtendimentoDiversos.nomePaciente != null}" 
                		action="#{atendimentoDiversoController.redirecionarPesquisaFonetica}" 
                		styleClass=" bt_cinza icon-pesquisa-fonetica"> 
                  <f:setPropertyActionListener target="#{pesquisaPacienteController.cameFrom}" value="exames-atendimentoDiverso" for="command"/>  
                  <f:setPropertyActionListener target="#{pesquisaPacienteController.exibeBotaoEditar}" value="false" for="command"/>  
                  <f:setPropertyActionListener target="#{pesquisaPacienteController.paramExibeBotaoIncluir}" value="false" for="command"/> 
                </mec:commandButton> 
              </p:outputPanel> 
            </aghu:linha>  
            <aghu:linha> 
              <p:outputPanel id="panelPaciente" layout="inline"> 
                <mec:inputText id="nomePaciente" 
                	readonly="#{atendimentoDiversoController.paciente != null}" 
                	label="#{messages.LABEL_NOME_DO_PACIENTE_EXTERNO}" 
                	title="#{messages.TITLE_PACIENTE_EXTERNO_ATENDIMENTO_DIVERSOS}" 
                	value="#{atendimentoDiversoController.aelAtendimentoDiversos.nomePaciente}" 
                	style="text-transform:uppercase" 
                	emptyStringToNull="true" 
                	size="70" maxlength="60"> 
                  <p:ajax event="change" bypassUpdates="false" update="@(#pacienteDecorate) @(#panelPaciente)" process="@this" listener="#{atendimentoDiversoController.ajustaValores1}"/> 
                </mec:inputText>  
                <mec:inputTextData id="dtNascimento" label="#{messages.LABEL_DATA_NASCIMENTO}" readonly="#{atendimentoDiversoController.paciente != null}" title="#{messages.TITLE_NASC_PACIENTE_EXTERNO_ATENDIMENTO_DIVERSOS}" value="#{atendimentoDiversoController.aelAtendimentoDiversos.dtNascimento}" tipo="data"/>  
                <mec:selectOneMenu id="sexo" maxlength="2" size="5" enum="DominioSexo" label="#{messages.LABEL_SEXO}" readonly="#{atendimentoDiversoController.paciente != null}" title="#{messages.TITLE_SEXO_PACIENTE_EXTERNO_ATENDIMENTO_DIVERSOS}" value="#{atendimentoDiversoController.aelAtendimentoDiversos.sexo}"/> 
              </p:outputPanel> 
            </aghu:linha> 
          </aghu:panelGeral> 
        </aghu:panelGeral>  
        <aghu:acao> 
          <mec:commandButton id="bt_confirmar" 
          		value="#{messages.LABEL_GRAVAR}" 
          		rendered="#{mf:hasPermission(securityController,'cadastrarAtendimentoDiversos,executar')}" 
          		action="#{atendimentoDiversoController.gravar}" 
          		profile="ok"/>  
          <mec:commandButton id="bt_cancelar" 
          		immediate="true" 
          		value="#{messages.LABEL_CANCELAR}" 
          		action="#{atendimentoDiversoController.voltar}" 
          		profile="cancel"/> 
        </aghu:acao> 
      </h:form> 
    </ui:define> 
  </ui:composition> 
</html>
