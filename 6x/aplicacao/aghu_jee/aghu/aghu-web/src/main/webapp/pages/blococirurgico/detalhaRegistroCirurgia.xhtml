<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:aghu="http://xmlns.jcp.org/jsf/component" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:mf="http://www.mec.gov.br/taglib">  
  <ui:composition xmlns:fn="http://java.sun.com/jsp/jstl/functions" template="/WEB-INF/templates/form_template.xhtml">  
    <ui:define name="head"> 
      <title>#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA} :: #{messages.NOME_ABREVIADO_PROJETO}</title> 
    </ui:define>  
    <ui:define name="metadata"> 
      <f:metadata> 
        <f:viewAction action="#{detalhaRegistroCirurgiaController.inicio}"/> 
      </f:metadata> 
    </ui:define>  
    <ui:define name="body"> 
      <mec:pageConfig controller="#{detalhaRegistroCirurgiaController}"/>  
      <p:outputPanel id="panelTodos" layout="inline"> 
        <h:form prependId="false" id="formDados"> 
          <aghu:panelGeral legend="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_DETALHE_CIRURGIA}"> 
            <aghu:linha> 
              <div id="divUnidade"> 
                <p:tooltip  direction="bottom-right" styleClass="tooltip" id="toolTipUnidade" layout="block" rendered="#{(detalhaRegistroCirurgiaController.cirurgia.unidadeFuncional.descricao.length() &gt; 30)}">  
                  <h:outputText value="#{detalhaRegistroCirurgiaController.cirurgia.unidadeFuncional.descricao}" id="outputTextUnidade"/> 
                </p:tooltip>  
                <mec:inputText id="unidade" label="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_UNIDADE_CIRURGICA}" value="#{detalhaRegistroCirurgiaController.cirurgia.unidadeFuncional.descricao}" readonly="true" size="30" maxlength="30"/> 
              </div>  
              <mec:inputText id="sala" label="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_SALA}" value="#{detalhaRegistroCirurgiaController.cirurgia.salaCirurgica.id.seqp}" readonly="true" size="2" maxlength="2"/>  
              <mec:inputText id="origem" label="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_ORIGEM}" value="#{detalhaRegistroCirurgiaController.cirurgia.origemPacienteCirurgia.descricao}" readonly="true" size="10" maxlength="10"/>  
              <mec:inputText id="data" label="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_DATA}" value="#{detalhaRegistroCirurgiaController.cirurgia.data}" readonly="true" datePattern="dd/MM/yyyy" size="10" maxlength="10"/>  
              <mec:inputText id="agenda" label="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_AGENDA}" value="#{detalhaRegistroCirurgiaController.cirurgia.numeroAgenda}" readonly="true" size="3" maxlength="3"/>  
              <mec:inputText id="situacao" label="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_SITUACAO}" value="#{detalhaRegistroCirurgiaController.cirurgia.situacao.descricao}" readonly="true" size="20" maxlength="20"/>  
              <mec:inputText id="docPaciente" label="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_DOC_PACIENTE}" value="#{detalhaRegistroCirurgiaController.cirurgia.documentoPaciente.descricao}" readonly="true" size="30" maxlength="30"/> 
            </aghu:linha>  
            <aghu:linha> 
              <mec:inputText id="prontuario" label="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_PRONTUARIO}" value="#{detalhaRegistroCirurgiaController.cirurgia.paciente.prontuario}" readonly="true" size="8" maxlength="8"/>  
              <div id="divNomePaciente"> 
                <p:tooltip  direction="bottom-right" styleClass="tooltip" id="toolTipNomePaciente" layout="block" rendered="#{(detalhaRegistroCirurgiaController.cirurgia.paciente.nome.length() &gt; 50)}">  
                  <h:outputText value="#{detalhaRegistroCirurgiaController.cirurgia.paciente.nome}" id="outputTextNomePaciente"/> 
                </p:tooltip>  
                <mec:inputText id="paciente" label="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_PACIENTE}" value="#{detalhaRegistroCirurgiaController.cirurgia.paciente.nome}" readonly="true" size="50" maxlength="50"/> 
              </div>  
              <mec:inputText id="idade" label="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_IDADE}" value="#{detalhaRegistroCirurgiaController.idadePaciente}" readonly="true" size="15" maxlength="15"/>  
              <div id="divConvenioPlano"> 
                <p:tooltip  direction="bottom-right" styleClass="tooltip" id="toolTipConvenioPlano" layout="block" rendered="#{(detalhaRegistroCirurgiaController.convenioPlano.length() &gt; 40)}">  
                  <h:outputText value="#{detalhaRegistroCirurgiaController.convenioPlano}" id="outputTextConvenioPlano"/> 
                </p:tooltip>  
                <mec:inputText id="convenioPlano" label="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_CONVENIO_PLANO}" value="#{detalhaRegistroCirurgiaController.convenioPlano}" readonly="true" size="40" maxlength="40"/> 
              </div> 
            </aghu:linha>  
            <aghu:linha> 
              <mec:inputTextData id="entradaSala" label="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_ENTRADA_SALA}" title="#{messages.TITLE_DETALHAR_REGISTRO_CIRURGIA_ENTRADA_SALA}" value="#{detalhaRegistroCirurgiaController.cirurgia.dataEntradaSala}" readonly="#{!detalhaRegistroCirurgiaController.edicao}" tipo="datahora"/>  
              <mec:inputTextData id="inicioCirurgia" label="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_INICIO_CIRURGIA}" title="#{messages.TITLE_DETALHAR_REGISTRO_CIRURGIA_INICIO_CIRURGIA}" value="#{detalhaRegistroCirurgiaController.cirurgia.dataInicioCirurgia}" readonly="#{!detalhaRegistroCirurgiaController.edicao}" tipo="datahora"/>  
              <mec:inputTextData id="fimCirurgia" label="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_FIM_CIRURGIA}" title="#{messages.TITLE_DETALHAR_REGISTRO_CIRURGIA_FIM_CIRURGIA}" value="#{detalhaRegistroCirurgiaController.cirurgia.dataFimCirurgia}" readonly="#{!detalhaRegistroCirurgiaController.edicao}" tipo="datahora"/>  
              <mec:inputTextData id="saidaSala" label="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_SAIDA_SALA}" title="#{messages.TITLE_DETALHAR_REGISTRO_CIRURGIA_SAIDA_SALA}" value="#{detalhaRegistroCirurgiaController.cirurgia.dataSaidaSala}" readonly="#{!detalhaRegistroCirurgiaController.edicao}" tipo="datahora"/>  
              <mec:inputTextData id="entradaSalaRecuperacao" label="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_ENTRADA_SALA_RECUPERACAO}" title="#{messages.TITLE_DETALHAR_REGISTRO_CIRURGIA_ENTRADA_SALA_RECUPERACAO}" value="#{detalhaRegistroCirurgiaController.cirurgia.dataEntradaSr}" readonly="#{!detalhaRegistroCirurgiaController.edicao}" tipo="datahora"/>  
              <mec:inputTextData id="saidaSalaRecuperacao" label="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_SAIDA_SALA_RECUPERACAO}" title="#{messages.TITLE_DETALHAR_REGISTRO_CIRURGIA_SAIDA_SALA_RECUPERACAO}" value="#{detalhaRegistroCirurgiaController.cirurgia.dataSaidaSr}" readonly="#{!detalhaRegistroCirurgiaController.edicao}" tipo="datahora"/> 
            </aghu:linha>  
            <aghu:linha> 
              <mec:inputText id="local" label="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_LOCAL}" value="#{detalhaRegistroCirurgiaController.localPaciente}" readonly="true" size="8" maxlength="8"/>  
              <mec:suggestionBox id="suggestionDestino" label="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_DESTINO}" title="#{messages.TITLE_DETALHAR_REGISTRO_CIRURGIA_DESTINO}" suggestionAction="listarDestinos" descricaoInput="seq" descricaoLabel="descricao" readonly="#{!detalhaRegistroCirurgiaController.edicao}" width="400" size="8" maxlength="8" controller="#{detalhaRegistroCirurgiaController}" value="#{detalhaRegistroCirurgiaController.cirurgia.destinoPaciente}"> 
                <p:column> 
                  <f:facet name="header"> 
                    <b>#{messages.LABEL_CODIGO}</b> 
                  </f:facet> #{item.seq}
                </p:column>  
                <p:column> 
                  <f:facet name="header"> 
                    <b>#{messages.LABEL_DESCRICAO}</b> 
                  </f:facet> #{item.descricao}
                </p:column> 
              </mec:suggestionBox> 
            </aghu:linha> 
          </aghu:panelGeral>  
          <aghu:acao> 
            <mec:commandButton id="bt_gravar" 
            	value="#{messages.LABEL_GRAVAR}" 
            	rendered="#{detalhaRegistroCirurgiaController.edicao}" 
            	action="#{detalhaRegistroCirurgiaController.gravar}" 
            	profile="ok"  block="true"/>  
            <mec:commandButton id="bt_descricao_cirurgica" 
            	value="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_DESCRICAO_CIRURGICA}" block="true" 
            	action="#{detalhaRegistroCirurgiaController.encaminharDescricaoCirurgica}" 
            	styleClass="bt_cinza"/>  
            <mec:backButton id="bt_voltar" 
            	value="#{messages.LABEL_VOLTAR}" 
            	exibirModalExclusiva="true" formId="formDados" 
            	rendered="#{!detalhaRegistroCirurgiaController.edicao}" 
            	action="#{detalhaRegistroCirurgiaController.cancelar}"/>  
            <mec:backButton id="bt_cancelar" 
            	value="#{messages.LABEL_CANCELAR}" 
            	exibirModalExclusiva="true" formId="formDados" 
            	rendered="#{detalhaRegistroCirurgiaController.edicao}" 
            	action="#{detalhaRegistroCirurgiaController.cancelar}"/> 
          </aghu:acao> 
        </h:form>  
        <p:tabView id="tapPanel" dynamic="true" activeIndex="#{detalhaRegistroCirurgiaController.abaAtiva}" prependId="false"> 
          <p:tab title="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_PROCEDIMENTOS}"  name="tab1" id="tab1" action="#{detalhaRegistroCirurgiaController.setAbaAtiva(0)}"> 
            <div style="width: 100%; height:186px; overflow:auto;"> 
              <h:form>
              <mec:serverDataTable id="tabelaProcedimentoDetalhaRegistroCirurgia" list="#{detalhaRegistroCirurgiaController.mbcProcEspPorCirurgiasList}" scrollable="true"> 
                <c:set var="_item" value="#{item}"/>  
                <p:column id="columnPrincipal"> 
                  <f:facet name="header"> 
                    <h:outputText id="titlePrincipal" value="#{messages.LABEL_PRINCIPAL}"/> 
                  </f:facet>  
                  <h:graphicImage value="/resources/img/icons/checked.png" styleClass="silk-icon silk-checked" id="iconePrincipalDetalhaRegistroCirurgia" disabled="true" rendered="#{_item.indPrincipal}"/> 
                </p:column>  
                <p:column id="columnCodigo"> 
                  <f:facet name="header"> 
                    <h:outputText id="titleCodigo" value="#{messages.LABEL_CODIGO}"/> 
                  </f:facet>  
                  <h:outputText id="textCodigo" value="#{_item.id.eprPciSeq}"/> 
                </p:column>  
                <p:column id="columnDescricao"> 
                  <f:facet name="header"> 
                    <h:outputText id="titleProcedimento" value="#{messages.LABEL_PROCEDIMENTO}"/> 
                  </f:facet>  
                  <h:outputText id="textProcedimento" value="#{_item.procedimentoCirurgico.descricao}"/> 
                </p:column>  
                <p:column id="columnSigla"> 
                  <f:facet name="header"> 
                    <h:outputText id="titleSigla" value="#{messages.LABEL_SIGLA}"/> 
                  </f:facet>  
                  <h:outputText id="textSigla" value="#{_item.mbcEspecialidadeProcCirgs.especialidade.sigla}"/> 
                </p:column>  
                <p:column id="columnQuantidade"> 
                  <f:facet name="header"> 
                    <h:outputText id="titleQuantidade" value="#{messages.LABEL_QUANTIDADE}"/> 
                  </f:facet>  
                  <h:outputText id="textQuantidade" value="#{_item.qtd}"/> 
                </p:column> 
              </mec:serverDataTable> 
	          </h:form>
            </div> 
          </p:tab>  
          <p:tab title="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_ANESTESIAS}" name="tab2" id="tab2" action="#{detalhaRegistroCirurgiaController.setAbaAtiva(1)}"> 
            <div style="width: 100%; height:186px; overflow:auto;"> 
              <h:form>
              <mec:serverDataTable id="tabelaAnestesiaDetalhaRegistroCirurgia" list="#{detalhaRegistroCirurgiaController.mbcAnestesiaCirurgiasList}" scrollable="true"> 
                <c:set var="_item" value="#{item}"/>  
                <p:column id="columnCodigoAnestesia"> 
                  <f:facet name="header"> 
                    <h:outputText id="titleCodigoAnestesia" value="#{messages.LABEL_CODIGO}"/> 
                  </f:facet>  
                  <h:outputText id="textCodigoAnestesia" value="#{_item.mbcTipoAnestesias.seq}"/> 
                </p:column>  
                <p:column id="columnDescricaoAnestesia"> 
                  <f:facet name="header"> 
                    <h:outputText id="titleAnestesiaDescricao" value="#{messages.LABEL_DESCRICAO}"/> 
                  </f:facet>  
                  <h:outputText id="textAnestesiaDescricao" value="#{_item.mbcTipoAnestesias.descricao}"/> 
                </p:column> 
              </mec:serverDataTable> 
              </h:form>
            </div> 
          </p:tab>  
          <p:tab title="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_EXTRATO_CIRURGIA}" 
          name="tab3" id="tab3" action="#{detalhaRegistroCirurgiaController.setAbaAtiva(2)}" 
          rendered="#{mf:hasPermission(securityController,'detalheRegistroDeCirurgiasAbaExtrato,visualizar')}"> 
            <div style="width: 100%; height:186px; overflow:auto;"> 
	            <ui:include src="/pages/blococirurgico/extratoCirurgia.xhtml"/> 
            </div> 
          </p:tab>  
          <p:tab title="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_PROFISSIONAIS}" name="tab4" id="tab4" action="#{detalhaRegistroCirurgiaController.setAbaAtiva(3)}" rendered="#{mf:hasPermission(securityController,'detalheRegistroDeCirurgiasAbaProfissionais,visualizar')}"> 
            <div style="width: 100%; height:186px; overflow:auto;"> 
              <ui:include src="/pages/blococirurgico/profissionaisCirurgiaList.xhtml"/> 
            </div> 
          </p:tab>  
          <p:tab title="#{messages.LABEL_DETALHAR_REGISTRO_CIRURGIA_SOL_HEMOTERAPICA}" name="tab5" id="tab5" action="#{detalhaRegistroCirurgiaController.setAbaAtiva(4)}" rendered="#{mf:hasPermission(securityController,'detalheRegistroDeCirurgiasAbaSolHemoterapica,visualizar')}"> 
            <div style="width: 100%; height:186px; overflow:auto;"> 
              <ui:include src="/pages/blococirurgico/solicitacaoHemoterapicaList.xhtml"/> 
            </div> 
          </p:tab> 
        </p:tabView> 
      </p:outputPanel> 
    </ui:define> 
  </ui:composition> 
</html>
