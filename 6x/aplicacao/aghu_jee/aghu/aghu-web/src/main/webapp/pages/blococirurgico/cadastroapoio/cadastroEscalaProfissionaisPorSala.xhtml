<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:aghu="http://xmlns.jcp.org/jsf/component" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:mf="http://www.mec.gov.br/taglib">  
  <ui:composition xmlns:fn="http://java.sun.com/jsp/jstl/functions" template="/WEB-INF/templates/form_template.xhtml">  
    <ui:define name="head"> 
      <title>#{messages.TITLE_ESCALA_PROFISSIONAIS_SALA}</title>  
      <style>div.div-alerta { width: 99%; }</style> 
    </ui:define>  
    <ui:define name="body"> 
      <mec:pageConfig controller="#{cadastroEscalaProfissionaisPorSalaController}"/>  
      <h:form prependId="false" id="formPesquisa"> 
        <aghu:panelGeral legend="#{messages.TITLE_PESQUISA_PROFISSIONAIS_SALA}"> 
          <aghu:linha> 
            <mec:suggestionBox id="suggestionUnidadesFuncionais" required="true" styleClassField="frm_obrigatorio" label="#{messages.LABEL_UNIDADE_CIRURGICA}" title="#{messages.TITLE_UNIDADE_CIRURGICA_SALA}" descricaoInput="seq" size="22" maxlength="20" width="400" disabled="false" descricaoLabel="descricao" suggestionAction="pesquisarUnidadesFuncionais" controller="#{cadastroEscalaProfissionaisPorSalaController}" value="#{cadastroEscalaProfissionaisPorSalaController.unidadeFuncional}"> 
              <p:column> 
                <f:facet name="header"> 
                  <h:outputText value="#{messages.LABEL_CODIGO}"/> 
                </f:facet>  
                <h:outputText value="#{item.seq}"/> 
              </p:column>  
              <p:column> 
                <f:facet name="header"> 
                  <h:outputText value="#{messages.LABEL_DESCRICAO}"/> 
                </f:facet>  
                <h:outputText value="#{item.descricao}"/> 
              </p:column> 
            </mec:suggestionBox> 
          </aghu:linha>  
          <aghu:linha> 
            <mec:suggestionBox id="suggestionSalaCirurgica" styleClassField="frm_obrigatorio" label="#{messages.LABEL_TROCA_AGENDA_SALA}" title="#{messages.TITLE_SALA_CIRURGICA_ESCALA_PROFISSIONAIS}" descricaoInput="id.seqp" size="22" maxlength="20" width="500" disabled="false" descricaoLabel="nome" suggestionAction="pesquisarSalasCirurgicas" controller="#{cadastroEscalaProfissionaisPorSalaController}" value="#{cadastroEscalaProfissionaisPorSalaController.salaCirurgica}"> 
              <p:column> 
                <f:facet name="header"> 
                  <h:outputText value="#{messages.LABEL_CODIGO}"/> 
                </f:facet>  
                <h:outputText value="#{item.id.seqp}"/> 
              </p:column>  
              <p:column> 
                <f:facet name="header"> 
                  <h:outputText value="#{messages.LABEL_NOME_SALA_CIRURGICA}"/> 
                </f:facet>  
                <h:outputText value="#{item.nome}"/> 
              </p:column> 
            </mec:suggestionBox>  
            <mec:selectOneMenu id="diaSemana" label="#{messages.LABEL_DIA_DA_SEMANA}" title="#{messages.TITLE_DIA_DA_SEMANA}" noSelectionLabel="#{mf:getDefaultValue(noSelectionLabel,'Selecione')}" semSelecione="false" ajaxValidation="false" value="#{cadastroEscalaProfissionaisPorSalaController.diaSemana}" enum="DominioDiaSemana"/>  
            <mec:suggestionBox id="suggestionTurno" styleClassField="frm_obrigatorio" 
            		label="#{messages.LABEL_TURNO_TURNO_UNIDADE_CIRURGICA}" 
            		title="#{messages.TITLE_TURNO_ESCALA_PROFISSIONAIS}" descricaoInput="turno" 
            		size="20" maxlength="20" width="200" disabled="false" descricaoLabel="descricao" 
            		suggestionAction="pesquisarTurnos" controller="#{cadastroEscalaProfissionaisPorSalaController}" 
            		value="#{cadastroEscalaProfissionaisPorSalaController.turnos}"> 
              <p:column> 
                <f:facet name="header"> 
                  <h:outputText value="#{messages.LABEL_TURNO_TURNO_UNIDADE_CIRURGICA}"/> 
                </f:facet>  
                <h:outputText value="#{item.turno}"/> 
              </p:column>  
              <p:column> 
                <f:facet name="header"> 
                  <h:outputText value="#{messages.LABEL_DESCRICAO}"/> 
                </f:facet>  
                <h:outputText value="#{item.descricao}"/> 
              </p:column> 
            </mec:suggestionBox> 
          </aghu:linha>  
          <aghu:linha> 
            <mec:selectOneMenu enum="DominioFuncaoProfissional" label="#{messages.LABEL_FUNCAO}" title="#{messages.TITLE_LABEL_FUNCAO}" id="funcao" value="#{cadastroEscalaProfissionaisPorSalaController.funcaoProfissional}"/>  
            <mec:suggestionBox id="suggestionProfissionais" styleClassField="frm_obrigatorio" label="#{messages.LABEL_PROFISSIONAL}" 
            title="#{messages.TITLE_LABEL_PROFISSIONAL}" descricaoInput="matriculaVinculo" width="500" maxlength="15" size="20" descricaoLabel="pessoaFisica.nome"
             suggestionAction="pesquisarProfissionais" controller="#{cadastroEscalaProfissionaisPorSalaController}" 
             value="#{cadastroEscalaProfissionaisPorSalaController.profissionalServ}"> 
              <p:column> 
                <f:facet name="header"> 
                  <h:outputText value="#{messages.LABEL_VINCULO}"/> 
                </f:facet>  
                <h:outputText value="#{item.id.vinCodigo}"/> 
              </p:column>  
              <p:column> 
                <f:facet name="header"> 
                  <h:outputText value="#{messages.LABEL_MATRICULA}"/> 
                </f:facet>  
                <h:outputText value="#{item.id.matricula}"/> 
              </p:column>  
              <p:column> 
                <f:facet name="header"> 
                  <h:outputText value="#{messages.LABEL_NOME}"/> 
                </f:facet>  
                <h:outputText value="#{item.pessoaFisica.nome}"/> 
              </p:column> 
            </mec:suggestionBox> 
          </aghu:linha> 
        </aghu:panelGeral>  
        <aghu:acao> 
          <mec:commandButton value="#{messages.LABEL_PESQUISAR}" id="bt_pesquisar" action="#{cadastroEscalaProfissionaisPorSalaController.pesquisar}" profile="search"/>  
          <mec:commandButton value="#{messages.LABEL_LIMPAR}" id="bt_limpar" action="#{cadastroEscalaProfissionaisPorSalaController.limparPesquisa()}" profile="clear"/> 
        </aghu:acao> 
      </h:form>  
        <p:outputPanel rendered="#{cadastroEscalaProfissionaisPorSalaController.getDataModel().getPesquisaAtiva()}" id="regionTabelaProfissionaisSala" layout="inline" styleClass="aghu-panel-geral"> 
          <aghu:panelGeral legend="#{messages.TITLE_ESCALA_PROFISSIONAIS_SALA}"> 
      		<h:form prependId="false" id="formListaProfissionaisSala"> 
	            <aghu:linha> 
	              <mec:suggestionBox id="suggestionSalaDiaSemanaTurno" required="true" styleClassField="frm_obrigatorio" label="#{messages.LABEL_SALA_DIA_SEMANA_TURNO}" title="#{messages.TITLE_SALA_DIA_SEMANA_TURNO}" descricaoInput="salaDescricaoTurno" width="300" maxlength="15" size="20" descricaoLabel="salaDescricaoTurno" suggestionAction="pesquisarSalaDiaSemanaTurno" rendered="#{mf:hasPermission(securityController,'executarEscProfPorSala,executar')}" controller="#{cadastroEscalaProfissionaisPorSalaController}" value="#{cadastroEscalaProfissionaisPorSalaController.caracteristicaSalaCirg}"> 
	                <p:column> 
	                  <f:facet name="header"> 
	                    <h:outputText value="#{messages.LABEL_SALA}"/> 
	                  </f:facet>  
	                  <h:outputText value="#{item.mbcSalaCirurgica.id.seqp}"/> 
	                </p:column>  
	                <p:column> 
	                  <f:facet name="header"> 
	                    <h:outputText value="#{messages.LABEL_DIA_DA_SEMANA}"/> 
	                  </f:facet>  
	                  <h:outputText value="#{item.diaSemana.descricao}"/> 
	                </p:column>  
	                <p:column> 
	                  <f:facet name="header"> 
	                    <h:outputText value="#{messages.LABEL_TURNO}"/> 
	                  </f:facet>  
	                  <h:outputText value="#{item.mbcTurnos.descricao}"/> 
	                </p:column> 
	              </mec:suggestionBox>  
	              <mec:suggestionBox id="suggestionFuncaoProfissional" required="true" styleClassField="frm_obrigatorio" label="#{messages.LABEL_PROFISSIONAIS_SALA_FUNCAO_PROFISSIONAL}" title="#{messages.TITLE_PROFISSIONAIS_SALA_FUNCAO_PROFISSIONAL}" descricaoInput="funcaoMatriculaNome" width="700" maxlength="15" size="20" descricaoLabel="funcaoMatriculaNome" suggestionAction="pesquisarFuncaoProfissional" rendered="#{mf:hasPermission(securityController,'executarEscProfPorSala,executar')}" controller="#{cadastroEscalaProfissionaisPorSalaController}" value="#{cadastroEscalaProfissionaisPorSalaController.profAtuaUnidCirgs}"> 
	                <p:column> 
	                  <f:facet name="header"> 
	                    <h:outputText value="#{messages.LABEL_CODIGO}"/> 
	                  </f:facet>  
	                  <h:outputText value="#{item.indFuncaoProf.codigo}"/> 
	                </p:column>  
	                <p:column> 
	                  <f:facet name="header"> 
	                    <h:outputText value="#{messages.LABEL_FUNCAO}"/> 
	                  </f:facet>  
	                  <h:outputText value="#{item.indFuncaoProf.descricao}"/> 
	                </p:column>  
	                <p:column> 
	                  <f:facet name="header"> 
	                    <h:outputText value="#{messages.LABEL_MATRICULA}"/> 
	                  </f:facet>  
	                  <h:outputText value="#{item.id.serMatricula}"/> 
	                </p:column>  
	                <p:column> 
	                  <f:facet name="header"> 
	                    <h:outputText value="#{messages.LABEL_NOME}"/> 
	                  </f:facet>  
	                  <h:outputText value="#{item.rapServidores.pessoaFisica.nome}"/> 
	                </p:column> 
	              </mec:suggestionBox>  
	              <aghu:acao newLine="false"> 
	                <mec:commandButton id="bt_adicionar" value="#{messages.LABEL_ADICIONAR}" action="#{cadastroEscalaProfissionaisPorSalaController.validarCampos}" rendered="#{mf:hasPermission(securityController,'executarEscProfPorSala,executar') and !cadastroEscalaProfissionaisPorSalaController.editarRegistro}" profile="add" styleClass="bt_verde "/>  
	                <mec:commandButton id="bt_gravar" value="#{messages.LABEL_ALTERAR}" action="#{cadastroEscalaProfissionaisPorSalaController.validarCampos}" reRender="formListaProfissionaisSala" rendered="#{mf:hasPermission(securityController,'executarEscProfPorSala,executar') and cadastroEscalaProfissionaisPorSalaController.editarRegistro}" profile="ok"/>  
	                <mec:commandButton id="bt_cancelar_edicao" value="#{messages.LABEL_CANCELAR_EDICAO}" 
	                action="#{cadastroEscalaProfissionaisPorSalaController.cancelarEditacao}" reRender="formListaProfissionaisSala" 
	                rendered="#{mf:hasPermission(securityController,'executarEscProfPorSala,executar') and cadastroEscalaProfissionaisPorSalaController.editarRegistro}"
					immediate="true" profile="cancel"/> 
	              </aghu:acao> 
	            </aghu:linha>
            </h:form>
            <h:form prependId="false" id="formListaProfissionaisSalaDataTable"> 
	            <mec:serverDataTable id="tableResultados" dataModel="dataModel" controller="#{cadastroEscalaProfissionaisPorSalaController}"> 
	              <c:set var="_profissionaisSala" value="#{item}"/>  
	              <p:column width="50" id="columnAcao" exportable="false"> 
	                <f:facet name="header"> 
	                  <h:outputText value="#{messages.LABEL_ACAO}"/> 
	                </f:facet>  
	                <mec:commandLink id="editarItem" action="#{cadastroEscalaProfissionaisPorSalaController.editar(_profissionaisSala)}" block="true" title="#{messages.LABEL_EDITAR}" rendered="#{mf:hasPermission(securityController,'executarEscProfPorSala,executar') and !cadastroEscalaProfissionaisPorSalaController.editarRegistro}" profile="edit" ajax="true" render="formListaProfissionaisSala, tableResultados" process="@this"/>  
	                <mec:commandLink id="excluirItem" action="#{cadastroEscalaProfissionaisPorSalaController.excluir}" title="#{messages.LABEL_EXCLUIR}" rendered="#{mf:hasPermission(securityController,'executarEscProfPorSala,executar') and !cadastroEscalaProfissionaisPorSalaController.editarRegistro}" profile="delete" process="@this"> 
	                  <f:setPropertyActionListener value="#{_profissionaisSala}" target="#{cadastroEscalaProfissionaisPorSalaController.escalaProfUnidCirg}" for="command"/> 
	                </mec:commandLink> 
	              </p:column>  
	              <p:column width="50" id="columnSala" > 
	                <f:facet name="header"> 
	                  <h:outputText value="#{messages.LABEL_SALA}"/> 
	                </f:facet>  
	                <h:outputText value="#{_profissionaisSala.mbcCaracteristicaSalaCirg.mbcSalaCirurgica.id.seqp}"/> 
	              </p:column>  
	              <p:column width="100" id="columnDiaSemana" > 
	                <f:facet name="header"> 
	                  <h:outputText value="#{messages.LABEL_DIA_DA_SEMANA}"/> 
	                </f:facet>  
	                <h:outputText value="#{_profissionaisSala.mbcCaracteristicaSalaCirg.diaSemana.descricaoCompleta}"/> 
	              </p:column>  
	              <p:column width="70" id="columnTurno" > 
	                <f:facet name="header"> 
	                  <h:outputText value="#{messages.LABEL_TURNO}"/> 
	                </f:facet>  
	                <h:outputText value="#{_profissionaisSala.mbcCaracteristicaSalaCirg.mbcTurnos.descricao}"/> 
	              </p:column>  
	              <p:column width="150" id="columnFuncao" > 
	                <f:facet name="header"> 
	                  <h:outputText value="#{messages.LABEL_FUNCAO}"/> 
	                </f:facet>  
	                <h:outputText value="#{_profissionaisSala.mbcProfAtuaUnidCirgs.id.indFuncaoProf.descricao}"/> 
	              </p:column>  
	              <p:column id="columnProfissional" > 
	                <f:facet name="header"> 
	                  <h:outputText value="#{messages.LABEL_PROFISSIONAL}"/> 
	                </f:facet>  
	                <h:outputText value="#{_profissionaisSala.mbcProfAtuaUnidCirgs.id.serMatricula}"/>  
	                <h:outputText value=" - "/>  
	                <h:outputText value="#{_profissionaisSala.mbcProfAtuaUnidCirgs.rapServidores.pessoaFisica.nome}"/> 
	              </p:column> 
	            </mec:serverDataTable>
			</h:form>
          </aghu:panelGeral> 
        </p:outputPanel> 
    </ui:define> 
  </ui:composition> 
</html>