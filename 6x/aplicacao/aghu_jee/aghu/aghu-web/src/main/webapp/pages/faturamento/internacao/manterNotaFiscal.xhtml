<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:aghu="http://xmlns.jcp.org/jsf/component" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:mf="http://www.mec.gov.br/taglib">  
  <ui:composition template="/WEB-INF/templates/form_template.xhtml"> 
    <ui:define name="head"> 
      <title>#{messages.TITLE_MANTER_NOTA_FISCAL} :: AGHU - MEC</title> 
    </ui:define>  
    <ui:define name="metadata"> 
      <f:metadata> 
        <f:viewAction action="#{manterNotaFiscalController.inicio}" onPostback="false"/> 
      </f:metadata> 
    </ui:define>  
    <ui:define name="body"> 
      <ui:fragment> 
        <script type="text/javascript" xml:space="preserve">		
				function escondeDiv(id){
					var divElementStyle = document.getElementById(id).style;
					if(divElementStyle){
						if(divElementStyle.display == ""){
					       divElementStyle.display = "none";               
						}
					}
				}
				</script> 
      </ui:fragment>  
      <mec:pageConfig controller="#{manterNotaFiscalController}" ignoreEnter="true"/>  
      <h:form prependId="false" id="formDados"> 
        <aghu:panelGeral style="margin-left: 4px !important; margin-right: 4px !important;" legend="#{messages.TITLE_MANTER_NOTA_FISCAL}"> 
          <aghu:linha> 
            <mec:inputText label="#{messages.LABEL_CONTA_HOSPITALAR_MANTER_NOTA_FISCAL}" value="#{manterNotaFiscalController.itemContaHospitalar.id.cthSeq}" size="9" maxlength="8" readonly="true" id="contaHospitalar"/>  
            <p:outputPanel layout="block"> 
              <p:tooltip  value="#{manterNotaFiscalController.itemContaHospitalar.procedimentoHospitalarInterno.seq} - #{manterNotaFiscalController.itemContaHospitalar.procedimentoHospitalarInterno.descricao}" direction="bottom-right" styleClass="tooltip" layout="block"></p:tooltip>  
              <mec:inputText label="#{messages.LABEL_ITEM_CONTA_HOSPITALAR_MANTER_NOTA_FISCAL}" value="#{manterNotaFiscalController.itemContaHospitalar.procedimentoHospitalarInterno.seq} - #{manterNotaFiscalController.itemContaHospitalar.procedimentoHospitalarInterno.descricao}" size="80" maxlength="206" style="text-transform:uppercase" readonly="true" id="itemContaHospitalar"/> 
            </p:outputPanel> 
          </aghu:linha>  
          <aghu:linha> 
            <mec:inputNumero label="#{messages.LABEL_NOTA_FISCAL_MANTER_NOTA_FISCAL}" title="#{messages.TITLE_NOTA_FISCAL_MANTER_NOTA_FISCAL}" value="#{manterNotaFiscalController.item.notaFiscal}" size="8" maxlength="7" readonly="true" required="true" id="notaFiscal"/>  
            <p:outputPanel id="btnAdicionarPanel" layout="inline"> 
              <mec:suggestionBox label="#{messages.LABEL_FORNECEDOR_MANTER_NOTA_FISCAL}" title="#{messages.TITLE_FORNECEDOR_MANTER_NOTA_FISCAL}" required="true" readonly="true" descricaoInput="cpfCnpj" descricaoLabel="razaoSocial" suggestionAction="listarFornecedor" width="400" id="fornecedor" controller="#{manterNotaFiscalController}" value="#{manterNotaFiscalController.item.sceRmrPaciente.scoFornecedor}" render="btnAdicionarPanel"> 
                <p:column> 
                  <f:facet name="header"> 
                    <b>#{messages.LABEL_CODIGO}</b> 
                  </f:facet> #{item.cpfCnpj}
                </p:column>  
                <p:column> 
                  <f:facet name="header"> 
                    <b>#{messages.LABEL_DESCRICAO}</b> 
                  </f:facet> #{item.razaoSocial}
                </p:column> 
              </mec:suggestionBox>  
              <p:outputPanel rendered="#{not manterNotaFiscalController.mostrarModal}" layout="inline"> 
                <script language="javascript" xml:space="preserve">PF('modalForcecedorWG').hide();;</script> 
              </p:outputPanel> 
            </p:outputPanel> 
          </aghu:linha>  
          <aghu:linha> 
            <mec:inputText label="#{messages.LABEL_SERIE_MANTER_NOTA_FISCAL}" title="#{messages.TITLE_SERIE_MANTER_NOTA_FISCAL}" value="#{manterNotaFiscalController.item.serie}" size="21" maxlength="20" required="false"  readonly="true" style="text-transform:uppercase" id="serie"/>  
            <mec:inputText label="#{messages.LABEL_LOTE_MANTER_NOTA_FISCAL}" title="#{messages.TITLE_LOTE_MANTER_NOTA_FISCAL}" value="#{manterNotaFiscalController.item.lote}" size="21" maxlength="20" required="false"  readonly="true" style="text-transform:uppercase" id="lote"/>  
            <mec:inputNumero label="#{messages.LABEL_QUANTIDADE_MANTER_NOTA_FISCAL}" title="#{messages.TITLE_QUANTIDADE_MANTER_NOTA_FISCAL}" value="#{manterNotaFiscalController.item.quantidade}" size="8" maxlength="7"  readonly="true" required="true" id="quantidade"/>  
            <mec:inputText label="#{messages.LABEL_REGISTRO_ANVISA_MANTER_NOTA_FISCAL}" title="#{messages.TITLE_REGISTRO_ANVISA_MANTER_NOTA_FISCAL}" value="#{manterNotaFiscalController.item.registroAnvisa}" size="21" readonly="true" maxlength="20" required="true" style="text-transform:uppercase" id="registroAnvisa"/> 
          </aghu:linha>  
          <aghu:linha> 
            <p:outputPanel id="btnAdicionarPanelAnvisa" layout="inline"> 
              <mec:suggestionBox label="#{messages.LABEL_CNPJ_CPF_REGISTRO_ANVISA_MANTER_NOTA_FISCAL}" title="#{messages.TITLE_CNPJ_CPF_REGISTRO_ANVISA_MANTER_NOTA_FISCAL}" required="true" readonly="true" descricaoInput="cpfCnpj" descricaoLabel="razaoSocial" suggestionAction="listarFornecedor" width="400" id="cnpjRegistroAnvisa" controller="#{manterNotaFiscalController}" value="#{manterNotaFiscalController.scoFornecedorAnvisa}" render="btnAdicionarPanelAnvisa"> 
                <p:column> 
                  <f:facet name="header"> 
                    <b>#{messages.LABEL_CODIGO}</b> 
                  </f:facet> #{item.cpfCnpj}
                </p:column>  
                <p:column> 
                  <f:facet name="header"> 
                    <b>#{messages.LABEL_DESCRICAO}</b> 
                  </f:facet> #{item.razaoSocial}
                </p:column> 
              </mec:suggestionBox>  
               <p:outputPanel rendered="#{not manterNotaFiscalController.mostrarModal}" layout="inline"> 
                <script language="javascript" xml:space="preserve">PF('modalForcecedorAnvisaWG').hide();;</script> 
              </p:outputPanel> 
            </p:outputPanel> 
          </aghu:linha> 
        </aghu:panelGeral>  
        <aghu:acao> 
          <mec:commandButton id="bt_gravar" value="#{messages.LABEL_GRAVAR}" action="#{manterNotaFiscalController.gravar}" profile="ok"> 
            <f:setPropertyActionListener target="#{lancarItensContaHospitalarPaginatorController.cthSeq}" value="#{manterNotaFiscalController.cthSeq}" for="command"/>  
            <f:setPropertyActionListener target="#{lancarItensContaHospitalarPaginatorController.exibirListagem}" value="true" for="command"/> 
          </mec:commandButton>  
          <mec:commandButton id="bt_limpar" value="#{messages.LABEL_LIMPAR}" immediate="true" action="#{manterNotaFiscalController.limpar}" rendered="#{manterNotaFiscalController.item.id.numero eq null}" profile="clear" ajax="true" process="@this"/>  
          <mec:commandButton id="bt_cancelar" value="#{messages.LABEL_CANCELAR}" immediate="true" action="#{manterNotaFiscalController.cancelar}" profile="cancel" ajax="true" process="@this"> 
            <f:setPropertyActionListener target="#{lancarItensContaHospitalarPaginatorController.cthSeq}" value="#{manterNotaFiscalController.cthSeq}" for="command"/>  
            <f:setPropertyActionListener target="#{lancarItensContaHospitalarPaginatorController.exibirListagem}" value="true" for="command"/> 
          </mec:commandButton> 
        </aghu:acao> 
      </h:form>  
      <p:outputPanel id="panelFornecedor" layout="inline"> 
        <p:dialog id="modalForcecedor" width="650" height="350" modal="true" resizable="false" widgetVar="modalForcecedorWG"> 
          <h:form prependId="false" id="formFornecedor"> 
            <p:outputPanel id="panelFornecedorInterno" layout="inline" styleClass="aghu-panel-geral"> 
              <aghu:panelGeral style="margin-left: 4px !important; margin-right: 4px !important;" legend="#{messages.TITLE_MANTER_FORNECEDOR}"> 
                <aghu:linha> 
                  <mec:inputNumero label="#{messages.LABEL_NUMERO_MANTER_FORNECEDOR}" value="#{manterNotaFiscalController.item.sceRmrPaciente.scoFornecedor.numero}" size="8" maxlength="7" readonly="true" id="contaHospitalarFornecedor"/>  
                  <mec:inputTextCNPJ value="#{manterNotaFiscalController.item.sceRmrPaciente.scoFornecedor.cgc}" label="#{messages.LABEL_CNPJ_MANTER_FORNECEDOR}" title="#{messages.TITLE_CNPJ_MANTER_FORNECEDOR}" id="cnpj"/>  
                  <mec:inputTextCPF value="#{manterNotaFiscalController.item.sceRmrPaciente.scoFornecedor.cpf}" label="#{messages.LABEL_CPF_MANTER_FORNECEDOR}" title="#{messages.TITLE_CPF_MANTER_FORNECEDOR}" id="cpf"/>  
                  <mec:selectBooleanCheckbox label="#{messages.LABEL_ATIVO_MANTER_FORNECEDOR}" title="#{messages.TITLE_ATIVO_MANTER_FORNECEDOR}" value="#{manterNotaFiscalController.indSituacao}" id="ativo"/>  
                  <mec:selectBooleanCheckbox label="#{messages.LABEL_NACIONAL_MANTER_FORNECEDOR}" title="#{messages.TITLE_NACIONAL_MANTER_FORNECEDOR}" value="#{manterNotaFiscalController.indNacional}" id="nacional"/> 
                </aghu:linha>  
                <aghu:linha> 
                  <mec:inputText label="#{messages.LABEL_RAZAO_SOCIAL_MANTER_FORNECEDOR}" title="#{messages.TITLE_RAZAO_SOCIAL_MANTER_FORNECEDOR}" value="#{manterNotaFiscalController.item.sceRmrPaciente.scoFornecedor.razaoSocial}" size="61" maxlength="60" required="true" caixaAlta="true" style="text-transform:uppercase" id="razaoSocial"/> 
                </aghu:linha>  
                <aghu:linha> 
                  <mec:inputText label="#{messages.LABEL_NOME_FANTASIA_MANTER_FORNECEDOR}" title="#{messages.TITLE_NOME_FANTASIA_MANTER_FORNECEDOR}" value="#{manterNotaFiscalController.item.sceRmrPaciente.scoFornecedor.nomeFantasia}" size="61" maxlength="60" required="true" caixaAlta="true" style="text-transform:uppercase" id="nomeFantasia"/> 
                </aghu:linha>  
                <aghu:linha> 
                  <mec:inputTextData label="#{messages.LABEL_DATA_CADASTRAMENTO_MANTER_FORNECEDOR}" value="#{manterNotaFiscalController.item.sceRmrPaciente.scoFornecedor.dtCadastramento}" readonly="true" id="dataCadastramento" tipo="datahora"/>  
                  <mec:inputTextData label="#{messages.LABEL_DATA_ALTERACAO_MANTER_FORNECEDOR}" value="#{manterNotaFiscalController.item.sceRmrPaciente.scoFornecedor.dtAlteracao}" readonly="true" id="dataAlteracao" tipo="datahora"/> 
                </aghu:linha> 
              </aghu:panelGeral> 
            </p:outputPanel>  
            <aghu:acao> 
              <mec:commandButton id="bt_gravar_fornecedor" value="#{messages.LABEL_GRAVAR}" process="contaHospitalarFornecedor,cnpj,cpf,ativo,nacional,razaoSocial,nomeFantasia,dataCadastramento,dataAlteracao" action="#{manterNotaFiscalController.gravarFornecedor}" profile="ok" ajax="true" render="btnAdicionarPanel,panelFornecedorInterno"/>  
              <mec:commandButton id="bt_cancelar_fornecedor" value="#{messages.LABEL_CANCELAR}" immediate="true" oncomplete="PF('modalForcecedorWG').hide();" action="#{manterNotaFiscalController.cancelarFornecedor}" profile="cancel" ajax="true" render="btnAdicionarPanel"/> 
            </aghu:acao> 
          </h:form> 
        </p:dialog> 
      </p:outputPanel>  
      <p:outputPanel id="panelFornecedorAnvisa" layout="inline"> 
        <p:dialog id="modalForcecedorAnvisa" width="650" height="350" modal="true" resizable="false" widgetVar="modalForcecedorAnvisaWG"> 
          <h:form prependId="false" id="formFornecedorAnvisaForm"> 
            <p:outputPanel id="panelAnvisa" layout="inline" styleClass="aghu-panel-geral"> 
              <aghu:panelGeral style="margin-left: 4px !important; margin-right: 4px !important;" legend="#{messages.TITLE_MANTER_FORNECEDOR}"> 
                <aghu:linha> 
                  <mec:inputNumero label="#{messages.LABEL_NUMERO_MANTER_FORNECEDOR}" value="#{manterNotaFiscalController.scoFornecedorAnvisa.numero}" size="8" maxlength="7" readonly="true" id="contaHospitalarAnvisa"/>  
                  <mec:inputTextCNPJ value="#{manterNotaFiscalController.scoFornecedorAnvisa.cgc}" label="#{messages.LABEL_CNPJ_MANTER_FORNECEDOR}" title="#{messages.TITLE_CNPJ_MANTER_FORNECEDOR}" id="cnpjAnvisa"/>  
                  <mec:inputTextCPF value="#{manterNotaFiscalController.scoFornecedorAnvisa.cpf}" label="#{messages.LABEL_CPF_MANTER_FORNECEDOR}" title="#{messages.TITLE_CPF_MANTER_FORNECEDOR}" id="cpfAnvisa"/>  
                  <mec:selectBooleanCheckbox label="#{messages.LABEL_ATIVO_MANTER_FORNECEDOR}" title="#{messages.TITLE_ATIVO_MANTER_FORNECEDOR}" value="#{manterNotaFiscalController.indSituacao}" id="ativoAnvisa"/>  
                  <mec:selectBooleanCheckbox label="#{messages.LABEL_NACIONAL_MANTER_FORNECEDOR}" title="#{messages.TITLE_NACIONAL_MANTER_FORNECEDOR}" value="#{manterNotaFiscalController.indNacional}" id="nacionalAnvisa"/> 
                </aghu:linha>  
                <aghu:linha> 
                  <mec:inputText label="#{messages.LABEL_RAZAO_SOCIAL_MANTER_FORNECEDOR}" title="#{messages.TITLE_RAZAO_SOCIAL_MANTER_FORNECEDOR}" value="#{manterNotaFiscalController.scoFornecedorAnvisa.razaoSocial}" size="61" maxlength="60" required="true" caixaAlta="true" style="text-transform:uppercase" id="razaoSocialAnvisa"/> 
                </aghu:linha>  
                <aghu:linha> 
                  <mec:inputText label="#{messages.LABEL_NOME_FANTASIA_MANTER_FORNECEDOR}" title="#{messages.TITLE_NOME_FANTASIA_MANTER_FORNECEDOR}" value="#{manterNotaFiscalController.scoFornecedorAnvisa.nomeFantasia}" size="61" maxlength="60" required="true" caixaAlta="true" style="text-transform:uppercase" id="nomeFantasiaAnvisa"/> 
                </aghu:linha>  
                <aghu:linha> 
                  <mec:inputTextData label="#{messages.LABEL_DATA_CADASTRAMENTO_MANTER_FORNECEDOR}" value="#{manterNotaFiscalController.scoFornecedorAnvisa.dtCadastramento}" readonly="true" id="dataCadastramentoAnvisa" tipo="datahora"/>  
                  <mec:inputTextData label="#{messages.LABEL_DATA_ALTERACAO_MANTER_FORNECEDOR}" value="#{manterNotaFiscalController.scoFornecedorAnvisa.dtAlteracao}" readonly="true" id="dataAlteracaoAnvisa" tipo="datahora"/> 
                </aghu:linha> 
              </aghu:panelGeral> 
            </p:outputPanel>  
            <aghu:acao> 
              <mec:commandButton id="bt_gravar_fornecedorAnvisa" value="#{messages.LABEL_GRAVAR}" process="contaHospitalarAnvisa,cnpjAnvisa,cpfAnvisa,ativoAnvisa,nacionalAnvisa,razaoSocialAnvisa,nomeFantasiaAnvisa,dataCadastramentoAnvisa,dataAlteracaoAnvisa" action="#{manterNotaFiscalController.gravarFornecedorAnvisa}" status="commonstatus" profile="ok" ajax="true" render="btnAdicionarPanelAnvisa,panelAnvisa"/>  
              <mec:commandButton id="bt_cancelar_fornecedorAnvisa" value="#{messages.LABEL_CANCELAR}" immediate="true" oncomplete="PF('modalForcecedorAnvisaWG').hide();" action="#{manterNotaFiscalController.cancelarFornecedorAnvisa}" profile="cancel" ajax="true" render="btnAdicionarPanelAnvisa"/> 
            </aghu:acao> 
          </h:form> 
        </p:dialog> 
      </p:outputPanel> 
    </ui:define> 
  </ui:composition> 
</html>
