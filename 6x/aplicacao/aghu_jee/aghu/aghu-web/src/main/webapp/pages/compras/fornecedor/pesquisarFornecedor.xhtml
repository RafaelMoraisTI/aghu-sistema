<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:aghu="http://xmlns.jcp.org/jsf/component" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:mf="http://www.mec.gov.br/taglib">  
  <ui:composition template="/WEB-INF/templates/form_template.xhtml"> 
    <ui:define name="head"> 
      <title>#{messages.TITLE_PESQUISAR_CADASTRO_FORNECEDOR}</title>  
      <style xml:space="preserve">
			.checked {
				background-image: url('../../images/icons/checked.png') !important;
				background-repeat: no-repeat;
				background-position: center;
			}
		</style> 
    </ui:define>  
    <ui:define name="metadata"> 
      <f:metadata> 
        <f:viewAction action="#{manterCadastroFornecedorPaginatorController.inicio}"/> 
      </f:metadata> 
    </ui:define>  
    <ui:define name="body"> 
      <mec:pageConfig controller="#{manterCadastroFornecedorPaginatorController}"/>  
      <h:form id="pesquisaFornecedorForm" prependId="false"> 
        <aghu:panelGeral legend="#{messages.TITLE_PESQUISAR_CADASTRO_FORNECEDOR}">
				<aghu:linha>
					<p:panelGrid columns="1">
						<h:panelGroup>
							<p:column style="border:none">
								<mec:inputNumero id="numero" label="#{messages.LABEL_NUMERO}"
									width="20" title="#{messages.TITLE_NUMERO_CADASTRO_FORNECEDOR}"
									value="#{manterCadastroFornecedorPaginatorController.fornecedor.numero}"
									readonly="false" maxlength="5" size="5" />
							</p:column>
							<p:column style="border:none">
								<mec:inputText id="cpfcnpj"
									label="#{messages.LABEL_CPF_CNPJ_CADASTRO_FORNECEDOR}"
									title="#{messages.TITLE_CPF_CNPJ_CADASTRO_FORNECEDOR}"
									value="#{manterCadastroFornecedorPaginatorController.cpfCnpj}"
									readonly="false" maxlength="14" styleClass="numerico" size="14" />
							</p:column>
							<p:column style="border:none" colspan="2">
								<mec:inputText id="razaoSocial"
									label="#{messages.LABEL_RAZAO_SOCIAL}"
									title="#{messages.TITLE_RAZAO_SOCIAL_CADASTRO_FORNECEDOR}"
									value="#{manterCadastroFornecedorPaginatorController.fornecedor.razaoSocial}"
									required="false" maxlength="60" size="50"
									style="text-transform:uppercase" />
							</p:column>
							<p:column style="border:none" colspan="2">
								<mec:inputText id="nomeFantasia"
									label="#{messages.LABEL_NOME_FANTASIA}"
									title="#{messages.TITLE_NOME_FANTASIA_CADASTRO_FORNECEDOR}"
									value="#{manterCadastroFornecedorPaginatorController.fornecedor.nomeFantasia}"
									required="false" maxlength="60" size="50"
									style="text-transform:uppercase" />
							</p:column>
						</h:panelGroup>
						<h:panelGroup>
							<p:column style="border:none">
								<mec:suggestionBox id="cidade"
									label="#{messages.LABEL_CIDADE_CADASTRO_FORNECEDOR}"
									title="#{messages.TITLE_CIDADE_CADASTRO_FORNECEDOR}"
									width="600" descricaoInput="codigo" descricaoLabel="nome"
									suggestionAction="listarCidades" size="6"
									controller="#{manterCadastroFornecedorPaginatorController}"
									value="#{manterCadastroFornecedorPaginatorController.fornecedor.cidade}">
									<p:column>
										<f:facet name="header">
											<b>#{messages.LABEL_CODIGO}</b>
										</f:facet> #{item.codigo}
                    				</p:column>
									<p:column>
										<p:spacer width="20" />
									</p:column>
									<p:column>
										<f:facet name="header">
											<b>#{messages.LABEL_NOME}</b>
										</f:facet> #{item.nome}
                    				</p:column>
									<p:column>
										<p:spacer width="20" />
									</p:column>
									<p:column>
										<f:facet name="header">
											<b>#{messages.LABEL_UF}</b>
										</f:facet> #{item.aipUf.nome}
                   					 </p:column>
								</mec:suggestionBox>
							</p:column>
							<p:column style="border:none">
								<mec:inputNumero id="numeroCRC"
									label="#{messages.LABEL_NUMERO_CRC}"
									title="#{messages.TITLE_NUMERO_CRC_CADASTRO_FORNECEDOR}"
									value="#{manterCadastroFornecedorPaginatorController.fornecedor.crc}"
									readonly="false" maxlength="5" size="5" />
							</p:column>
							<p:column style="border:none">
								<mec:inputNumero id="ddd" label="#{messages.LABEL_DDD}"
									title="#{messages.TITLE_DDD_CADASTRO_FORNECEDOR}"
									value="#{manterCadastroFornecedorPaginatorController.fornecedor.ddd}"
									readonly="false" maxlength="4" size="4" />
							</p:column>
							<p:column style="border:none">
								<mec:inputNumero id="fone" label="#{messages.LABEL_FONE}"
									title="#{messages.TITLE_FONE_CADASTRO_FORNECEDOR}"
									value="#{manterCadastroFornecedorPaginatorController.fornecedor.fone}"
									readonly="false" maxlength="10" size="10" />
							</p:column>
							<p:column style="border:none">
								<mec:inputText id="incEst"
									label="#{messages.LABEL_INSCRICAO_ESTADUAL}"
									title="#{messages.TITLE_INSCRICAO_ESTADUAL_CADASTRO_FORNECEDOR}"
									value="#{manterCadastroFornecedorPaginatorController.fornecedor.inscricaoEstadual}"
									readonly="false" maxlength="15" size="15"
									styleClass="mask_(?999999999999999)" />
							</p:column>
							<p:column style="border:none">
								<mec:selectOneMenu
									label="#{messages.LABEL_NACIONAL_CADASTRO_FORNECEDOR}"
									title="#{messages.TITLE_NACIONAL_CADASTRO_FORNECEDOR}"
									enum="DominioSimNao" id="nacional" noSelectionOption="false"
									value="#{manterCadastroFornecedorPaginatorController.nacional}" />
							</p:column>
						</h:panelGroup>
						<h:panelGroup>
							<p:column style="border:none">
								<mec:inputTextData id="dtValFGTS"
									label="#{messages.LABEL_DT_VAL_FGTS_CADASTRO_FORNECEDOR}"
									title="#{messages.TITLE_DT_VAL_FGTS_CADASTRO_FORNECEDOR}"
									value="#{manterCadastroFornecedorPaginatorController.fornecedor.dtValidadeFgts}"
									required="false" size="10" maxlength="10" tipo="data" />
							</p:column>
							<p:column style="border:none">
								<mec:inputTextData id="dtValCRC"
									label="#{messages.LABEL_DT_VAL_CRC_CADASTRO_FORNECEDOR}"
									title="#{messages.TITLE_DT_VAL_CRC_CADASTRO_FORNECEDOR}"
									value="#{manterCadastroFornecedorPaginatorController.fornecedor.dtValidadeCrc}"
									required="false" size="10" maxlength="10" tipo="data" />
							</p:column>
							<p:column style="border:none">
								<mec:inputTextData id="dtValRecFed"
									label="#{messages.LABEL_DT_VAL_REC_FED_CADASTRO_FORNECEDOR}"
									title="#{messages.TITLE_DT_VAL_REC_FED_CADASTRO_FORNECEDOR}"
									value="#{manterCadastroFornecedorPaginatorController.fornecedor.dtValidadeRecFed}"
									required="false" size="10" maxlength="10" tipo="data" />
							</p:column>
							<p:column style="border:none">
								<mec:inputTextData id="dtAlvVigSan"
									label="#{messages.LABEL_DT_ALV_VIG_SAN_CADASTRO_FORNECEDOR}"
									title="#{messages.TITLE_DT_VAL_VIG_SAN_CADASTRO_FORNECEDOR}"
									value="#{manterCadastroFornecedorPaginatorController.fornecedor.dtValidadeAvs}"
									required="false" size="10" maxlength="10" tipo="data" />
							</p:column>
							<p:column style="border:none">
								<mec:inputTextData id="dtValINSS"
									label="#{messages.LABEL_DT_VAL_INSS_CADASTRO_FORNECEDOR}"
									title="#{messages.TITLE_DT_VAL_INSS_CADASTRO_FORNECEDOR}"
									value="#{manterCadastroFornecedorPaginatorController.fornecedor.dtValidadeInss}"
									required="false" size="10" maxlength="10" tipo="data" />
							</p:column>
							<p:column style="border:none">
								<mec:selectOneMenu label="#{messages.LABEL_ATIVO}"
									title="#{messages.TITLE_ATIVO_CADASTRO_FORNECEDOR}"
									enum="DominioSimNao" id="ativo" noSelectionOption="false"
									value="#{manterCadastroFornecedorPaginatorController.frnAtivo}" />
							</p:column>
						</h:panelGroup>
						<h:panelGroup>
							<p:column style="border:none">
								<mec:inputTextData id="dtValBalPat"
									label="#{messages.LABEL_DT_VAL_BAL_PAT_CADASTRO_FORNECEDOR}"
									title="#{messages.TITLE_DT_VAL_BAL_PAT_CADASTRO_FORNECEDOR}"
									value="#{manterCadastroFornecedorPaginatorController.fornecedor.dtValidadeBal}"
									required="false" size="10" maxlength="10" tipo="data" />
							</p:column>
							<p:column style="border:none">
								<mec:inputTextData id="dtValCBP"
									label="#{messages.LABEL_DT_VAL_CBP_CADASTRO_FORNECEDOR}"
									title="#{messages.TITLE_DT_VAL_CBP_CADASTRO_FORNECEDOR}"
									value="#{manterCadastroFornecedorPaginatorController.fornecedor.dtValidadeCBP}"
									required="false" size="10" maxlength="10" tipo="data" />
							</p:column>
							<p:column style="border:none">
								<mec:inputTextData id="dtValRecEst"
									label="#{messages.LABEL_DT_VAL_REC_EST_CADASTRO_FORNECEDOR}"
									title="#{messages.TITLE_DT_VAL_REC_EST_CADASTRO_FORNECEDOR}"
									value="#{manterCadastroFornecedorPaginatorController.fornecedor.dtValidadeRecEst}"
									required="false" size="10" maxlength="10" tipo="data" />
							</p:column>
							<p:column style="border:none">
								<mec:inputTextData id="dtValidadeRecMun"
									label="#{messages.LABEL_DT_VAL_REC_MUN_CADASTRO_FORNECEDOR}"
									title="#{messages.TITLE_DT_VAL_REC_MUN_CADASTRO_FORNECEDOR}"
									value="#{manterCadastroFornecedorPaginatorController.fornecedor.dtValidadeRecMun}"
									required="false" size="10" maxlength="10" tipo="data" />
							</p:column>
							<p:column style="border:none">
								<mec:inputNumero id="ilc" label="#{messages.LABEL_ILC}"
									title="#{messages.TITLE_ILC_CADASTRO_FORNECEDOR}"
									value="#{manterCadastroFornecedorPaginatorController.fornecedor.indiceLiquidezCorrente}"
									size="4" readonly="false" inteiros="2" decimais="2"
									style="text-align:right;"
									maxlength="2" converter="#{bigDecimalConverter}" />
							</p:column>
							<p:column style="border:none">
								<mec:inputNumero id="ilg" label="#{messages.LABEL_ILG}"
									title="#{messages.TITLE_ILG_CADASTRO_FORNECEDOR}"
									value="#{manterCadastroFornecedorPaginatorController.fornecedor.indiceLiquidezGeral}"
									size="4" readonly="false" inteiros="2" decimais="2" 
									style="text-align:right;"
									maxlength="2" converter="#{bigDecimalConverter}"/>
							</p:column>
						</h:panelGroup>
						<h:panelGroup>
							<p:column style="border:none">
								<mec:inputTextData id="dtValCDNT"
									label="#{messages.LABEL_DT_VAL_CDNT_CADASTRO_FORNECEDOR}"
									title="#{messages.TITLE_DT_VAL_CDNT_CADASTRO_FORNECEDOR}"
									value="#{manterCadastroFornecedorPaginatorController.fornecedor.dtValidadeCNDT}"
									required="false" size="10" maxlength="10" tipo="data" />
							</p:column>
							<p:column style="border:none">
								<mec:selectOneMenu label="#{messages.LABEL_CLASSIF_ECON}"
									title="#{messages.TITLE_CLASSIF_ECON_CADASTRO_FORNECEDOR}"
									id="classEcon" enum="DominioClassEcon"
									value="#{manterCadastroFornecedorPaginatorController.classEcon}" />
							</p:column>
							<p:column style="border:none">
								<mec:selectOneMenu label="#{messages.LABEL_TIPO}"
									title="#{messages.TITLE_TIPO_CADASTRO_FORNECEDOR}" id="tipo"
									enum="DominioTipoFornc"
									value="#{manterCadastroFornecedorPaginatorController.tipoFornecedor}" />
							</p:column>
							<p:column style="border:none">
								<mec:inputNumero id="patrimonioLiquido"
									label="#{messages.LABEL_PATRIMONIO_LIQUIDO}"
									title="#{messages.TITLE_PATRIMONIO_LIQUIDO_CADASTRO_FORNECEDOR}"
									value="#{manterCadastroFornecedorPaginatorController.fornecedor.valorPatrimLiq}"
									inteiros="16" decimais="2" style="text-align:right;"/>
							</p:column>
						</h:panelGroup>
					</p:panelGrid>
				</aghu:linha>
			</aghu:panelGeral>  
        <aghu:acao> 
          <mec:commandButton id="bt_pesquisar" block="true" value="#{messages.LABEL_PESQUISAR}" action="#{manterCadastroFornecedorPaginatorController.pesquisar}" profile="search"/>  
          <mec:commandButton id="bt_limparCampos" block="true" value="#{messages.LABEL_LIMPAR}" action="#{manterCadastroFornecedorPaginatorController.limparPesquisa}" profile="clear"/>  
          <mec:commandButton id="bt_novo" block="true" rendered="#{manterCadastroFornecedorPaginatorController.dataModel.pesquisaAtiva and mf:hasPermission(securityController,'alterarCadastroFornecedor,alterar')}" value="#{messages.LABEL_NOVO}" action="#{manterCadastroFornecedorPaginatorController.inserir}" profile="add"/> 
        </aghu:acao> 
      </h:form>  
      <h:form prependId="false" id="resultPesquisa"> 
        <mec:serverDataTable value="#{manterCadastroFornecedorPaginatorController}" dataModel="dataModel" id="tabelaFornecedores" controller="#{manterCadastroFornecedorPaginatorController}"> 
          <c:set var="_forn" value="#{item}"/>  
          <p:column headerText="Ações" styleClass="first-column auto-adjust" exportable="false"> 
            <mec:commandLink id="tabelaFornecedores_link_editar" profile="edit" title="editar" action="#{manterCadastroFornecedorPaginatorController.editar}"> 
              <f:setPropertyActionListener target="#{manterCadastroFornecedorController.numeroFrn}" value="#{_forn.numero}" for="command"/>  
              <f:setPropertyActionListener target="#{manterCadastroFornecedorPaginatorController.selecionado}" value="#{_forn}" for="command"/> 
            </mec:commandLink>  
            <f:facet name="header"> 
              <h:outputText value="#{messages.LABEL_ACAO}"/> 
            </f:facet>  
            <mec:commandLink title="#{messages.LABEL_VISUALIZAR}" action="#{manterCadastroFornecedorPaginatorController.editar}" rendered="#{not mf:hasPermission(securityController,'alterarCadastroFornecedor,alterar')}" styleClass=" silk-zoom silk-icon"> 
              <f:setPropertyActionListener target="#{manterCadastroFornecedorController.numeroFrn}" value="#{_forn.numero}" for="command"/> 
            </mec:commandLink>  
            <mec:commandLink action="#{manterCadastroFornecedorPaginatorController.verContatos}" title="#{messages.LABEL_CONTATOS}" styleClass=" silk-vcard silk-icon"> 
              <f:setPropertyActionListener target="#{cadastroContatoFornecedorController.numeroFrn}" value="#{_forn.numero}" for="command"/>  
              <f:setPropertyActionListener target="#{cadastroContatoFornecedorController.voltarParaUrl}" value="pesquisarFornecedor" for="command"/> 
            </mec:commandLink>  
            <p:spacer width="20" rendered="#{manterCadastroFornecedorPaginatorController.isVencido(_forn) or manterCadastroFornecedorPaginatorController.aVencer(_forn)}" styleClass="silk-icon silk-marcador-#{manterCadastroFornecedorPaginatorController.obterCorSemaforo(_forn)}" title="#{manterCadastroFornecedorPaginatorController.obterHintSemaforo(_forn)}"/> 
          </p:column>  
          <p:column style="white-space:nowrap;"> 
            <f:facet name="header"> 
              <h:outputText value="#{messages.LABEL_NUMERO}"/> 
            </f:facet>  
            <h:outputText value="#{_forn.numero}"/> 
          </p:column>  
          <p:column style="white-space:nowrap;"> 
            <f:facet name="header"> 
              <h:outputText value="#{messages.LABEL_CPF_CNPJ_CADASTRO_FORNECEDOR}"/> 
            </f:facet>  
            <h:outputText value="#{_forn.cpfCnpj}" rendered="#{_forn.cpf != null}"> 
              <f:converter converterId="cpfConverter"/> 
            </h:outputText>  
            <h:outputText value="#{_forn.cpfCnpj}" rendered="#{_forn.cgc != null}"> 
              <f:converter converterId="cnpjConverter"/> 
            </h:outputText> 
          </p:column>  
          <p:column style="width:350px;"> 
            <f:facet name="header"> 
              <h:outputText value="#{messages.LABEL_FORNECEDOR}"/> 
            </f:facet>  
            <h:outputText id="nomeFornecedor" value="#{manterCadastroFornecedorPaginatorController.truncarTexto(_forn.razaoSocial,30)}"/>  
            <p:tooltip   for="nomeFornecedor" direction="bottom-right" styleClass="tooltip" layout="block">#{messages.LABEL_RAZAO_SOCIAL}:  
              <h:outputText value="#{_forn.razaoSocial}"/>  
              <br clear="none"/> #{messages.LABEL_NOME_FANTASIA}:  
              <h:outputText value=" #{_forn.nomeFantasia}"/>  
              <br clear="none"/> #{messages.LABEL_INSCRICAO_ESTADUAL_COMPLETO}:  
              <h:outputText value=" #{_forn.inscricaoEstadual}"/>  
              <br clear="none"/> #{messages.LABEL_NUMERO_CRC_ABREVIADO}:  
              <h:outputText value=" #{_forn.crc}"/>  
              <br clear="none"/> 
            </p:tooltip> 
          </p:column>  
          <p:column style="white-space:nowrap; text-align:center;"> 
            <f:facet name="header"> 
              <h:outputText value="#{messages.LABEL_ATIVO}"/> 
            </f:facet> 
            <h:outputText styleClass="#{_forn.situacao eq 'A' ? 'silk-icon silk-checked' : ''}"/>             
          </p:column>  
          <p:column style="white-space:nowrap;"> 
            <f:facet name="header"> 
              <h:outputText value="#{messages.LABEL_CIDADE_CADASTRO_FORNECEDOR}"/> 
            </f:facet>  
            <h:outputText id="cidadeFornecedor" value="#{_forn.cidade.nome}"/>  
            <p:tooltip   for="cidadeFornecedor" direction="bottom-right" styleClass="tooltip" layout="block"> 
              <h:outputText value="#{_forn.cidade.codigo}"/> - 
              <h:outputText value=" #{_forn.cidade.nome}"/> - 
              <h:outputText value=" #{_forn.cidade.aipUf.sigla}"/>  
              <br clear="none"/> #{messages.LABEL_LOGRADOURO}:  
              <h:outputText value=" #{_forn.logradouro}"/>  
              <br clear="none"/> #{messages.LABEL_NRO}:  
              <h:outputText value=" #{_forn.nroLogradouro}"/>  
              <br clear="none"/> #{messages.LABEL_BAIRRO}:  
              <h:outputText value=" #{_forn.bairro}"/>  
              <br clear="none"/> #{messages.LABEL_CEP}:  
              <h:outputText value=" #{_forn.cep}"/> 
            </p:tooltip> 
          </p:column>  
          <p:column style="white-space:nowrap;"> 
            <f:facet name="header"> 
              <h:outputText value="#{messages.LABEL_DDD_TELEFONE}"/> 
            </f:facet>  
            <p:outputPanel id="contatoTelefonico">
            <h:outputText value="#{_forn.ddd}"/>- 
            <h:outputText value="#{_forn.fone}"/> 
            </p:outputPanel>
            <p:tooltip for="contatoTelefonico" direction="bottom-right" styleClass="tooltip" layout="block" rendered="#{_forn.fax ne null}">#{messages.LABEL_FAX}: 
              <h:outputText value=" #{_forn.ddd}"/>- 
              <h:outputText value="#{_forn.fax}"/> 
            </p:tooltip> 
          </p:column>  
          <p:column style="white-space:nowrap;"> 
            <f:facet name="header"> 
              <h:outputText value="Email"/> 
            </f:facet>  
            <h:outputText value="#{_forn.email}"/> 
          </p:column>  
          <p:column style="white-space:nowrap; text-align:center;"> 
            <f:facet name="header"> 
              <h:outputText  value="#{messages.LABEL_MAIS_INFO_FORNECEDOR}"/> 
            </f:facet>  
            <h:graphicImage id="maisInformacoes" value="/resources/img/icons/table.png"/>  
            <p:tooltip  for="maisInformacoes" direction="bottom-right" styleClass="tooltip" layout="block">#{messages.LABEL_CLASSIFIC_ECONOMICA}:  
              <h:outputText value=" #{_forn.classificacaoEconomica}"/>  
              <br clear="none"/> #{messages.LABEL_TIPO}:  
              <h:outputText value=" #{manterCadastroFornecedorPaginatorController.getDescricaoClassificacao(_forn)}"/>  
              <br clear="none"/> #{messages.LABEL_VALIDADE_CRC}: 
              <span> </span>  
              <h:outputText value="#{_forn.dtValidadeCrc}"> 
                <f:convertDateTime pattern="dd/MM/yyyy"/> 
              </h:outputText>  
              <br clear="none"/> #{messages.LABEL_VALIDADE_FGTS}: 
              <span> </span>  
              <h:outputText value="#{_forn.dtValidadeFgts}"> 
                <f:convertDateTime pattern="dd/MM/yyyy"/> 
              </h:outputText>  
              <br clear="none"/> #{messages.LABEL_VALIDADE_INSS}: 
              <span> </span>  
              <h:outputText value="#{_forn.dtValidadeInss}"> 
                <f:convertDateTime pattern="dd/MM/yyyy"/> 
              </h:outputText>  
              <br clear="none"/>  
              <h:outputText value=" #{_forn.tipoFornecedor.descricao}"/> 
            </p:tooltip> 
          </p:column> 
        </mec:serverDataTable> 
      </h:form> 
    </ui:define> 
  </ui:composition> 
</html>
