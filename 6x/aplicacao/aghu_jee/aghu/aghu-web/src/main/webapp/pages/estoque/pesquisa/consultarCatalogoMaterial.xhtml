<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:aghu="http://xmlns.jcp.org/jsf/component" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:mf="http://www.mec.gov.br/taglib">  
  <ui:composition xmlns:fn="http://java.sun.com/jsp/jstl/functions" template="/WEB-INF/templates/form_template.xhtml">  
    <ui:define name="head"> 
      <title>#{messages.TITLE_CONSULTAR_CATALOGO_MATERIAIS} :: #{messages.SUB_TITLE_ESTOQUE_MEC}</title> 
    </ui:define>  
    <ui:define name="metadata"> 
      <f:metadata> 
        <f:viewAction action="#{consultaCatalogoMaterialPaginatorController.inicio}"/> 
      </f:metadata> 
    </ui:define>  
    <ui:define name="body"> 
      <mec:pageConfig controller="#{consultaCatalogoMaterialPaginatorController}"/>  
      <p:outputPanel id="corpoPagina" layout="inline"> 
        <h:form prependId="false" method="post" > 
        	<aghu:panelGeral legend="#{messages.LEGEND_FIELD_SET_CONSULTAR_CATALOGO_MATERIAIS}">
		          <aghu:linha style="padding: 5px; margin: 5px">
						<aghu:linha>
							<mec:inputNumero id="codigoMaterial" label="#{messages.LABEL_CODIGO}"
								title="#{messages.TITLE_CODIGO_MATERIAL_CATALOGO}" size="6" maxlength="6"
								value="#{consultaCatalogoMaterialPaginatorController.material.codigo}" />
							<mec:inputText class="" id="nomeMaterial" label="Nome do Material "
								title="#{messages.TITLE_NOME_MATERIAL_CATALOGO}" size="40" maxlength="40"
								value="#{consultaCatalogoMaterialPaginatorController.material.nome}" />
							<mec:selectOneMenu label="#{messages.LABEL_SITUACAO}"
								title="#{messages.TITLE_SITUACAO_MATERIAL_CATALOGO}"
								id="som_situacao" enum="DominioSituacao"
								value="#{consultaCatalogoMaterialPaginatorController.material.indSituacao}" />
							<mec:selectOneMenu
								label="#{messages.LABEL_ESTOCAVEL_MATERIAL_CATALOGO}"
								title="#{messages.TITLE_ESTOCAVEL_MATERIAL_CATALOGO}"
								id="som_estocavel" enum="DominioSimNao"
								value="#{consultaCatalogoMaterialPaginatorController.matIndEstocavel}" />
							<mec:selectOneMenu
								label="#{messages.LABEL_GENERICO_MATERIAL_CATALOGO}"
								title="#{messages.TITLE_GENERICO_MATERIAL_CATALOGO}"
								id="som_generico" enum="DominioSimNao"
								value="#{consultaCatalogoMaterialPaginatorController.material.indGenerico}" />
							<mec:selectOneMenu
								label="#{messages.LABEL_CLASSIFXYZ_MATERIAL_CATALOGO}"
								title="#{messages.TITLE_CLASSIF_XYZ}" enum="DominioClassifyXYZ"
								value="#{consultaCatalogoMaterialPaginatorController.material.classifXyz}"
								id="classif" />
						</aghu:linha>
						<aghu:linha>
							<mec:inputNumero class="" id="codigoCatMat"
								label="#{messages.LABEL_COD_CATMAT}"
								title="#{messages.TITLE_COD_CATMAT}" size="7" maxlength="7"
								value="#{consultaCatalogoMaterialPaginatorController.material.codCatmat}" />
							<mec:inputNumero class="" id="codMatAntigo"
								label="#{messages.LABEL_COD_MATERIAL_ANTIGO}"
								title="#{messages.TITLE_COD_MATERIAL_ANTIGO}" size="10"
								maxlength="10"
								value="#{consultaCatalogoMaterialPaginatorController.material.codMatAntigo}" />
							<mec:suggestionBox id="sug_unidadeMedida"
								label="#{messages.LABEL_UNIDADE_MEDIDA_MATERIAL_CATALOGO}"
								title="#{messages.TITLE_UNIDADE_MEDIDA_MATERIAL_CATALOGO}"
								descricaoInput="codigo" descricaoLabel="descricao"
								suggestionAction="pesquisarUnidadeMedidaAtivaPorCodigoDescricao"
								styleClassField="no-line-break" maxlength="3"
								controller="#{consultaCatalogoMaterialPaginatorController}"
								value="#{consultaCatalogoMaterialPaginatorController.material.unidadeMedida}">
								<p:column>
									<f:facet name="header">
										<b>#{messages.LABEL_UNIDADE}</b>
									</f:facet> #{item.codigo}
		                		</p:column>
								<p:column>
									<f:facet name="header">
										<b>#{messages.LABEL_DESCRICAO}</b>
									</f:facet> #{item.descricao}
		                		</p:column>
							</mec:suggestionBox>
							<mec:suggestionBox label="#{messages.LABEL_GRUPO_MATERIAL_CATALOGO}" title="#{messages.TITLE_GRUPO_MATERIAL_CATALOGO}" descricaoInput="codigo" descricaoLabel="descricao" suggestionAction="pesquisarGrupoMaterialPorCodigoDescricao" styleClassField="no-line-break" maxlength="3" width="500" id="gmtMaterial" controller="#{consultaCatalogoMaterialPaginatorController}" value="#{consultaCatalogoMaterialPaginatorController.material.grupoMaterial}"> 
				                <p:column> 
				                  <f:facet name="header"> 
				                    <b>#{messages.LABEL_GRUPO}</b> 
				                  </f:facet> #{item.codigo}
				                </p:column>  
				                <p:column> 
				                  <f:facet name="header"> 
				                    <b>#{messages.LABEL_DESCRICAO}</b> 
				                  </f:facet> #{item.descricao}
				                </p:column> 
			                </mec:suggestionBox>  
			                <mec:suggestionBox id="sbClassificacaoMaterial" label="#{messages.LABEL_CLASSIFICACAO_MATERIAL}" title="#{messages.TITLE_TRANSF_AUTO_ALMOXARIFADO_CLASSIFICACAO_MATERIAL}" suggestionAction="obterClassificacaoMaterial" descricaoInput="id.numero" descricaoLabel="id.descricao" maxlength="30" width="650" controller="#{consultaCatalogoMaterialPaginatorController}" value="#{consultaCatalogoMaterialPaginatorController.classificacaoMaterial}"> 
				                <p:column> 
				                  <f:facet name="header"> 
				                    <b>#{messages.LABEL_NUMERO}</b> 
				                  </f:facet> #{item.id.numero}
				                </p:column>  
				                <p:column> 
				                  <f:facet name="header"> 
				                    <b>#{messages.LABEL_GRUPO}</b> 
				                  </f:facet> #{item.id.grupo}
				                </p:column>  
				                <p:column> 
				                  <f:facet name="header"> 
				                    <b>#{messages.LABEL_DESCRICAO}</b> 
				                  </f:facet> #{item.id.descricao}
				                </p:column> 
 			                </mec:suggestionBox> 
		            </aghu:linha> 
		          </aghu:linha>
		        </aghu:panelGeral>    
		          <aghu:linha style="padding: 5px; margin: 5px"> 
		            <mec:commandButton id="bt_pesquisar" value="#{messages.LABEL_PESQUISAR_CATALOGO_MATERIAIS}" action="#{consultaCatalogoMaterialPaginatorController.pesquisar}" profile="ok"/>  
		            <mec:commandButton id="bt_limparPesquisa" value="#{messages.LABEL_LIMPAR_CATALOGO_MATERIAIS}" action="#{consultaCatalogoMaterialPaginatorController.limparCampos}" profile="clear"/>  
		            <mec:commandButton id="bt_voltar1" value="#{messages.LABEL_VOLTAR}" immediate="true" rendered="#{consultaCatalogoMaterialPaginatorController.habilitarVoltar()}" action="#{consultaCatalogoMaterialPaginatorController.voltar}" styleClass="bt_voltar bt_cinza" profile="back"/> 
		          </aghu:linha> 	
        </h:form>  
        <h:form prependId="false" id="formListaMateriais"> 
          <mec:serverDataTable  dataModel="dataModel"
          						rendered="#{consultaCatalogoMaterialPaginatorController.ativo}"
          						value="#{consultaCatalogoMaterialPaginatorController}" 
         						title="#{messages.TITLE_LISTA_MATERIAIS_CATALOGO}" 
         						id="tabelaLicitacoes" 
         						controller="#{consultaCatalogoMaterialPaginatorController}"> 
            <c:set var="_mat" value="#{item}"/>  
            <p:column width="50"> 
              <f:facet name="header" > 
                <h:outputText value="#{messages.LABEL_LINK_ACAO}"/> 
              </f:facet>  
               <mec:commandLink id="linkConsultarPArecer" rendered="#{consultaCatalogoMaterialPaginatorController.origemConsultarParecerTecnico and _mat.indAtivo}" title="#{messages.LABEL_SELECIONAR_MATERIAL}" action="#{consultaCatalogoMaterialPaginatorController.consultarParecer}" styleClass=" silk-accept silk-icon" ajax="true"> 
                <f:setPropertyActionListener target="#{consultaParecerController.codigoMaterial}" value="#{_mat.codigo}" for="command"/>  
                <f:setPropertyActionListener target="#{consultaParecerController.cameFromCatalogo}" value="#{true}" for="command"/>
                <f:setPropertyActionListener target="#{consultaParecerController.origem}" value="estoque-consultarCatalogoMaterial" for="command"/>
              </mec:commandLink>                
              <mec:commandLink id="linkSolicitacaoCompra" rendered="#{(consultaCatalogoMaterialPaginatorController.origemSolicitacaoCompra or consultaCatalogoMaterialPaginatorController.origemRequisicaoMaterial) and _mat.indAtivo}" title="#{messages.LABEL_SELECIONAR_MATERIAL}" action="#{consultaCatalogoMaterialPaginatorController.solicitarCompra}" styleClass=" silk-accept silk-icon" ajax="true"> 
                <f:setPropertyActionListener target="#{solicitacaoCompraController.codigoMaterial}" value="#{_mat.codigo}" for="command"/>  
                <f:setPropertyActionListener target="#{solicitacaoCompraController.cameFromCatalogo}" value="#{true}" for="command"/>
                <f:setPropertyActionListener target="#{solicitacaoCompraController.origem}" value="estoque-consultarCatalogoMaterial" for="command"/> 
                <f:setPropertyActionListener target="#{geracaoRequisicaoMaterialController.codigoMaterial}" value="#{_mat.codigo}" for="command"/>  
                <f:setPropertyActionListener target="#{geracaoRequisicaoMaterialController.cameFromCatalogo}" value="#{true}" for="command"/>
              </mec:commandLink>  
              <mec:commandLink id="linkCadastroMaterial" rendered="#{mf:hasPermission(securityController,'/estoque/cadastrosapoio/manterMaterialCRUD.xhtml,render')}" title="#{messages.TITLE_MANTER_MATERIAL_CATALOGO}" action="#{consultaCatalogoMaterialPaginatorController.manterMaterial}" profile="edit"> 
                <f:setPropertyActionListener target="#{manterMaterialController.codigo}" value="#{_mat.codigo}" for="command"/>  
                <f:setPropertyActionListener target="#{manterMaterialController.emEdicao}" value="true" for="command"/>  
                <f:setPropertyActionListener target="#{manterMaterialController.voltarPara}" value="#{consultaCatalogoMaterialPaginatorController.enumTargetCatalogoMaterial}" for="command"/> 
              </mec:commandLink>  
              <mec:commandLink id="linkVisCadastroMaterial" rendered="#{mf:hasPermission(securityController,'consultarCadastroMaterial,visualizar')}" title="#{messages.LABEL_VISUALIZAR}" action="#{consultaCatalogoMaterialPaginatorController.manterMaterial}" profile="view"> 
                <f:setPropertyActionListener target="#{manterMaterialController.codigo}" value="#{_mat.codigo}" for="command"/>  
                <f:setPropertyActionListener target="#{manterMaterialController.emEdicao}" value="true" for="command"/>  
                <f:setPropertyActionListener target="#{manterMaterialController.voltarPara}" value="#{consultaCatalogoMaterialPaginatorController.enumTargetCatalogoMaterial}" for="command"/> 
              </mec:commandLink> 
            </p:column>  
            <p:column> 
              <f:facet name="header"> 
                <h:outputText value="#{messages.LABEL_NOME_MATERIAL_LISTA_CATALOGO}"/> 
              </f:facet>  
              <p:outputPanel id="panelMat">
	              <h:outputText value="#{_mat.codigo}"/> - 
	              <h:outputText value="#{consultaCatalogoMaterialPaginatorController.abreviar(_mat.nome, 28)}"/>
              </p:outputPanel>  
              <p:tooltip for="panelMat" direction="bottom-right" styleClass="tooltip" layout="block"> 
                <h:outputText value="#{_mat.codigo} - #{_mat.nome}"/> 
              </p:tooltip> 
            </p:column>  
            <p:column> 
              <f:facet name="header"> 
                <h:outputText value="#{messages.LABEL_DESCRICAO_MATERIAL_LISTA_CATALOGO}"/> 
              </f:facet> 
              <p:outputPanel id="panelDesc"> 
              	<h:outputText value="#{consultaCatalogoMaterialPaginatorController.abreviar(_mat.descricao, 32)}"/>
              </p:outputPanel>	  
              <p:tooltip for="panelDesc" rendered="#{_mat.descricao!=null}" direction="bottom-right" styleClass="tooltip" layout="block"> 
                <h:outputText value="#{_mat.descricao}"/> 
              </p:tooltip> 
            </p:column>  
            <p:column width="20"> 
              <f:facet name="header"> 
                <h:outputText value="#{messages.LABEL_UNIDADE_MEDIDA_MATERIAL_LISTA_CATALOGO}"/> 
              </f:facet> 
              <p:outputPanel id="panelUmd"> 
              	<h:outputText value="#{_mat.unidadeMedida.codigo}"/>
              </p:outputPanel>	  
              <p:tooltip for="panelUmd" direction="bottom-right" styleClass="tooltip" layout="block"> 
                <h:outputText value="#{_mat.unidadeMedida.codigo} - #{_mat.unidadeMedida.descricao}"/> 
              </p:tooltip> 
            </p:column>  
            <p:column width="20"> 
              <f:facet name="header"> 
                <h:outputText value="#{messages.LABEL_GRUPO_MATERIAL_LISTA_CATALOGO}"/> 
              </f:facet> 
              <p:outputPanel id="panelGmt"> 
              	<h:outputText value="#{_mat.grupoMaterial.codigo}"/>
              </p:outputPanel>	  
              <p:tooltip for="panelGmt" direction="bottom-right" styleClass="tooltip" layout="block"> 
                <h:outputText value="#{_mat.grupoMaterial.codigo} - #{_mat.grupoMaterial.descricao}"/> 
              </p:tooltip> 
            </p:column>  
            <p:column width="20"> 
              <f:facet name="header"> 
                <h:outputText value="#{messages.LABEL_CLASSIFXYZ_MATERIAL_LISTA_CATALOGO}"/> 
              </f:facet> 
              <p:outputPanel id="panelXyz"> 
              	<h:outputText value="#{_mat.classifXyz}"/>
              </p:outputPanel>	  
              <p:tooltip for="panelXyz" rendered="#{_mat.classifXyz ne null}" direction="bottom-right" styleClass="tooltip" layout="block"> 
                <h:outputText value="#{consultaCatalogoMaterialPaginatorController.recuperarHintClassifXYZ(_mat.classifXyz)}"/> 
              </p:tooltip> 
            </p:column>  
            <p:column width="20"> 
              <f:facet name="header"> 
                <h:outputText value="#{messages.LABEL_SITUACAO_MATERIAL_LISTA_CATALOGO}"/> 
              </f:facet>  
              <h:outputText value="#{_mat.indSituacao}" converter="#{situacaoAtivoSimNaoConverter}"> 
                <f:converter converterId="situacaoAtivoSimNaoConverter"/> 
              </h:outputText> 
            </p:column>  
            <p:column width="48"> 
              <f:facet name="header"> 
                <h:outputText value="#{messages.LABEL_ESTOCAVEL_MATERIAL_LISTA_CATALOGO}"/> 
              </f:facet>  
              <h:outputText value="#{_mat.indAtivoEstocavel}"> 
                <f:converter converterId="simNaoConverter"/> 
              </h:outputText> 
            </p:column>  
            <p:column width="43"> 
              <f:facet name="header"> 
                <h:outputText value="#{messages.LABEL_GENERICO_MATERIAL_LISTA_CATALOGO}"/> 
              </f:facet>  
              <h:outputText value="#{_mat.indAtivoGenerico}"> 
                <f:converter converterId="simNaoConverter"/> 
              </h:outputText> 
            </p:column>  
            <p:column width="70"> 
              <f:facet name="header"> 
                <h:outputText value="#{messages.LABEL_COD_CATMAT}"/> 
              </f:facet>  
              <h:outputText value="#{_mat.codCatmat}"/> 
            </p:column>  
            <p:column width="85"> 
              <f:facet name="header"> 
                <h:outputText value="#{messages.LABEL_COD_MATERIAL_ANTIGO}"/> 
              </f:facet>  
              <h:outputText value="#{_mat.codMatAntigo}"/> 
            </p:column> 
          </mec:serverDataTable> 
        </h:form> 
      </p:outputPanel> 
    </ui:define> 
  </ui:composition> 
</html>
