<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:aghu="http://xmlns.jcp.org/jsf/component" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:mf="http://www.mec.gov.br/taglib">  
  <ui:composition template="/WEB-INF/templates/form_template.xhtml"> 
    <ui:define name="head"> 
      <title>#{messages.TITLE_ROTINA_DIARIA_MATERIAIS} :: AGHU - MEC</title> 
    </ui:define>  
    <ui:define name="body"> 
      <mec:pageConfig controller="#{rotinaDiariaMateriaisController}"/>  
      <h:form id="formRotinaDiariaMateriais" prependId="false" method="post">
      <aghu:panelGeral>
        <aghu:linha> 
        <aghu:panelGeral legend="#{messages.TITLE_ROTINA_DIARIA_MATERIAIS}">
          <p:outputPanel id="painelParametros" layout="inline"> 
            <mec:inputTextData id="dataInicio" label="#{messages.LABEL_DATA_INICIAL_ROTINA_DIARIA_MATERIAIS}" size="7" title="#{messages.TITLE_DATA_INICIAL_ROTINA_DIARIA_MATERIAIS}" value="#{rotinaDiariaMateriaisController.dataInicio}" readonly="#{rotinaDiariaMateriaisController.isRelatorioMateriaisSaldo()}" tipo="data" required="true" />  
            <mec:inputNumero id="duracaoEstoque" label="#{messages.LABEL_DURACAO_ESTOQUE_ROTINA_DIARIA_MATERIAIS}" size="7" title="#{messages.TITLE_DURACAO_ESTOQUE_ROTINA_DIARIA_MATERIAIS}" value="#{rotinaDiariaMateriaisController.duracaoEstoque}" readonly="#{!rotinaDiariaMateriaisController.isRelatorioMateriaisSaldo()}"> 
              <p:ajax event="blur" update="@(#painelRelatorios)" process="@this"/> 
            </mec:inputNumero> 
          </p:outputPanel> 
         </aghu:panelGeral> 
        </aghu:linha>  
         
         <aghu:linha>
          <aghu:panelGeral legend="#{messages.LEGEND_FIELD_SET_RELATORIOS_ROTINA_MENSAL_MATERIAIS}">
            <p:outputPanel id="painelRelatorios" layout="inline"> 
              <mec:selectOneRadio id="radioButtonRelatorios" layout="pageDirection" value="#{rotinaDiariaMateriaisController.relatorio}" actionBean="#{rotinaDiariaMateriaisController}" required="false"> 
                <p:ajax event="change" update="@(#painelParametros), @(#painelCsv), @(#btn_exportar_csv)" process="@this" listener="#{rotinaDiariaMateriaisController.selecionarRelatorio}"/>  
                <f:selectItem id="idItem0" itemDisabled="true" itemLabel="#{rotinaDiariaMateriaisController.listarRelatorios()[0].descricao}" itemValue="#{rotinaDiariaMateriaisController.listarRelatorios()[0]}"/>  
                <f:selectItem id="idItem1" itemDisabled="true" itemLabel="#{rotinaDiariaMateriaisController.listarRelatorios()[1].descricao}" itemValue="#{rotinaDiariaMateriaisController.listarRelatorios()[1]}"/>  
                <f:selectItem id="idItem2" itemDisabled="true" itemLabel="#{rotinaDiariaMateriaisController.listarRelatorios()[2].descricao}" itemValue="#{rotinaDiariaMateriaisController.listarRelatorios()[2]}"/>  
                <f:selectItem id="idItem3" itemDisabled="false" itemLabel="#{rotinaDiariaMateriaisController.recuperarLabelRelatorioMateriaisSaldoAteDias()}" itemValue="#{rotinaDiariaMateriaisController.listarRelatorios()[3]}"/>  
                <f:selectItem id="idItem4" itemDisabled="true" itemLabel="#{rotinaDiariaMateriaisController.listarRelatorios()[4].descricao}" itemValue="#{rotinaDiariaMateriaisController.listarRelatorios()[4]}"/>  
                <f:selectItem id="idItem5" itemDisabled="true" itemLabel="#{rotinaDiariaMateriaisController.listarRelatorios()[5].descricao}" itemValue="#{rotinaDiariaMateriaisController.listarRelatorios()[5]}"/>  
                <f:selectItem id="idItem6" itemDisabled="#{!mf:hasPermission(securityController,'emitirRelatorioEntradaMateriaisDia,executar')}" itemLabel="#{rotinaDiariaMateriaisController.listarRelatorios()[6].descricao}" itemValue="#{rotinaDiariaMateriaisController.listarRelatorios()[6]}"/>
                <f:selectItem id="idItem7" itemDisabled="true" itemLabel="#{rotinaDiariaMateriaisController.listarRelatorios()[7].descricao}" itemValue="#{rotinaDiariaMateriaisController.listarRelatorios()[7]}"/>  
                <f:selectItem id="idItem8" itemDisabled="true" itemLabel="#{rotinaDiariaMateriaisController.listarRelatorios()[8].descricao}" itemValue="#{rotinaDiariaMateriaisController.listarRelatorios()[8]}"/>  
                <f:selectItem id="idItem9" itemDisabled="true" itemLabel="#{rotinaDiariaMateriaisController.listarRelatorios()[9].descricao}" itemValue="#{rotinaDiariaMateriaisController.listarRelatorios()[9]}"/>  
                <f:selectItem id="idItem11" itemDisabled="true" itemLabel="#{rotinaDiariaMateriaisController.listarRelatorios()[11].descricao}" itemValue="#{rotinaDiariaMateriaisController.listarRelatorios()[11]}"/>  
                <f:selectItem id="idItem12" itemDisabled="true" itemLabel="#{rotinaDiariaMateriaisController.listarRelatorios()[12].descricao}" itemValue="#{rotinaDiariaMateriaisController.listarRelatorios()[12]}"/>  
                <f:selectItem id="idItem13" itemDisabled="true" itemLabel="#{rotinaDiariaMateriaisController.listarRelatorios()[13].descricao}" itemValue="#{rotinaDiariaMateriaisController.listarRelatorios()[13]}"/>  
                <f:selectItem id="idItem14" itemDisabled="true" itemLabel="#{rotinaDiariaMateriaisController.listarRelatorios()[14].descricao}" itemValue="#{rotinaDiariaMateriaisController.listarRelatorios()[14]}"/>  
                <f:selectItem id="idItem15" itemDisabled="true" itemLabel="#{rotinaDiariaMateriaisController.listarRelatorios()[15].descricao}" itemValue="#{rotinaDiariaMateriaisController.listarRelatorios()[15]}"/>  
                <f:selectItem id="idItem16" itemDisabled="true" itemLabel="#{rotinaDiariaMateriaisController.listarRelatorios()[16].descricao}" itemValue="#{rotinaDiariaMateriaisController.listarRelatorios()[16]}"/>  
                <f:selectItem id="idItem17" itemDisabled="true" itemLabel="#{rotinaDiariaMateriaisController.listarRelatorios()[17].descricao}" itemValue="#{rotinaDiariaMateriaisController.listarRelatorios()[17]}"/>  
                <f:selectItem id="idItem18" itemDisabled="true" itemLabel="#{rotinaDiariaMateriaisController.listarRelatorios()[18].descricao}" itemValue="#{rotinaDiariaMateriaisController.listarRelatorios()[18]}"/>  
                <f:selectItem id="idItem19" itemDisabled="true" itemLabel="#{rotinaDiariaMateriaisController.listarRelatorios()[19].descricao}" itemValue="#{rotinaDiariaMateriaisController.listarRelatorios()[19]}"/>  
                <p:ajax update="@(#painelParametros), @(#painelCsv)" event="change" /> 
              </mec:selectOneRadio> 
            </p:outputPanel> 
		   </aghu:panelGeral>
          </aghu:linha>  
        <aghu:acao> 
          <mec:commandButton id="bt_print_buttonView" value="#{messages.LABEL_VISUALIZAR_IMPRESSAO_RELATORIO}" action="#{rotinaDiariaMateriaisController.print}" profile="view" onclick="PF('loadDialogWG').show()"/>  
          <mec:commandButton id="bt_print_buttonPrint" value="#{messages.LABEL_IMPRIMIR}" action="#{rotinaDiariaMateriaisController.impressaoDireta}" profile="print" onclick="PF('loadDialogWG').show()"/>  
          <p:outputPanel id="painelCsv" layout="inline">  
          <mec:commandButton id="btn_exportar_csv" hint="#{messages.HINT_BOTAO_GERAR_ARQUIVO_CSV}" onclick="PF('loadDialogWG').show();" value="#{messages.LABEL_EXPORTAR_ARQUIVO_CSV}" action="#{rotinaDiariaMateriaisController.gerarCSV}" styleClass=" icon-download-csv bt_cinza" disabled="#{rotinaDiariaMateriaisController.rederizaBtCsv}" > 
            <f:param name="cid" value="#{javax.enterprise.context.conversation.id}"/> 
          </mec:commandButton>
          </p:outputPanel>
          <mec:commandButton id="bt_limpar" title="#{messages.HINT_BOTAO_LIMPAR_TRANSFERENCIA_MATERIAL}" value="#{messages.LABEL_LIMPAR}" action="#{rotinaDiariaMateriaisController.limparCampos()}" ajax="true" render="@(#formRotinaDiariaMateriais)" process="@this" immediate="true" profile="clear" />  
          <c:if xmlns:c="http://java.sun.com/jstl/core" test="#{rotinaDiariaMateriaisController.gerouArquivo}">  
            <script type="text/javascript" xml:space="preserve">
						jQuery(document).ready(function(){
							document.getElementById('abrirArquivoButton:button').click();
						});
					</script>  
            <mec:commandButton id="abrirArquivoButton" immediate="true" action="#{rotinaDiariaMateriaisController.dispararDownload()}" value="Download do arquivo" style="visibility: hidden;" styleClass="bt_cinza"> 
              <f:param name="cid" value="#{javax.enterprise.context.conversation.id}"/> 
            </mec:commandButton> 
          </c:if> 
        </aghu:acao> 
        </aghu:panelGeral>
      </h:form> 
    </ui:define> 
  </ui:composition> 
</html>
