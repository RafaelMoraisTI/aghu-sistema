<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:aghu="http://xmlns.jcp.org/jsf/component" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:mf="http://www.mec.gov.br/taglib">  
  <ui:composition template="/WEB-INF/templates/form_template.xhtml"> 
    <ui:define name="head"> 
      <title>#{messages.TITLE_VISUALIZAR_ITENS_REQUISICAO_MATERIAL} :: AGHU - MEC</title> 
    </ui:define>  
    <ui:define name="metadata"> 
      <f:metadata> 
        <f:viewAction action="#{visualizacaoItemRequisicaoMaterialController.iniciar}"/> 
      </f:metadata> 
    </ui:define>  
    <ui:define name="body"> 
      <mec:pageConfig controller="#{visualizacaoItemRequisicaoMaterialController}"/>  
      <h:form prependId="false" method="post" id="visualizarForm"> 
        <aghu:panelGeral legend="#{messages.TITLE_VISUALIZAR_ITENS_REQUISICAO_MATERIAL}">
         <aghu:linha> 
          <aghu:linha> 
            <mec:inputNumero class="" id="numeroRM" label="#{messages.LABEL_REQUISICAO_MATERIAL_VISUALIZAR_REQUISICAO_MATERIAL}" size="7" title="#{messages.LABEL_REQUISICAO_MATERIAL_VISUALIZAR_REQUISICAO_MATERIAL}" readonly="true" value="#{visualizacaoItemRequisicaoMaterialController.requisicao.seq}"/>  
            <mec:selectOneMenu value="#{visualizacaoItemRequisicaoMaterialController.requisicao.indSituacao}" id="situacao" label="#{messages.LABEL_SITUACAO_VISUALIZAR_REQUISICAO_MATERIAL}" title="#{messages.LABEL_SITUACAO_VISUALIZAR_REQUISICAO_MATERIAL}" readonly="true" enum="DominioSituacaoRequisicaoMaterial"/>  
            <mec:selectOneMenu readonly="true" value="#{visualizacaoItemRequisicaoMaterialController.estornada}" id="estornada" label="#{messages.LABEL_ESTORNO_VISUALIZAR_REQUISICAO_MATERIAL}" title="#{messages.LABEL_ESTORNO_VISUALIZAR_REQUISICAO_MATERIAL}" enum="DominioSimNao"/>  
            <mec:selectOneMenu readonly="true" value="#{visualizacaoItemRequisicaoMaterialController.automatica}" id="automatica" label="#{messages.LABEL_GERADA_AUTOMATICAMENTE_VISUALIZAR_REQUISICAO_MATERIAL}" title="#{messages.LABEL_GERADA_AUTOMATICAMENTE_VISUALIZAR_REQUISICAO_MATERIAL}" enum="DominioSimNao"/> 
          </aghu:linha>  
          <aghu:linha> 
            <p:outputPanel id="panelTooltipCentroCustosRequisicao" layout="inline"> 
              <mec:inputText class="" id="centroCustosRequisicao" readonly="true" label="#{messages.LABEL_CENTRO_CUSTOS_REQUISICAO_VISUALIZAR_REQUISICAO_MATERIAL}" value="#{visualizacaoItemRequisicaoMaterialController.abreviar(visualizacaoItemRequisicaoMaterialController.requisicao.centroCusto.codigoDescricao, 40)}" style="text-transform:uppercase" size="50"/>  
              <p:tooltip  direction="bottom-right" styleClass="tooltip" layout="block">  
                <h:outputText value="#{visualizacaoItemRequisicaoMaterialController.requisicao.centroCusto.codigoDescricao}"/> 
              </p:tooltip> 
            </p:outputPanel>  
            <p:outputPanel id="panelTooltipCentroCustosAplicacao" layout="inline"> 
              <mec:inputText class="" id="centroCustosAplicacao" readonly="true" label="#{messages.LABEL_CENTRO_CUSTOS_APLICACAO_VISUALIZAR_REQUISICAO_MATERIAL}" value="#{visualizacaoItemRequisicaoMaterialController.abreviar(visualizacaoItemRequisicaoMaterialController.requisicao.centroCustoAplica.codigoDescricao, 40)}" style="text-transform:uppercase" size="50"/>  
              <p:tooltip  direction="bottom-right" styleClass="tooltip" layout="block">  
                <h:outputText value="#{visualizacaoItemRequisicaoMaterialController.requisicao.centroCustoAplica.codigoDescricao}"/> 
              </p:tooltip> 
            </p:outputPanel>  
            <p:outputPanel id="panelTooltipAlmox" layout="inline"> 
              <mec:inputText class="" id="almoxarifado" readonly="true" label="#{messages.LABEL_ALMOXARIFADO_VISUALIZAR_REQUISICAO_MATERIAL}" value="#{visualizacaoItemRequisicaoMaterialController.abreviar(visualizacaoItemRequisicaoMaterialController.requisicao.almoxarifado.seqDescricao, 40)}" style="text-transform:uppercase" size="50"/>  
              <p:tooltip  direction="bottom-right" styleClass="tooltip" layout="block">  
                <h:outputText value="#{visualizacaoItemRequisicaoMaterialController.requisicao.almoxarifado.seqDescricao}"/> 
              </p:tooltip> 
            </p:outputPanel> 
          </aghu:linha>  
          <aghu:linha> 
            <p:outputPanel id="panelTooltipGeracao" layout="inline"> 
              <mec:inputText class="" id="geracao" readonly="true" size="80" label="#{messages.LABEL_INFO_GERACAO_VISUALIZAR_REQUISICAO_MATERIAL}" value="#{visualizacaoItemRequisicaoMaterialController.abreviar(visualizacaoItemRequisicaoMaterialController.getInformacaoSituacaoRM(visualizacaoItemRequisicaoMaterialController.requisicao.dtGeracao, visualizacaoItemRequisicaoMaterialController.requisicao.servidor), 60)}"/>  
              <p:tooltip  direction="bottom-right" styleClass="tooltip" layout="block">  
                <h:outputText value="#{visualizacaoItemRequisicaoMaterialController.getInformacaoSituacaoRM(visualizacaoItemRequisicaoMaterialController.requisicao.dtGeracao, visualizacaoItemRequisicaoMaterialController.requisicao.servidor)}"/> 
              </p:tooltip> 
            </p:outputPanel>  
            <p:outputPanel id="panelTooltipConfirmacao" layout="inline"> 
              <mec:inputText class="" id="confirmacao" readonly="true" size="80" label="#{messages.LABEL_INFO_CONFIRMACAO_VISUALIZAR_REQUISICAO_MATERIAL}" value="#{visualizacaoItemRequisicaoMaterialController.abreviar(visualizacaoItemRequisicaoMaterialController.getInformacaoSituacaoRM(visualizacaoItemRequisicaoMaterialController.requisicao.dtConfirmacao, visualizacaoItemRequisicaoMaterialController.requisicao.servidorConfirmado), 60)}"/>  
              <p:tooltip  direction="bottom-right" styleClass="tooltip" layout="block">  
                <h:outputText value="#{visualizacaoItemRequisicaoMaterialController.getInformacaoSituacaoRM(visualizacaoItemRequisicaoMaterialController.requisicao.dtConfirmacao, visualizacaoItemRequisicaoMaterialController.requisicao.servidorConfirmado)}"/> 
              </p:tooltip> 
            </p:outputPanel> 
          </aghu:linha>  
          <aghu:linha> 
            <p:outputPanel id="panelTooltipEfetivacao" layout="inline"> 
              <mec:inputText class="" id="efetivacao" readonly="true" size="80" label="#{messages.LABEL_INFO_EFETIVACAO_VISUALIZAR_REQUISICAO_MATERIAL}" value="#{visualizacaoItemRequisicaoMaterialController.abreviar(visualizacaoItemRequisicaoMaterialController.getInformacaoSituacaoRM(visualizacaoItemRequisicaoMaterialController.requisicao.dtEfetivacao, visualizacaoItemRequisicaoMaterialController.requisicao.servidorEfetivado), 60)}"/>  
              <p:tooltip  direction="bottom-right" styleClass="tooltip" layout="block">  
                <h:outputText value="#{visualizacaoItemRequisicaoMaterialController.getInformacaoSituacaoRM(visualizacaoItemRequisicaoMaterialController.requisicao.dtEfetivacao, visualizacaoItemRequisicaoMaterialController.requisicao.servidorEfetivado)}"/> 
              </p:tooltip> 
            </p:outputPanel>  
            <p:outputPanel id="panelTooltipEstorno" layout="inline"> 
              <mec:inputText class="" id="estorno" readonly="true" size="80" label="#{messages.LABEL_INFO_ESTORNO_VISUALIZAR_REQUISICAO_MATERIAL}" value="#{visualizacaoItemRequisicaoMaterialController.abreviar(visualizacaoItemRequisicaoMaterialController.getInformacaoSituacaoRM(visualizacaoItemRequisicaoMaterialController.requisicao.dtEstorno, visualizacaoItemRequisicaoMaterialController.requisicao.servidorEstornado), 60)}"/>  
              <p:tooltip  direction="bottom-right" styleClass="tooltip" layout="block">  
                <h:outputText value="#{visualizacaoItemRequisicaoMaterialController.getInformacaoSituacaoRM(visualizacaoItemRequisicaoMaterialController.requisicao.dtEstorno, visualizacaoItemRequisicaoMaterialController.requisicao.servidorEstornado)}"/> 
              </p:tooltip> 
            </p:outputPanel> 
          </aghu:linha>  
          <aghu:linha> 
            <p:outputPanel id="panelTooltipCancelamento" layout="inline"> 
              <mec:inputText class="" id="cancelamento" readonly="true" size="80" label="#{messages.LABEL_INFO_CANCELAMENTO_VISUALIZAR_REQUISICAO_MATERIAL}" value="#{visualizacaoItemRequisicaoMaterialController.abreviar(visualizacaoItemRequisicaoMaterialController.getInformacaoSituacaoRM(visualizacaoItemRequisicaoMaterialController.requisicao.dtCancelamento, visualizacaoItemRequisicaoMaterialController.requisicao.servidorCancelado), 60)}"/>  
              <p:tooltip  direction="bottom-right" styleClass="tooltip" layout="block">  
                <h:outputText value="#{visualizacaoItemRequisicaoMaterialController.getInformacaoSituacaoRM(visualizacaoItemRequisicaoMaterialController.requisicao.dtCancelamento, visualizacaoItemRequisicaoMaterialController.requisicao.servidorCancelado)}"/> 
              </p:tooltip> 
            </p:outputPanel>  
            <p:outputPanel id="panelTooltipImpressora" layout="inline"> 
              <mec:inputText class="" id="nomeImpressora" readonly="true" size="80" label="#{messages.LABEL_DESTINO_IMPRESSAO_VISUALIZAR_REQUISICAO_MATERIAL}" value="#{visualizacaoItemRequisicaoMaterialController.abreviar(visualizacaoItemRequisicaoMaterialController.requisicao.nomeImpressora, 60)}"/>  
              <p:tooltip  direction="bottom-right" styleClass="tooltip" layout="block">  
                <h:outputText value="#{visualizacaoItemRequisicaoMaterialController.requisicao.nomeImpressora}"/> 
              </p:tooltip> 
            </p:outputPanel> 
            </aghu:linha>
            <aghu:linha>
             <p:outputPanel id="panelPaciente" layout="inline">
					<mec:inputText label="#{messages.LABEL_PRONTUARIO}" id="prontuario" styleClass="numerico" readonly="true" size="10" maxlength="10"
								   value="#{visualizacaoItemRequisicaoMaterialController.requisicao.atendimento.paciente.prontuario}">
					</mec:inputText>
					<mec:inputText label="#{messages.LABEL_NOME}" id="pacNome" maxlength="50"
							value="#{visualizacaoItemRequisicaoMaterialController.requisicao.atendimento.paciente.nome}"
							style="text-transform:uppercase" size="50"
							styleclass="suggestion_input" readonly="true">
					</mec:inputText>
					<mec:inputNumero label="#{messages.LABEL_ATENDIMENTO}"
							id="atendimento" maxlength="9"
							value="#{visualizacaoItemRequisicaoMaterialController.requisicao.atendimento.seq}"
							style="text-transform:uppercase" size="12"
							styleclass="suggestion_input" readonly="true">
					</mec:inputNumero>
				</p:outputPanel>
             </aghu:linha>
           </aghu:linha>   
          </aghu:panelGeral>  
        <aghu:acao> 
          <mec:commandButton value="#{messages.LABEL_VOLTAR}" id="bt_voltar" action="#{visualizacaoItemRequisicaoMaterialController.voltar}" styleClass="bt_cinza" profile="back"/> 
        </aghu:acao>  
        <br clear="none"/>  
        <p:outputPanel layout="block" rendered="#{visualizacaoItemRequisicaoMaterialController.exibirItens}"> 
          <aghu:linha> 
              <mec:serverDataTable id="tabelaItens" style="cursor:pointer; cursor:hand;" list="#{visualizacaoItemRequisicaoMaterialController.listaItens}" scrollable="true"> 
                <c:set var="_item" value="#{item}"/>  
                <p:column style="width:40%"> 
                  <f:facet name="header"> 
                    <h:outputText value="#{messages.LABEL_MATERIAL_VISUALIZAR_REQUISICAO_MATERIAL}"/> 
                  </f:facet>  
                  <h:outputText id="material" value="#{visualizacaoItemRequisicaoMaterialController.abreviar(_item.codigoENomeMaterial, 40)}"/>
                  <p:tooltip direction="bottom-right" styleClass="tooltip" layout="block" for="material"> 
                    <h:outputText value="#{_item.codigoENomeMaterial}"/> 
                  </p:tooltip> 
                </p:column>  
                <p:column style="width:5%"> 
                  <f:facet name="header"> 
                    <h:outputText value="#{messages.LABEL_UNIDADE_MEDIDA_ESTOQUE_VISUALIZAR_REQUISICAO_MATERIAL}"/> 
                  </f:facet>  
                  <h:outputText value="#{_item.codigoUnidadeMedida}"/> 
                </p:column>  
                <p:column  style="width:30%"> 
                  <f:facet name="header"> 
                    <h:outputText value="#{messages.LABEL_FORNECEDOR_VISUALIZAR_REQUISICAO_MATERIAL}"/> 
                  </f:facet>  
                  <h:outputText id="fornecedor" value="#{visualizacaoItemRequisicaoMaterialController.abreviar(_item.codigoNomeFantasiaFornecedor, 30)}"/>  
                  <p:tooltip direction="bottom-right" styleClass="tooltip" layout="block" for="fornecedor"> 
                    <h:outputText value="#{_item.codigoNomeFantasiaFornecedor}"/> 
                  </p:tooltip> 
                </p:column>  
                <p:column style="width:5%"> 
                  <f:facet name="header"> 
                    <h:outputText value="#{messages.LABEL_QUANTIDADE_REQUISITADA_MATERIAL_VISUALIZAR_REQUISICAO_MATERIAL}"/> 
                  </f:facet>  
                  <h:outputText value="#{_item.qtdeRequisitada}"/> 
                </p:column>  
                <p:column style="width:5%"> 
                  <f:facet name="header"> 
                    <h:outputText value="#{messages.LABEL_QUANTIDADE_RECEBIDA_MATERIAL_VISUALIZAR_REQUISICAO_MATERIAL}"/> 
                  </f:facet>  
                  <h:outputText value="#{_item.qtdeEntregue}"/> 
                </p:column>  
                <p:column style="width:15%"> 
                  <f:facet name="header"> 
                    <h:outputText value="#{messages.LABEL_INDICA_ITEM_ESTOQUE_VISUALIZAR_REQUISICAO_MATERIAL}"/> 
                  </f:facet>  
                  <h:outputText rendered="#{_item.indTemEstoque}" value="#{messages.LABEL_SIM}"/>  
                  <h:outputText rendered="#{!_item.indTemEstoque}" value="#{messages.LABEL_NAO}"/> 
                </p:column> 
              </mec:serverDataTable> 
          </aghu:linha> 
        </p:outputPanel> 
      </h:form> 
    </ui:define> 
  </ui:composition> 
</html>
