<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:aghu="http://xmlns.jcp.org/jsf/component" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:mf="http://www.mec.gov.br/taglib">  
  <ui:composition template="/WEB-INF/templates/form_template.xhtml"> 
    <ui:define name="head"> 
      <title>Manter Dados Básicos de Exames</title> 
    </ui:define>  
    <ui:define name="metadata"> 
      <f:metadata> 
        <f:viewAction action="#{manterDadosBasicosExamesController.iniciar}"/> 
      </f:metadata> 
    </ui:define>  
    <ui:define name="body"> 
      <mec:pageConfig controller="#{manterDadosBasicosExamesController}" ignoreEnter="true"/>  
      <h:form prependId="false" id="formDadosBasicosExames" name="formDadosBasicosExames"> 
        <p:outputPanel id="campos" layout="inline" styleClass="aghu-panel-geral"> 
          <aghu:panelGeral legend="#{messages.LABEL_CADASTRAR_EXAMES}"> 
            <aghu:linha> 
              <mec:inputText id="sigla" label="#{messages.LABEL_SIGLA}" title="#{manterDadosBasicosExamesController.desabilitarCodigo ? '' : messages.TITLE_CADASTRO_SIGLA_EXAMES}" value="#{manterDadosBasicosExamesController.sigla}" readonly="#{not mf:hasPermission(securityController,'manterDadosBasicosExames,executar') or not mf:hasPermission(securityController,'manterCaracteristicasMateriaisAnalise,executar') or manterDadosBasicosExamesController.desabilitarCodigo}" required="#{manterDadosBasicosExamesController.desabilitarCodigo ? false : true}" size="5" maxlength="5" styleclass="suggestion_input" style="text-transform:uppercase" removerCaratersEspeciais="false"/>  
              <p:outputPanel id="panelTooltipNome" layout="inline"> 
                <mec:inputText id="nome" label="#{messages.LABEL_NOME}" title="#{manterDadosBasicosExamesController.desabilitarCodigo ? '' : messages.TITLE_CADASTRO_NOME_EXAMES}" value="#{manterDadosBasicosExamesController.exame.descricao}" readonly="#{not mf:hasPermission(securityController,'manterDadosBasicosExames,executar') or not mf:hasPermission(securityController,'manterCaracteristicasMateriaisAnalise,executar') or manterDadosBasicosExamesController.desabilitarCodigo}" required="#{manterDadosBasicosExamesController.desabilitarCodigo ? false : true}" size="60" maxlength="100" styleclass="suggestion_input" style="text-transform:uppercase" removerCaratersEspeciais="false"/>  
                <p:tooltip for="nome" direction="bottom-right" rendered="#{manterDadosBasicosExamesController.desabilitarCodigo}" styleClass="tooltip" layout="block">  
                  <h:outputText value="#{manterDadosBasicosExamesController.exame.descricao}"/> 
                </p:tooltip> 
              </p:outputPanel>  
              <mec:inputText id="nomeUsual" label="#{messages.LABEL_NOME_USUAL}" title="#{messages.TITLE_CADASTRO_NOME_USUAL_EXAMES}" value="#{manterDadosBasicosExamesController.exame.descricaoUsual}" required="true" readonly="#{not mf:hasPermission(securityController,'manterDadosBasicosExames,executar') or not mf:hasPermission(securityController,'manterCaracteristicasMateriaisAnalise,executar')}" size="60" maxlength="100" styleclass="suggestion_input" style="text-transform:uppercase" removerCaratersEspeciais="false"/>  
              <mec:selectOneMenu id="ativoInativo" enum="DominioSituacao" label="#{messages.LABEL_SITUACAO}" title="#{messages.TITLE_SITUACAO_EXAME}" value="#{manterDadosBasicosExamesController.exame.indSituacao}" required="true" readonly="#{not mf:hasPermission(securityController,'manterDadosBasicosExames,executar') or not mf:hasPermission(securityController,'manterCaracteristicasMateriaisAnalise,executar')}"/> 
            </aghu:linha>  
            <aghu:linha> 
              <mec:selectBooleanCheckbox id="indImpressao" label="#{messages.LABEL_IMPRESSAO}" title="#{messages.TITLE_CADASTRO_IMPRESSAO_EXAMES}" value="#{manterDadosBasicosExamesController.exame.indImpressao}" readonly="#{not mf:hasPermission(securityController,'manterDadosBasicosExames,executar') or not mf:hasPermission(securityController,'manterCaracteristicasMateriaisAnalise,executar')}"/>  
              <mec:selectBooleanCheckbox id="indConsisteInterface" label="#{messages.LABEL_CONSISTE_INTERFACEAMENTO}" title="#{messages.TITLE_CADASTRO_CONSISTE_INTERFACEAMENTO}" value="#{manterDadosBasicosExamesController.exame.indConsisteInterface}" readonly="#{not mf:hasPermission(securityController,'manterDadosBasicosExames,executar') or not mf:hasPermission(securityController,'manterCaracteristicasMateriaisAnalise,executar')}"/>  
              <mec:selectBooleanCheckbox id="indPermiteAnexarDoc" label="#{messages.LABEL_ANEXAR_DOC}" title="#{messages.TITLE_CADASTRO_ANEXAR_DOC}" value="#{manterDadosBasicosExamesController.exame.indPermiteAnexarDoc}" readonly="#{not mf:hasPermission(securityController,'manterDadosBasicosExames,executar') or not mf:hasPermission(securityController,'manterCaracteristicasMateriaisAnalise,executar')}"/> 
            </aghu:linha> 
          </aghu:panelGeral>  
          <p:outputPanel rendered="true" id="panelCadastro" layout="inline"> 
            <aghu:acao> 
              <mec:commandButton id="bt_salvar" value="#{messages.LABEL_GRAVAR_TIPO_DIETA}" requestDelay="2000" ajaxSingle="true" rendered="#{mf:hasPermission(securityController,'manterDadosBasicosExames,executar')}" block="true" action="#{manterDadosBasicosExamesController.confirmar}" profile="ok"/>  
              <mec:commandButton value="#{messages.LABEL_NOVO_MATERIAl_ANALISE}" rendered="#{mf:hasPermission(securityController,'manterCaracteristicasMateriaisAnalise,executar') and manterDadosBasicosExamesController.desabilitarCodigo}" action="exames-manterExamesMaterialAnaliseCRUD" styleClass="bt_cinza"> 
                <f:setPropertyActionListener target="#{manterExamesMaterialAnaliseController.sigla}" value="#{manterDadosBasicosExamesController.exame.sigla}" for="command"/>  
                <f:setPropertyActionListener target="#{manterExamesMaterialAnaliseController.manSeq}" value="#{null}" for="command"/>  
                <f:setPropertyActionListener target="#{manterExamesMaterialAnaliseController.exame}" value="#{manterDadosBasicosExamesController.exame}" for="command"/>  
                <f:setPropertyActionListener target="#{manterExamesMaterialAnaliseController.desabilitarCodigo}" value="false" for="command"/> 
              </mec:commandButton>  
              <mec:commandButton id="btCadastroSinonimo" name="btCadastroSinonimo" rendered="#{mf:hasPermission(securityController,'manterSinonimosExame,pesquisar') and manterDadosBasicosExamesController.desabilitarCodigo}" value="Cadastrar Sinônimo" action="exames-sinonimosExameList" styleClass="bt_cinza"> 
                <f:setPropertyActionListener target="#{sinonimoExamePaginatorController.exame}" value="#{manterDadosBasicosExamesController.exame}" for="command"/> 
              </mec:commandButton>  
              <mec:backButton id="bt_cancelar" value="#{messages.LABEL_CANCELAR}" action="#{manterDadosBasicosExamesController.cancelar}" profile="cancel"/> 
            </aghu:acao> 
          </p:outputPanel> 
        </p:outputPanel> 
      </h:form>  
      <p:outputPanel id="panelMateriaisAnalise" name="panelMateriaisAnalise" rendered="#{manterDadosBasicosExamesController.desabilitarCodigo}" layout="inline"> 
        <h:form prependId="false" id="formMateriaisAnalise" name="formMateriaisAnalise"> 
           <p:accordionPanel id="toggleMateriaisAnalise" name="toggleMateriaisAnalise" style="margin: 5px 0px !important;" prependId="false">  
            <p:tab title="#{messages.LABEL_MATERIAIS_ANALISE}"> 
              <aghu:linha style="margin-top: 3px"> 
                <table width="100%"> 
                  <tr valign="top"> 
                    <td width="89%" rowspan="1" colspan="1"> 
                      <mec:serverDataTable id="tabelaMateriaisAnalise" 
                                           list="#{manterDadosBasicosExamesController.listaMateriaisExame}" 
                                           scrollable="true"
                                           selection="examesMaterialAnaliseSelecionado" 
                                           controller="#{manterDadosBasicosExamesController}"> 
                        <c:set var="_material" value="#{item}"/>  
                        <p:ajax event="rowSelect" update="@(#panelLateralBotoes)" listener="#{manterDadosBasicosExamesController.selecionarMaterialAnalise}"/>
                        <p:column style="width:90px; white-space:nowrap;"> 
                          <f:facet name="header"> 
                            <h:outputText value="#{messages.LABEL_ACAO}"/> 
                          </f:facet>  
                                <mec:commandLink id="excluir" title="#{messages.LABEL_EXCLUIR}" action="#{manterDadosBasicosExamesController.excluir()}" rendered="#{mf:hasPermission(securityController,'manterCaracteristicasMateriaisAnalise,executar')}" profile="delete" ajax="true" process="@this"> 
                                  <f:setPropertyActionListener target="#{manterDadosBasicosExamesController.examesMaterialAnaliseExclusao}" value="#{_material}" for="command"/> 
                                </mec:commandLink> 
                                <mec:commandLink action="exames-manterExamesMaterialAnaliseCRUD" id="editar" title="#{messages.LABEL_EDITAR}" rendered="#{mf:hasPermission(securityController,'manterCaracteristicasMateriaisAnalise,pesquisar')}" profile="edit"> 
                                  <f:setPropertyActionListener target="#{manterExamesMaterialAnaliseController.sigla}" value="#{manterDadosBasicosExamesController.exame.sigla}" for="command"/>  
                                  <f:setPropertyActionListener target="#{manterExamesMaterialAnaliseController.manSeq}" value="#{_material.id.manSeq}" for="command"/>  
                                  <f:setPropertyActionListener target="#{manterExamesMaterialAnaliseController.exame}" value="#{manterDadosBasicosExamesController.exame}" for="command"/>  
                                  <f:setPropertyActionListener target="#{manterExamesMaterialAnaliseController.desabilitarCodigo}" value="#{true}" for="command"/> 
                                </mec:commandLink> 
                        </p:column>
                        <p:column style="width:15%; white-space:nowrap;" id="colunaCodigoMaterialAnalise"> 
                          <f:facet name="header" style="white-space:nowrap;"> 
                            <h:outputText value="#{messages.LABEL_CODIGO}"/> 
                          </f:facet>  
                          <h:outputText value="#{_material.id.manSeq}"/> 
                        </p:column>  
                        <p:column> 
                          <f:facet name="header" style="white-space:nowrap;"> 
                            <h:outputText value="#{messages.LABEL_DESCRICAO_MATERIAL_ANALISE}"/> 
                          </f:facet>  
                          <h:outputText value="#{_material.aelMateriaisAnalises.descricao}"/> 
                        </p:column>  
                        <p:column> 
                          <f:facet name="header" style="white-space:nowrap;"> 
                            <h:outputText value="#{messages.LABEL_SITUACAO}"/> 
                          </f:facet>  
                          <h:outputText value="#{_material.indSituacao.descricao}"/> 
                        </p:column> 
                      </mec:serverDataTable> 
                    </td>  
                    <td width="1%" rowspan="1" colspan="1"/>  
                    <td width="10%" align="center" rowspan="1" colspan="1"> 
                     <aghu:column type="button" id="panelLateralBotoes">
                      <p:outputPanel id="tabelaAcao" layout="inline"> 
                        <div class="menu-direita" style="width: 80%"> 
                          <mec:commandButton id="unidadeExecutora" disabled="#{not mf:hasPermission(securityController,'manterUnidadesExecutorasExames,pesquisar') or manterDadosBasicosExamesController.disableButtonMaterial}" action="exames-manterUnidadesExecutorasExamesCRUD" value="#{messages.LABEL_UNIDADE_EXECUTORA}" styleClass="bt_cinza"> 
                            <f:setPropertyActionListener target="#{manterUnidadesExecutorasExamesController.sigla}" value="#{manterDadosBasicosExamesController.exame.sigla}" for="command"/>  
                            <f:setPropertyActionListener target="#{manterUnidadesExecutorasExamesController.manSeq}" value="#{manterDadosBasicosExamesController.manSeq}" for="command"/> 
                          </mec:commandButton>  
                          <mec:commandButton id="recomendacoes" disabled="#{not mf:hasPermission(securityController,'manterRecomendacoesRealizacaoExame,pesquisar') or manterDadosBasicosExamesController.disableButtonMaterial}" action="exames-manterRecomendacaoRealizacaoExameCRUD" value="#{messages.LABEL_RECOMENDACOES}" styleClass="bt_cinza"> 
                            <f:setPropertyActionListener target="#{manterRecomendacaoRealizacaoExameController.sigla}" value="#{manterDadosBasicosExamesController.exame.sigla}" for="command"/>  
                            <f:setPropertyActionListener target="#{manterRecomendacaoRealizacaoExameController.manSeq}" value="#{manterDadosBasicosExamesController.manSeq}" for="command"/> 
                          </mec:commandButton>  
                          <mec:commandButton disabled="#{not mf:hasPermission(securityController,'manterInformacoesComplementaresVinculadasExame,pesquisar') or manterDadosBasicosExamesController.disableButtonInfoComplementares}" id="infoComplementar" value="#{messages.LABEL_BTN_QUESTIONARIOS}" action="exames-mantemInfoComplementaresVinculadasExame" styleClass="bt_cinza"> 
                            <f:setPropertyActionListener target="#{mantemInfoComplementaresVinculadasExameController.emaExaSigla}" value="#{manterDadosBasicosExamesController.sigla}" for="command"/>  
                            <f:setPropertyActionListener target="#{mantemInfoComplementaresVinculadasExameController.emaManSeq}" value="#{manterDadosBasicosExamesController.manSeq}" for="command"/> 
                          </mec:commandButton>  
                          <mec:commandButton disabled="#{not mf:hasPermission(securityController,'manterNumeroCopiasResultadoExame,pesquisar') or manterDadosBasicosExamesController.disableButtonMaterial}" action="exames-manterNumeroCopiasResultadoExame" id="numCopias" value="#{messages.LABEL_NUM_COPIAS}" styleClass="bt_cinza"> 
                            <f:setPropertyActionListener target="#{manterNumeroCopiasResultadoExameController.exaSigla}" value="#{manterDadosBasicosExamesController.exame.sigla}" for="command"/>  
                            <f:setPropertyActionListener target="#{manterNumeroCopiasResultadoExameController.manSeq}" value="#{manterDadosBasicosExamesController.manSeq}" for="command"/>  
                            <f:setPropertyActionListener target="#{manterNumeroCopiasResultadoExameController.voltarPara}" value="exames-manterDadosBasicosExamesCRUD" for="command"/> 
                          </mec:commandButton>  
                          <mec:commandButton id="horarioColeta" disabled="#{not mf:hasPermission(securityController,'manterHorarioColetaExame,pesquisar') or manterDadosBasicosExamesController.disableButtonMaterial}" action="exames-manterHorarioColetaExameCRUD" value="#{messages.LABEL_HORARIO_COLETA}" styleClass="bt_cinza"> 
                            <f:setPropertyActionListener target="#{manterHorarioColetaExameController.sigla}" value="#{manterDadosBasicosExamesController.exame.sigla}" for="command"/>  
                            <f:setPropertyActionListener target="#{manterHorarioColetaExameController.manSeq}" value="#{manterDadosBasicosExamesController.manSeq}" for="command"/> 
                          </mec:commandButton>  
                          <mec:commandButton id="intervaloColeta" disabled="#{not mf:hasPermission(securityController,'manterIntervaloColeta,pesquisar') or manterDadosBasicosExamesController.disableButtonMaterial}" action="exames-manterIntervaloColetaCRUD" value="#{messages.LABEL_INTERVALO_COLETA}" styleClass="bt_cinza"> 
                            <f:setPropertyActionListener target="#{manterIntervaloColetaController.siglaExame}" value="#{manterDadosBasicosExamesController.exame.sigla}" for="command"/>  
                            <f:setPropertyActionListener target="#{manterIntervaloColetaController.codigoMaterial}" value="#{manterDadosBasicosExamesController.manSeq}" for="command"/> 
                          </mec:commandButton>  
                          <mec:commandButton id="dependentes" disabled="#{not mf:hasPermission(securityController,'manterExamesDependentes,pesquisar') or manterDadosBasicosExamesController.disableButtonMaterial}" action="exames-manterExamesMaterialDependenteCRUD" value="#{messages.LABEL_DEPENDENTES}" styleClass="bt_cinza"> 
                            <f:setPropertyActionListener target="#{manterExamesMaterialDependenteController.sigla}" value="#{manterDadosBasicosExamesController.exame.sigla}" for="command"/>  
                            <f:setPropertyActionListener target="#{manterExamesMaterialDependenteController.manSeq}" value="#{manterDadosBasicosExamesController.manSeq}" for="command"/> 
                          </mec:commandButton>  
                          <mec:commandButton id="provas" disabled="#{not mf:hasPermission(securityController,'manterProvasExame,pesquisar') or manterDadosBasicosExamesController.disableButtonMaterial}" action="exames-manterProvaExameCRUD" value="#{messages.LABEL_PROVAS}" styleClass="bt_cinza"> 
                            <f:setPropertyActionListener target="#{manterProvaExameController.sigla}" value="#{manterDadosBasicosExamesController.exame.sigla}" for="command"/>  
                            <f:setPropertyActionListener target="#{manterProvaExameController.manSeq}" value="#{manterDadosBasicosExamesController.manSeq}" for="command"/> 
                          </mec:commandButton>  
                          <mec:commandButton id="conselhos" disabled="#{not mf:hasPermission(securityController,'manterConselhosProfissionaisExame,pesquisar') or manterDadosBasicosExamesController.disableButtonMaterial}" action="exames-manterConselhosProfissionaisExameCRUD" value="#{messages.LABEL_CONSELHOS}" styleClass="bt_cinza"> 
                            <f:setPropertyActionListener target="#{manterConselhosProfissionaisExameController.sigla}" value="#{manterDadosBasicosExamesController.exame.sigla}" for="command"/>  
                            <f:setPropertyActionListener target="#{manterConselhosProfissionaisExameController.manSeq}" value="#{manterDadosBasicosExamesController.manSeq}" for="command"/> 
                          </mec:commandButton>  
                          <mec:commandButton disabled="#{not mf:hasPermission(securityController,'manterEquipamentosExecutamExame,pesquisar') or manterDadosBasicosExamesController.disableButtonMaterial}" id="equipamentos" action="exames-manterEquipamentosExecutamExame" value="#{messages.LABEL_EQUIPAMENTOS}" styleClass="bt_cinza"> 
                            <f:setPropertyActionListener target="#{manterEquipamentosExecutamExameController.exaSigla}" value="#{manterDadosBasicosExamesController.exame.sigla}" for="command"/>  
                            <f:setPropertyActionListener target="#{manterEquipamentosExecutamExameController.manSeq}" value="#{manterDadosBasicosExamesController.manSeq}" for="command"/> 
                          </mec:commandButton>  
                          <mec:commandButton disabled="#{not mf:hasPermission(securityController,'manterExameReflexo,pesquisar') or manterDadosBasicosExamesController.disableButtonMaterial}" id="exameReflexo" action="exames-manterExameReflexo" value="#{messages.LABEL_EXAME_REFLEXO}" styleClass="bt_cinza"> 
                            <f:setPropertyActionListener target="#{cadastroExameReflexoController.exaSigla}" value="#{manterDadosBasicosExamesController.exame.sigla}" for="command"/>  
                            <f:setPropertyActionListener target="#{cadastroExameReflexoController.manSeq}" value="#{manterDadosBasicosExamesController.manSeq}" for="command"/> 
                          </mec:commandButton> 
                          <mec:commandButton id="exameVincularAPAC"
							includePageParams="false"
							rendered="#{mf:hasPermission(securityController,'vincularAPAC,criar')}"
							disabled="#{not manterDadosBasicosExamesController.habilitaVinculacaoAPAC()}"
							action="#{manterDadosBasicosExamesController.cadastraPHI()}"
							value="#{messages.LABEL_VINCULAR_PROCEDIMENTO_APAC}" >
						 </mec:commandButton>
                        </div> 
                      </p:outputPanel> 
                     </aghu:column>
                    </td> 
                  </tr> 
                </table> 
              </aghu:linha> 
            </p:tab> 
          </p:accordionPanel> 
        </h:form> 
      </p:outputPanel>  
    </ui:define> 
  </ui:composition> 
</html>