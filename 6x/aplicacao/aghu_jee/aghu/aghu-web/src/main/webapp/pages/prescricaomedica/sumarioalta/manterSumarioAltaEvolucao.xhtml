<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
	xmlns:mec="http://xmlns.jcp.org/jsf/composite/components"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:aghu="http://xmlns.jcp.org/jsf/component"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:mf="http://www.mec.gov.br/taglib">
<ui:composition>
	<h:form prependId="false" id="formEvolucao">
		<aghu:panelGeral
			legend="#{messages.LABEL_EVOLUCAO} - #{manterSumarioAltaController.prontuarioFormatado} - #{manterSumarioAltaController.altaSumario.nome}">
			<p:outputPanel
				rendered="#{manterSumarioAltaController.altanListaOrigem == 'ALTA'}"
				layout="inline">
				<aghu:linha>
					<mec:selectOneMenu id="estadoClinicoPaciente" 
						label="#{messages.LABEL_ESTADO_CLINICO_PACIENTE}"
						value="#{manterSumarioAltaController.altaEvolucaoEstadoPaciente.estadoPaciente}"
						title="Selecione o campo estado clinico do paciente."
						noSelectionOption="true" requiredFake="true"
						items="#{manterSumarioAltaController.listaEstadosClinicos}"
						itemLabel="descricaoEditada"
						style="width: calc(100% - 14px)!important;" >  
						<p:ajax event="change" 
		          	        listener="#{manterSumarioAltaController.gravarEstadoPaciente}"
		                    process="@this" 
		                    update="@this"
		                    ajax="true"/>
              	 	</mec:selectOneMenu>
				</aghu:linha>
			</p:outputPanel>
			<p:outputPanel
				rendered="#{manterSumarioAltaController.altanListaOrigem == 'OBITO'}"
				layout="inline">
				<aghu:linha>
					<mec:selectOneMenu id="situacaoSaidaPaciente" 
						label="#{messages.LABEL_SITUACAO_SAIDA_PACIENTE}"
						value="#{manterSumarioAltaController.altaEvolucaoEstadoPaciente.estadoPaciente}"
						title="Selecione o campo situação de saída do paciente."
						noSelectionOption="true" requiredFake="true"
						style="width: 180px"
						items="#{manterSumarioAltaController.listaEstadosClinicos}"
						itemLabel="descricaoEditada" >  
						<p:ajax event="change" 
		          	        listener="#{manterSumarioAltaController.gravarEstadoPaciente}"
		                    process="@this" 
		                    update="@this"
		                    ajax="true"/>
              	 	</mec:selectOneMenu>
				</aghu:linha>
			</p:outputPanel>

			<aghu:linha>
				<mec:inputTextArea cols="120" rows="15"
					value="#{manterSumarioAltaController.altaEvolucaoEstadoPaciente.descricao}"
					readonly="false" requiredFake="true"
					title="Digite a evolução do paciente."
					label="#{messages.LABEL_DESCRICAO_EVOLUCAO_PACIENTE}"
					id="evolucaoPacienteDescricao"
                    autoResize="false"    >
                    <p:ajax event="change" 
		          	        listener="#{manterSumarioAltaController.gravarDescricaoEvo}"
		                    process="@this" 
		                    update="@this"
		                    ajax="true"/>
		        </mec:inputTextArea>
			</aghu:linha>
		</aghu:panelGeral>
		
		<aghu:acao style="margin-bottom: 0 !important">
		
			<mec:commandButton id="btGravarEvolucaoEstado"
				value="#{messages.LABEL_GRAVAR}"
				action="#{manterSumarioAltaController.gravarEvolucaoEstado}"
				profile="ok" ajax="true" render="formEvolucaoForm" />
		</aghu:acao>
		
	</h:form>
</ui:composition>
</html>
