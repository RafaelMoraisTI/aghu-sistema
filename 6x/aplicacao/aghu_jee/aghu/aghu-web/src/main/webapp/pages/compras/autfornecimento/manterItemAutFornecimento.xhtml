<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:aghu="http://xmlns.jcp.org/jsf/component" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:mf="http://www.mec.gov.br/taglib">  
  <ui:composition template="/WEB-INF/templates/form_template.xhtml"> 
    <ui:define name="head"> 
      <style xml:space="preserve">        
        .valign { vertical-align:top; } 
        .panel{ border: 0px; background: white;}   
        .panel-indicadores{ border: 0px;}   
        .panel-indicadores-body{padding: 0px;}   
     </style>  
      <title>#{messages.TITLE_MANTER_ITENS_AUT_FORN} :: #{messages.NOME_ABREVIADO_PROJETO}</title> 
    </ui:define>  
    <ui:define name="metadata"> 
      <f:metadata> 
        <f:viewAction action="#{mantemItemAutFornecimentoController.inicio}"/> 
      </f:metadata> 
    </ui:define>  
    <ui:define name="body"> 
      <mec:pageConfig controller="#{mantemItemAutFornecimentoController}" ignoreEnter="true"/>  
      <p:outputPanel id="panelCorpoPagina"> 
        <h:form prependId="false" id="formAutItemFornec"> 
         <p:panelGrid>
         <p:row>
            <p:column colspan="2">
          <aghu:panelGeral legend="#{messages.TITLE_MANTER_ITENS_AUT_FORN}"> 
            <aghu:linha> 
              <mec:inputText label="#{messages.LABEL_CONS_NUMERO_AF}" id="numeroAFComplemento" size="10" readonly="true" value="#{mantemItemAutFornecimentoController.numeroAf} / #{mantemItemAutFornecimentoController.numeroComplemento}"/>  
              <mec:inputText label="#{messages.LABEL_DESCRICAO_FORNECEDOR}" id="descricaoFornecedor" size="70" readonly="true" value="#{mantemItemAutFornecimentoController.fornecedor.razaoSocial}"/>  
              <mec:inputText label="#{messages.LABEL_SITUACAO_PESQUISA_AF}" id="descricaoSituacao" size="30" readonly="true" value="#{mantemItemAutFornecimentoController.situacaoAf.getDescricao()}"/>  
              <mec:inputText label="#{messages.LABEL_MODALIDADE_COMPRA}" id="descricaoModalidade" size="20" readonly="true" value="#{mantemItemAutFornecimentoController.modalidadeCompra.descricao}"/>  
              <mec:inputTextData label="#{messages.LABEL_DATA_GERACAO}" id="dataGeracao" size="10" readonly="true" value="#{mantemItemAutFornecimentoController.dataGeracao}" tipo="data"/> 
            </aghu:linha>  
            <aghu:linha> 
              <mec:inputText label="#{messages.LABEL_PESQ_GRID_ITENS_AUT}" id="numeroAFComplementoLicitacao" size="10" readonly="true" value="#{mantemItemAutFornecimentoController.itemAutorizacaoFornVO.numeroLicitacao}"/>  
              <mec:inputText label="#{messages.LABEL_PESQ_GRID_ITENS_AUT_DESCR}" id="numeroAFComplementoMaterialSer" size="50" readonly="true" value="#{mantemItemAutFornecimentoController.obterCodigoDescricaoMaterialServico()}"/>  
              <mec:inputText label="#{messages.LABEL_PESQ_GRID_ITENS_AUT_UNI}" id="numeroAFComplementoUnd" size="3" readonly="true" value="#{mantemItemAutFornecimentoController.itemAutorizacaoFornVO.unidadeMedida.codigo}"/>  
              <mec:inputText label="#{messages.LABEL_PESQ_GRID_ITENS_AUT_FATOR_CONVER}" id="numeroAFComplementofatorConver" size="3" readonly="true" value="#{mantemItemAutFornecimentoController.itemAutorizacaoFornVO.fatorConversao}"/>  
              <mec:inputText label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_SITUACAO_ITEM}" id="numeroAFComplementoSituacao" size="20" readonly="true" value="#{mantemItemAutFornecimentoController.itemAutorizacaoFornVO.indSituacao.descricao}"/>  
              <mec:inputText label="#{messages.LABEL_PESQ_GRID_ITENS_AUT_QTDE_AF}" id="numeroAFComplementoQtdeAf" size="10" readonly="true" value="#{mantemItemAutFornecimentoController.itemAutorizacaoFornVO.qtdeSolicitada}"/>  
              <mec:inputText label="#{messages.LABEL_PESQ_GRID_ITENS_AUT_QTDE_EF}" id="numeroAFComplementoQtdeEF" size="10" readonly="true" value="#{mantemItemAutFornecimentoController.itemAutorizacaoFornVO.qtdeRecebida}"/> 
            </aghu:linha> 
          </aghu:panelGeral>  
          </p:column>
          </p:row>    
          <p:row>      
           <p:column>  
             <p:panelGrid>
                 <f:facet name="header">
                      <h:outputText value="#{messages.TITLE_MANTER_ITENS_AUT_FORN_DET_ITEM}"/>      
                 </f:facet>         
         
            <p:column style="width:700px">
            <aghu:linha> 
              <p:outputPanel id="panelMarcaComercial" layout="inline"> 
                <mec:suggestionBox id="sbMarcaComercial" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_MARCA}" title="#{messages.TITLE_MANTER_ITENS_AUT_FORN_DET_MARCA}" descricaoInput="codigo" descricaoLabel="descricao" posDeleteAction="limparModeloComercial" suggestionAction="pesquisarMarcaComercial" readonly="#{not empty mantemItemAutFornecimentoController.modeloComercial or mantemItemAutFornecimentoController.desabilitarEdicaoItem or mantemItemAutFornecimentoController.desabilitarItemEdicaoSS}" required="true" controller="#{mantemItemAutFornecimentoController}" value="#{mantemItemAutFornecimentoController.marcaComercial}" render="panelModelo"> 
                  <p:column> 
                    <f:facet name="header"> 
                      <b>#{messages.LABEL_CODIGO}</b> 
                    </f:facet> #{item.codigo}
                  </p:column>  
                  <p:column> 
                    <f:facet name="header"> 
                      <b>#{messages.LABEL_DESCRICAO}</b> 
                    </f:facet> #{item.descricao}
                  </p:column> 
                </mec:suggestionBox> 
              </p:outputPanel>  
              <p:outputPanel id="panelModelo" layout="inline"> 
                <mec:suggestionBox id="sbModelo" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_MODELO}" title="#{messages.TITLE_MANTER_ITENS_AUT_FORN_DET_MODELO}" required="false" descricaoInput="id.seqp" descricaoLabel="descricao" suggestionAction="pesquisarMarcaModeloPorCodigoDescricao" readonly="#{(empty mantemItemAutFornecimentoController.marcaComercial) or mantemItemAutFornecimentoController.desabilitarEdicaoItem or mantemItemAutFornecimentoController.desabilitarItemEdicaoSS}" controller="#{mantemItemAutFornecimentoController}" value="#{mantemItemAutFornecimentoController.modeloComercial}" render="panelMarcaComercial"> 
                  <p:column>#{item.id.seqp}</p:column>  
                  <p:column>#{item.descricao}</p:column> 
                </mec:suggestionBox> 
              </p:outputPanel>  
              <p:outputPanel id="panelUnidadeFornec" layout="inline"> 
                <mec:suggestionBox id="sbUnidadeFornec" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_UN_FORN}" title="#{messages.TITLE_MANTER_ITENS_AUT_FORN_DET_UN_FORN}" size="10" descricaoInput="codigo" descricaoLabel="descricao" suggestionAction="pesquisarUnidadeMedidaPorCodigoDescricao" readonly="#{mantemItemAutFornecimentoController.desabilitarEdicaoItem or mantemItemAutFornecimentoController.desabilitarItemEdicaoSS}" controller="#{mantemItemAutFornecimentoController}" value="#{mantemItemAutFornecimentoController.umdCodigoForn}" render="panelFCFornecedor"> 
                  <p:column> 
                    <f:facet name="header"> 
                      <b>#{messages.LABEL_UNIDADE}</b> 
                    </f:facet> #{item.codigo}
                  </p:column>  
                  <p:column> 
                    <f:facet name="header"> 
                      <b>#{messages.LABEL_DESCRICAO}</b> 
                    </f:facet> #{item.descricao}
                  </p:column> 
                </mec:suggestionBox> 
              </p:outputPanel>  
              <p:outputPanel id="panelFCFornecedor" layout="inline"> 
                <mec:inputNumero id="fatorConversaoForn" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_FC_FORN}" title="#{messages.TITLE_MANTER_ITENS_AUT_FORN_DET_FC_FORN}" value="#{mantemItemAutFornecimentoController.fatorConversaoForn}" size="10" readonly="#{mantemItemAutFornecimentoController.desabilitarEdicaoItem or mantemItemAutFornecimentoController.desabilitarItemEdicaoSS or mantemItemAutFornecimentoController.desabilitarEdicaoFCForn}"> 
                  <p:ajax event="change" eventsQueue="storeQueue" process="@this"/> 
                </mec:inputNumero> 
              </p:outputPanel>  
              <mec:inputText label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_UN_EST_FORN}" title="#{messages.TITLE_MANTER_ITENS_AUT_FORN_DET_UN_EST_FORN}" id="unidadeMedida" size="10" readonly="true" value="#{mantemItemAutFornecimentoController.unidadeMedida.descricao}"/> 
            </aghu:linha>  
            <aghu:linha> 
                <mec:inputNumero id="qtdeSaldo" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_SALDO_FORN}" readonly="true" value="#{mantemItemAutFornecimentoController.obterQtdeSaldoItemAF()}" size="12"/>  
                <mec:inputNumero id="vlrUnitario" value="#{mantemItemAutFornecimentoController.valorUnitario}" label="#{mantemItemAutFornecimentoController.isSc ? messages.LABEL_MANTER_ITENS_AUT_FORN_DET_VLR_UNIT_FORN : messages.LABEL_MANTER_ITENS_AUT_FORN_DET_VLR_UNIT_FORN_SS}" required="false" inteiros="11" decimais="4" styleClass="mascara(decimal)" style="text-align:right; width: 110px;" readonly="true"/>  
                <mec:inputNumero id="vlrBruto" value="#{mantemItemAutFornecimentoController.obterValorBrutoItemAF()}" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_VLR_BRUTO_FORN}" required="false" inteiros="12" decimais="2" styleClass="mascara(decimal)" style="text-align:right; width: 110px;" readonly="true"/>  
                <p:outputPanel id="panelVlrSaldo" layout="inline"> 
                  <mec:inputNumero id="valorSaldo" value="#{mantemItemAutFornecimentoController.obterValorSaldoItemAF()}" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_VLR_SALDO_FORN}" required="false" inteiros="12" decimais="2" styleClass="mascara(decimal)" style="text-align:right; width: 110px;" readonly="true"/> 
                </p:outputPanel> 
              </aghu:linha>  
              <aghu:linha> 
                <mec:inputNumero id="perDescontoItem" value="#{mantemItemAutFornecimentoController.percDescontoItem}" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_DESC_FORN}" title="#{messages.TITLE_MANTER_ITENS_AUT_FORN_DET_DESC_FORN}" required="false" inteiros="10" decimais="2" styleClass="mascara(decimal)" style="text-align:right;" readonly="#{mantemItemAutFornecimentoController.desabilitarEdicaoItem}"> 
                  <p:ajax event="change" eventsQueue="storeQueue" update="@(#panelVlrDesconto) @(#panelVlrTotal) @(#panelVlrIPI) @(#panelVlrSaldo)"/> 
                </mec:inputNumero>  
                <mec:inputNumero id="perDescontoCondPag" value="#{mantemItemAutFornecimentoController.percDesconto}" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_DESC_COND_PAG_FORN}" title="#{messages.TITLE_LABEL_ITENS_AUT_FORN_DET_DESC_COND_PAG_FORN}" required="false" inteiros="13" decimais="2" styleClass="mascara(decimal)" style="text-align:right; width: 110px;" readonly="#{mantemItemAutFornecimentoController.desabilitarEdicaoItem}"> 
                  <p:ajax event="change" eventsQueue="storeQueue" update="@(#panelVlrDesconto) @(#panelVlrTotal) @(#panelVlrIPI) @(#panelVlrSaldo)"/> 
                </mec:inputNumero>  
                <p:outputPanel id="panelVlrDesconto" layout="inline"> 
                  <mec:inputNumero id="valorDesconto" value="#{mantemItemAutFornecimentoController.obterValorDescontoItemAF()}" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_VLR_DESC_FORN}" required="false" inteiros="12" decimais="2" styleClass="mascara(decimal)" style="text-align:right; width: 110px;" readonly="true"/> 
                </p:outputPanel>  
                <mec:inputNumero id="valorEfetivado" value="#{mantemItemAutFornecimentoController.valorEfetivado}" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_VLR_EFET_FORN}" required="false" inteiros="12" decimais="2" styleClass="mascara(decimal)" style="text-align:right; width: 110px;" readonly="true"/> 
              </aghu:linha>  
              <aghu:linha> 
                <mec:inputNumero id="perAcrescimoItem" value="#{mantemItemAutFornecimentoController.percAcrescimoItem}" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_ACRES_FORN}" title="#{messages.TITLE_MANTER_ITENS_AUT_FORN_DET_ACRES_FORN}" required="false" inteiros="10" decimais="2" styleClass="mascara(decimal)" style="text-align:right; width: 75px;" readonly="#{mantemItemAutFornecimentoController.desabilitarEdicaoItem}"> 
                  <p:ajax event="change" eventsQueue="storeQueue" update="@(#panelVlrAcrescimo) @(#panelVlrTotal) @(#panelVlrIPI) @(#panelVlrSaldo)" process="@this"/> 
                </mec:inputNumero>  
                <mec:inputNumero id="perAcrescimoCondPag" value="#{mantemItemAutFornecimentoController.percAcrescimo}" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_ACRES_COND_PAG_FORN}" title="#{messages.TITLE_MANTER_ITENS_AUT_FORN_DET_ACRES_COND_PAG_FORN}" required="false" inteiros="13" decimais="2" styleClass="mascara(decimal)" style="text-align:right; width: 110px;" readonly="#{mantemItemAutFornecimentoController.desabilitarEdicaoItem}"> 
                  <p:ajax event="change" eventsQueue="storeQueue" update="@(#panelVlrAcrescimo) @(#panelVlrTotal) @(#panelVlrIPI) @(#panelVlrSaldo)" process="@this"/> 
                </mec:inputNumero>  
                <p:outputPanel id="panelVlrAcrescimo" layout="inline"> 
                  <mec:inputNumero id="valorAcrescimo" value="#{mantemItemAutFornecimentoController.obterValorAcrescimoItemAF()}" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_VLR_ACRES_FORN}" required="false" inteiros="12" decimais="2" styleClass="mascara(decimal)" style="text-align:right; width: 110px;" readonly="true"/> 
                </p:outputPanel>  
                <p:outputPanel id="panelVlrTotal" layout="inline"> 
                  <mec:inputNumero id="valorTotal" value="#{mantemItemAutFornecimentoController.obterValorTotalItemAF()}" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_VLR_TOTAL_FORN}" required="false" inteiros="12" decimais="2" styleClass="mascara(decimal)" style="text-align:right; width: 110px;" readonly="true"/> 
                </p:outputPanel> 
              </aghu:linha>  
              <aghu:linha> 
                <mec:inputNumero id="percVarPrecoItem" value="#{mantemItemAutFornecimentoController.percVarPreco}" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_VARIACAO_FORN}" title="#{messages.TITLE_MANTER_ITENS_AUT_FORN_DET_VARIACAO_FORN}" required="false" inteiros="10" decimais="2" styleClass="mascara(decimal)" style="text-align:right; width: 75px;" readonly="#{mantemItemAutFornecimentoController.desabilitarEdicaoItem}"> 
                  <p:ajax event="change" eventsQueue="storeQueue" process="@this"/> 
                </mec:inputNumero>  
                <mec:inputNumero id="percIpi" value="#{mantemItemAutFornecimentoController.percIpi}" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_IPI_FORN}" title="#{messages.TITLE_MANTER_ITENS_AUT_FORN_DET_IPI_FORN}" required="false" inteiros="13" decimais="2" styleClass="mascara(decimal)" style="text-align:right; width: 110px;" readonly="#{mantemItemAutFornecimentoController.desabilitarEdicaoItem}"> 
                  <p:ajax event="change" eventsQueue="storeQueue" update="@(#panelVlrIPI) @(#panelVlrTotal) @(#panelVlrSaldo)" process="@this"/> 
                </mec:inputNumero>  
                <p:outputPanel id="panelVlrIPI" layout="inline"> 
                  <mec:inputNumero id="valorIpi" value="#{mantemItemAutFornecimentoController.obterValorIpiItemAF()}" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_VLR_IPI_FORN}" required="false" inteiros="12" decimais="2" styleClass="mascara(decimal)" style="text-align:right; width: 110px;" readonly="true"/> 
                </p:outputPanel> 
              </aghu:linha>              
             <p:column>
             <p:panelGrid columns="2">
                 <f:facet name="header">
                      <h:outputText value="#{messages.TITLE_MANTER_ITENS_AUT_FORN_INDICADORES_FORN}"/>      
                 </f:facet>
               
             
                <mec:selectBooleanCheckbox id="indExclusao" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_IND_EX_FORN}" posicaoLabel="direita" value="#{mantemItemAutFornecimentoController.indExclusao}" readonly="true"/> 
                <mec:selectBooleanCheckbox id="indRecebimento" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_IND_RC_FORN}" posicaoLabel="direita" value="#{mantemItemAutFornecimentoController.indRecebimento}" readonly="true"/> 
             
             
               <p:outputPanel id="panelConsignado"> 
                  <mec:selectBooleanCheckbox id="indConsignado" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_IND_CG_FORN}" posicaoLabel="direita" value="#{mantemItemAutFornecimentoController.indConsignado}" readonly="#{(mantemItemAutFornecimentoController.desabilitarEdicaoItem or mantemItemAutFornecimentoController.desabilitarItemEdicaoSS) or !mantemItemAutFornecimentoController.indContrato}"> 
                    <p:ajax event="change" update="@(#panelConsignado)" process="@this" listener="#{mantemItemAutFornecimentoController.validarConsignadoItemAF(true)}"/> 
                  </mec:selectBooleanCheckbox> 
                </p:outputPanel> 
              
                <mec:selectBooleanCheckbox id="indPreferencialCum" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_IND_PC_FORN}" posicaoLabel="direita" value="#{mantemItemAutFornecimentoController.indPreferencialCum}" readonly="true"/> 
              
                <p:outputPanel id="panelEstorno" > 
                  <mec:selectBooleanCheckbox id="indEstorno" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_IND_ES_FORN}" posicaoLabel="direita" value="#{mantemItemAutFornecimentoController.indEstorno}" readonly="#{mantemItemAutFornecimentoController.desabilitarEdicaoItem}"> 
                    <p:ajax event="change" update="@(#panelEstorno)" process="@this" listener="#{mantemItemAutFornecimentoController.validarEstornoItemAF(true)}"/> 
                  </mec:selectBooleanCheckbox> 
                </p:outputPanel> 
              
                <mec:selectBooleanCheckbox id="indContrato" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_IND_HP_FORN}" posicaoLabel="direita" value="#{mantemItemAutFornecimentoController.indContrato}" readonly="true"/> 
               
                <mec:selectBooleanCheckbox id="indProgrEntgAuto" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_IND_PR_FORN}" posicaoLabel="direita" value="#{mantemItemAutFornecimentoController.indProgrEntgAuto}" readonly="#{mantemItemAutFornecimentoController.desabilitarEdicaoItem}"/> 
               
                <mec:selectBooleanCheckbox id="indAnaliseProgrPlanej" label="#{messages.LABEL_MANTER_ITENS_AUT_FORN_DET_IND_PI_FORN}" posicaoLabel="direita" value="#{mantemItemAutFornecimentoController.indAnaliseProgrPlanej}" readonly="#{mantemItemAutFornecimentoController.desabilitarEdicaoItem or mantemItemAutFornecimentoController.desabilitarItemEdicaoSS}"/> 
             
            </p:panelGrid>   
           </p:column>
            </p:column>
            </p:panelGrid>  
          
          
          </p:column>
          </p:row>
          </p:panelGrid>  
          <aghu:acao> 
            <mec:commandButton id="bt_alterar" value="#{messages.LABEL_ALTERAR}" rendered="#{!mantemItemAutFornecimentoController.desabilitarEdicaoItem}" action="#{mantemItemAutFornecimentoController.alterar}" profile="ok"/>  
            <mec:commandButton id="bt_cancEdicItemServAut" value="#{messages.LABEL_CANCEL_EDI}" action="#{mantemItemAutFornecimentoController.cancelar}" profile="cancel" ajax="true" process="@this"/> 
          </aghu:acao> 
        </h:form> 
      </p:outputPanel> 
    </ui:define> 
  </ui:composition> 
</html>
