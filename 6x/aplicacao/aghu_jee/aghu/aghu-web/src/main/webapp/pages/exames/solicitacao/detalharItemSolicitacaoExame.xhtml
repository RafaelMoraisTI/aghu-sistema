<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:aghu="http://xmlns.jcp.org/jsf/component" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:mf="http://www.mec.gov.br/taglib">  
  <ui:composition template="/WEB-INF/templates/form_template.xhtml"> 
    <ui:define name="head"> 
      <title>#{messages.TITULO_DETALHE_ITEM_SOLICITACAO_EXAME}</title> 
    </ui:define>  
    <ui:define name="jsReady">
    	if(#{detalharItemSolicitacaoExameController.origemPOL}){
    		parent.hideModalPOL();
    	}
    </ui:define>
    <ui:define name="metadata"> 
      <f:metadata> 
        <f:viewAction action="#{detalharItemSolicitacaoExameController.inicio}"/> 
      </f:metadata> 
      
    </ui:define>  
    <ui:define name="body"> 
      <mec:pageConfig controller="#{detalharItemSolicitacaoExameController}"/>  
      <h:form prependId="false" id="formDetalhesSolicitacao" name="formDetalhesSolicitacao"> 
        <aghu:panelGeral legend="#{messages.LABEL_SOLICITACAO}"> 
          <aghu:linha> 
            <mec:inputText id="numero" label="#{messages.LABEL_NUMERO_DET_SOLICITACAO}" value="#{detalharItemSolicitacaoExameController.solicitacaoVO.solicitacaoExameSeq}" readonly="true" size="22"/>  
            <mec:inputText label="#{messages.LABEL_DATA_HORA}" value="#{detalharItemSolicitacaoExameController.solicitacaoVO.solicitacaoExameCriadoEm}" readonly="true" size="22" datePattern="dd/MM/yyyy HH:mm" id="dataHora"/> 
          </aghu:linha>  
          <aghu:linha> 
            <mec:inputText id="solicitante" label="#{messages.LABEL_NOME_SOLICITANTE}" value="#{detalharItemSolicitacaoExameController.pessoaFisica}" size="70" readonly="true"/>  
            <mec:inputText id="conselhoSolicitante" label="#{messages.LABEL_CONSELHO_SOLICITANTE}" value="#{detalharItemSolicitacaoExameController.siglaConselhoProf}" size="20" readonly="true"/>  
            <mec:inputText id="nroConselhoSolicitante" label="#{messages.LABEL_NRO_CONSELHO_SOLICITANTE}" value="#{detalharItemSolicitacaoExameController.solicitacaoVO.nroRegConselhoQualificacaoSolicitante}" size="20" readonly="true"/> 
          </aghu:linha>  
          <aghu:linha> 
            <mec:inputText id="responsavel" label="#{messages.LABEL_NOME_RESPONSAVEL}" value="#{detalharItemSolicitacaoExameController.pessoaFisicaResp}" size="70" readonly="true"/>  
            <mec:inputText id="conselhoResponsavel" label="#{messages.LABEL_CONSELHO_RESPONSAVEL}" value="#{detalharItemSolicitacaoExameController.siglaConselhoProfResp}" size="20" readonly="true"/>  
            <mec:inputText id="nroConselhoResponsavel" label="#{messages.LABEL_NRO_CONSELHO_RESPONSAVEL}" value="#{detalharItemSolicitacaoExameController.solicitacaoVO.nroRegConselhoQualificacaoResponsavel}" size="20" readonly="true"/> 
          </aghu:linha>  
          <aghu:linha> 
            <mec:inputText id="unidadeSolicitante" label="#{messages.LABEL_UNIDADE_SOLICITANTE}" value="#{detalharItemSolicitacaoExameController.andarAlaDescricao}" size="70" readonly="true"/> 
          </aghu:linha>  
          <aghu:linha> 
            <mec:inputTextArea label="#{messages.LABEL_INF_CLINICAS}" id="infClinicas" rows="3" cols="125" value="#{detalharItemSolicitacaoExameController.informacoesClinicas}" disabled="true" maxlength="2000"/> 
          </aghu:linha> 
        </aghu:panelGeral>  
        <aghu:panelGeral legend="#{messages.LABEL_PACIENTE}"> 
          <aghu:linha> 
            <mec:inputText id="codPaciente" label="#{messages.LABEL_COD_PACIENTE}" value="#{detalharItemSolicitacaoExameController.pacienteVO.codigoPaciente}" size="22" readonly="true"/>  
            <mec:inputText id="nomePaciente" label="#{messages.LABEL_NOME_PACIENTE}" value="#{detalharItemSolicitacaoExameController.pacienteVO.nomePaciente}" size="70" readonly="true"/>  
            <mec:inputText id="prontuario" label="#{messages.LABEL_PRONTUARIO}" value="#{detalharItemSolicitacaoExameController.pacienteVO.prontuarioPaciente}" size="22" readonly="true"/> 
          </aghu:linha>  
          <aghu:linha> 
            <mec:inputText id="sexoPaciente" label="#{messages.LABEL_SEXO_PACIENTE}" value="#{detalharItemSolicitacaoExameController.pacienteVO.sexoBiologico}" size="22" readonly="true"/>  
            <mec:inputText id="nascimentoPaciente" label="#{messages.LABEL_NASCIMENTO_PACIENTE}" size="10" maxlength="10" readonly="true" value="#{detalharItemSolicitacaoExameController.pacienteVO.dtNascimento}" datePattern="dd/MM/yyyy"/>  
            <mec:inputText id="idadePaciente" label="#{messages.LABEL_IDADE_PACIENTE}" value="#{detalharItemSolicitacaoExameController.pacienteVO.idadeAnoMesFormat}" size="22" readonly="true"/>  
            <mec:inputText id="origemPaciente" label="#{messages.LABEL_ORIGEM_PACIENTE}" value="#{detalharItemSolicitacaoExameController.pacienteVO.origem}" size="22" readonly="true"/>  
            <mec:inputText id="localPaciente" label="#{messages.LABEL_LOCAL_PACIENTE}" value="#{detalharItemSolicitacaoExameController.pacienteVO.local}" size="22" readonly="true"/>  
            <mec:inputText id="consultaPaciente" label="#{messages.LABEL_CONSULTA_PACIENTE}" value="#{detalharItemSolicitacaoExameController.pacienteVO.consulta}" size="22" readonly="true"/> 
          </aghu:linha> 
        </aghu:panelGeral>  
        <aghu:panelGeral legend="#{messages.LABEL_EXAMES}"> 
          <aghu:linha> 
            <mec:inputText id="itemExames" label="#{messages.LABEL_ITEM_EXAMES}" value="#{detalharItemSolicitacaoExameController.exameVO.itemSolicitacaoExamesIdSeqp}" size="22" readonly="true"/>  
            <mec:inputText id="nomeExames" label="#{messages.LABEL_NOME_EXAMES}" value="#{detalharItemSolicitacaoExameController.exameVO.nomeUsualExamesMaterialAnalise}" size="70" readonly="true"/> 
          </aghu:linha>  
          <aghu:linha> 
            <mec:inputText id="situacaoExames" label="#{messages.LABEL_SITUACAO_EXAMES}" value="#{detalharItemSolicitacaoExameController.exameVO.descricaoSituacaoItemSolicitacao}" size="22" readonly="true"/>  
            <mec:inputText id="tipoColetaExames" label="#{messages.LABEL_TIPO_COLETA_EXAMES}" size="10" maxlength="10" readonly="true" value="#{detalharItemSolicitacaoExameController.exameVO.tipoColeta}"/>  
            <mec:inputText id="transporteExames" label="#{messages.LABEL_TRANSPORTE_EXAMES}" value="#{detalharItemSolicitacaoExameController.exameVO.descricaoTipoTransporte}" size="22" readonly="true"/>  
            <mec:inputText id="usaO2Exames" label="#{messages.LABEL_USA_O2_EXAMES}" value="#{detalharItemSolicitacaoExameController.exameVO.indUsoO2String}" size="22" readonly="true"/>  
            <mec:inputText id="prioridadeExecucaoExames" label="#{messages.LABEL_PRIORIDADE_EXECUCAO_EXAMES}" value="#{detalharItemSolicitacaoExameController.exameVO.prioridadeExecucao}" size="98" readonly="true"/> 
          </aghu:linha>  
          <aghu:linha> 
            <mec:inputText id="regiaoAnatomicaExames" label="#{messages.LABEL_REGIAO_ANATOMICA_EXAMES}" value="#{detalharItemSolicitacaoExameController.exameVO.descricaoRegiaoAnatomica}" size="22" readonly="true"/>  
            <mec:inputText id="descricaoMaterialExames" label="#{messages.LABEL_DESCRICAO_MATERIAL_EXAMES}" value="#{detalharItemSolicitacaoExameController.exameVO.descMaterialAnalise}" size="69" readonly="true"/>  
            <mec:inputText id="nroAmostrasExames" label="#{messages.LABEL_NRO_AMOSTRAS_EXAMES}" value="#{detalharItemSolicitacaoExameController.exameVO.nroAmostras}" size="28" readonly="true"/> 
          </aghu:linha>  
          <aghu:linha> 
            <mec:inputText id="intervaloExames" label="#{messages.LABEL_INTERVALO_EXAMES}" size="25" maxlength="25" readonly="true" value="#{detalharItemSolicitacaoExameController.exameVO.intervaloDiasHoras}"/>  
            <mec:inputText id="dtHoraProgramadaExames" label="#{messages.LABEL_DT_HORA_PROGRAMADA_EXAMES}" value="#{detalharItemSolicitacaoExameController.exameVO.dthrProgramada}" size="22" readonly="true" datePattern="dd/MM/yyyy HH:mm"/>  
            <mec:inputText id="nroColetasExames" label="#{messages.LABEL_NRO_COLETAS_EXAMES}" value="#{detalharItemSolicitacaoExameController.exameVO.nroColetasIntervaloColeta}" size="22" readonly="true"/> 
          </aghu:linha>  
          <aghu:linha> 
            <mec:inputText id="intervaloColetasExames" label="#{messages.LABEL_INTERVALO_COLETAS_EXAMES}" value="#{detalharItemSolicitacaoExameController.exameVO.descricaoIntervaloColeta}" size="98" readonly="true"/> 
          </aghu:linha>  
          <aghu:linha> 
            <mec:inputText id="motivoCancelamentoExames" label="#{messages.LABEL_MOTIVO_CANCELAMENTO_EXAMES}" value="#{detalharItemSolicitacaoExameController.exameVO.descricaoMotivoCancelaExames}" size="98" readonly="true"/> 
          </aghu:linha>  
          <aghu:linha> 
            <mec:inputTextArea id="complementoMotivoExames" label="#{messages.LABEL_COMPLEMENTO_MOTIVO_EXAMES}" rows="3" cols="96" value="#{detalharItemSolicitacaoExameController.exameVO.complementoMotCanc}" disabled="true" maxlength="2000"/> 
          </aghu:linha> 
        </aghu:panelGeral>  
        <aghu:linha> 
          <mec:commandButton id="bt_consulta" value="#{messages.LABEL_CONSULTADO_POR}" action="#{detalharItemSolicitacaoExameController.pesquisaItensConsultados}" 
          					 onclick="PF('modalExamesConsultadosWG').show();;" 
          					 rendered="#{mf:hasPermission(securityController,'pesquisarConsultados,pesquisar')}" 
          					 disabled="#{detalharItemSolicitacaoExameController.disabledConsultadoPor()}" 
          					 ajax="true" render="tabelaItensConsultados" styleClass="bt_cinza"/>
          					   
          <mec:commandButton id="bt_extrato" value="#{messages.LABEL_EXTRATO}" 
          					 rendered="#{mf:hasPermission(securityController,'visualizarExtratoItemSolicitacaoExames,pesquisar')}" 
          					 action="visualizarExtratoItemSolicitacaoExames" styleClass="bt_cinza"> 
            <f:setPropertyActionListener target="#{visualizarExtratoItemSolicitacaoExamesController.solicitacao}" value="#{detalharItemSolicitacaoExameController.soeSeq}" for="command"/>  
            <f:setPropertyActionListener target="#{visualizarExtratoItemSolicitacaoExamesController.item}" value="#{detalharItemSolicitacaoExameController.seqp}" for="command"/>  
            <f:setPropertyActionListener target="#{visualizarExtratoItemSolicitacaoExamesController.isHist}" value="#{detalharItemSolicitacaoExameController.isHist}" for="command"/> 
          </mec:commandButton>  
          <mec:commandButton id="bt_amostras" 
          					 disabled="#{detalharItemSolicitacaoExameController.desahabilitarBotaoAmostras()}" value="#{messages.LABEL_AMOSTRAS}" 
          					 rendered="#{mf:hasPermission(securityController,'amostrasExamesPesquisar,pesquisar')}" action="pesquisaAmostrasExames" 
          					 styleClass="bt_cinza"> 
            <f:setPropertyActionListener target="#{pesquisaAmostrasExamesController.soeSeq}" value="#{detalharItemSolicitacaoExameController.soeSeq}" for="command"/>  
            <f:setPropertyActionListener target="#{pesquisaAmostrasExamesController.iseSeqp}" value="#{detalharItemSolicitacaoExameController.seqp}" for="command"/>  
            <f:setPropertyActionListener target="#{pesquisaAmostrasExamesController.voltarPara}" value="detalharItemSolicitacaoExame" for="command"/>  
            <f:setPropertyActionListener target="#{pesquisaAmostrasExamesController.isHist}" value="#{detalharItemSolicitacaoExameController.isHist}" for="command"/>  
            <f:setPropertyActionListener target="#{pesquisaAmostrasExamesController.origemPOL}" value="#{detalharItemSolicitacaoExameController.origemPOL}" for="command"/>
            <f:setPropertyActionListener target="#{pesquisaAmostrasExamesController.origemSolicDetalhamentoAmostras}" value="#{detalharItemSolicitacaoExameController.origemSolicDetalhamentoAmostras}" for="command"/> 
          </mec:commandButton>  
          <mec:commandButton id="bt_voltar" value="#{messages.LABEL_VOLTAR}" action="#{detalharItemSolicitacaoExameController.getVoltarPara}" styleClass=" alinha-direita bt_cinza" profile="back"
          				     rendered="#{not detalharItemSolicitacaoExameController.origemPOL}"/>
          <mec:commandButton id="bt_voltarPOL" value="#{messages.LABEL_VOLTAR}" action="#{detalharItemSolicitacaoExameController.getVoltarPara}" 
          				     styleClass=" alinha-direita bt_cinza" profile="back" onclick="parent.openModalPOL();"
          				     rendered="#{detalharItemSolicitacaoExameController.origemPOL}" >
                        <f:setPropertyActionListener value="#{detalharItemSolicitacaoExameController.currentTabIndex}" target="#{consultarExamesPOLController.currentTab}" for="command"/>
          </mec:commandButton> 
        </aghu:linha> 
      </h:form>  
      <p:dialog id="modalExamesConsultados" onshow="PF('loadDialogWG').hide();" width="600" height="390" modal="true" resizable="false" widgetVar="modalExamesConsultadosWG" closable="true"> 
        <f:facet name="header"> 
          <h:panelGroup> 
            <h:outputText value="#{messages.LABEL_ITENS_CONSULTADOS}"/> 
          </h:panelGroup> 
        </f:facet>  
        <h:panelGroup> 
          <h:form prependId="false" id="formExamesConsultados"> 
            <br clear="none"/>  
            <aghu:linha> 
              <p:outputPanel> 
                <mec:serverDataTable id="tabelaItensConsultados" name="tabelaItensConsultados" rowKeyVar="_itemId" 
               						 list="#{detalharItemSolicitacaoExameController.listaItemSolicConsultado}" 
               						 scrollable="true" scrollHeight="340"> 
                  <c:set var="_itemExameConsultado" value="#{item}"/>  
                  <p:column style="width: 90px;"> 
                    <f:facet name="header"> 
                      <h:outputText value="#{messages.LABEL_CONSULTADO_EM}"/> 
                    </f:facet>  
                    <h:outputText value="#{_itemExameConsultado.criadoEm}"> 
                      <f:convertDateTime pattern="dd/MM/yyyy HH:mm"/> 
                    </h:outputText> 
                  </p:column>  
                  <p:column style="width: 50px;"> 
                    <f:facet name="header"> 
                      <h:outputText value="#{messages.LABEL_VINCULO}"/> 
                    </f:facet>  
                    <h:outputText value="#{_itemExameConsultado.vinculo}"/> 
                  </p:column>  
                  <p:column style="width: 60px;"> 
                    <f:facet name="header"> 
                      <h:outputText value="#{messages.LABEL_MATRICULA}"/> 
                    </f:facet>  
                    <h:outputText value="#{_itemExameConsultado.matricula}"/> 
                  </p:column>  
                  <p:column> 
                    <f:facet name="header"> 
                      <h:outputText value="#{messages.LABEL_NOME}"/> 
                    </f:facet>  
                    <h:outputText value="#{_itemExameConsultado.servidor}"/> 
                  </p:column> 
                </mec:serverDataTable> 
              </p:outputPanel> 
            </aghu:linha> 
          </h:form> 
        </h:panelGroup> 
      </p:dialog> 
    </ui:define> 
  </ui:composition> 
</html>
