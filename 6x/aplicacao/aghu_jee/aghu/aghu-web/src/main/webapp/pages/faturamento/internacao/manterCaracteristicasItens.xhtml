<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:aghu="http://xmlns.jcp.org/jsf/component" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:mf="http://www.mec.gov.br/taglib">
<ui:composition template="/WEB-INF/templates/form_template.xhtml">
<ui:define name="head">
    <title>Manter Caracter√≠sticas dos Itens :: AGHU - MEC</title>
</ui:define>
<ui:define name="metadata">
    <f:metadata>
        <f:viewAction action="#{manterCaracteristicasItensController.inicio}"/>
    </f:metadata>
</ui:define>
<ui:define name="body">
<h:form>
    <pe:remoteCommand name="excluir">
        <pe:assignableParam name="param1" assignTo="#{manterCaracteristicasItensController.tctSeq}"/>
    </pe:remoteCommand>
</h:form>
<p:outputPanel id="panelCampos" layout="inline">
    <mec:pageConfig controller="#{manterCaracteristicasItensController}" ignoreEnter="true"/>
    <h:form prependId="false" id="formDados">
        <aghu:panelGeral style="margin-left: 4px !important; margin-right: 4px !important;" legend="#{messages.LABEL_MANTER_CARACTERISTICAS_INDICADORES_DOS_ITENS}">
            <aghu:linha>
                <p:outputPanel layout="block">
                    <p:tooltip  value="#{manterCaracteristicasItensController.itemProcedHosp.id.phoSeq} - #{manterCaracteristicasItensController.itemProcedHosp.procedimentoHospitalar.descricao}" direction="bottom-right" styleClass="tooltip" layout="block"></p:tooltip>
                    <mec:inputText label="#{messages.LABEL_TABELA_PROCED_HOSP}" size="30" readonly="true" value="#{manterCaracteristicasItensController.itemProcedHosp.id.phoSeq} - #{manterCaracteristicasItensController.itemProcedHosp.procedimentoHospitalar.descricao}" id="procedHospitalar"/>
                </p:outputPanel>
                <mec:inputText label="#{messages.LABEL_CODIGO_SUS}" size="11" readonly="true" value="#{manterCaracteristicasItensController.itemProcedHosp.codTabela}" id="codigoItem"/>
                <mec:inputText label="#{messages.LABEL_IPH}" size="10" readonly="true" value="#{manterCaracteristicasItensController.itemProcedHosp.id.seq}" id="sequencialItem"/>
                <p:outputPanel layout="block">
                    <p:tooltip  value="#{manterCaracteristicasItensController.itemProcedHosp.descricao}" direction="bottom-right" styleClass="tooltip" layout="block"></p:tooltip>
                    <mec:inputText label="#{messages.LABEL_DESCRICAO}" size="65" readonly="true" value="#{manterCaracteristicasItensController.itemProcedHosp.descricao}" id="descricaoItem"/>
                </p:outputPanel>
            </aghu:linha>
            <aghu:linha>
                <aghu:panelGeral style="margin-left: 4px !important; margin-right: 4px !important;" legend="#{messages.LABEL_ASSOCIAR_INDICADORES}">
                    <p:outputPanel id="panelCheckboxes" layout="inline">
                        <table cellspacing="2" cellpadding="2" border="0">
                            <tr>
                                <td rowspan="1" colspan="1">
                                    <mec:selectBooleanCheckbox label="#{messages.LABEL_ATIVO}" title="#{messages.TITLE_ATIVO_ITEM_PROCED_HOSP}" value="#{manterCaracteristicasItensController.ativo}" id="ativo"/>
                                </td>
                                <td rowspan="1" colspan="1">
                                    <mec:selectBooleanCheckbox label="#{messages.LABEL_INTERNACAO}" title="#{messages.TITLE_INTERNACAO_ITEM_PROCED_HOSP}" value="#{manterCaracteristicasItensController.itemProcedHosp.internacao}" id="internacao"/>
                                </td>
                                <td rowspan="1" colspan="1">
                                    <mec:selectBooleanCheckbox label="#{messages.LABEL_TIPO_AIH_5}" title="#{messages.TITLE_TIPO_AIH_5}" value="#{manterCaracteristicasItensController.itemProcedHosp.tipoAih5}" id="tipoAih5"/>
                                </td>
                                <td rowspan="1" colspan="1">
                                    <mec:selectBooleanCheckbox label="#{messages.LABEL_REAL_DIFERE_SOLIC}" title="#{messages.TITLE_REAL_DIFERE_SOLIC}" value="#{manterCaracteristicasItensController.itemProcedHosp.realDifereSolic}" id="realDifereSolic"/>
                                </td>
                                <td rowspan="1" colspan="1">
                                    <mec:selectBooleanCheckbox label="#{messages.LABEL_SOLIC_DIFERE_REAL}" title="#{messages.TITLE_SOLIC_DIFERE_REAL}" value="#{manterCaracteristicasItensController.itemProcedHosp.solicDifereReal}" id="solicDifereReal"/>
                                </td>
                            </tr>
                            <tr>
                                <td rowspan="1" colspan="1">
                                    <mec:selectBooleanCheckbox label="#{messages.LABEL_HCPA_CADASTRADO}" title="#{messages.TITLE_HCPA_CADASTRADO}" value="#{manterCaracteristicasItensController.itemProcedHosp.hcpaCadastrado}" id="hcpaCadastrado"/>
                                </td>
                                <td rowspan="1" colspan="1">
                                    <mec:selectBooleanCheckbox label="#{messages.LABEL_PROCEDIMENTO_ESPECIAL}" title="#{messages.TITLE_PROCEDIMENTO_ESPECIAL}" value="#{manterCaracteristicasItensController.itemProcedHosp.procedimentoEspecial}" id="procedimentoEspecial"/>
                                </td>
                                <td rowspan="1" colspan="1">
                                    <mec:selectBooleanCheckbox label="#{messages.LABEL_QUANTIDADE_MAIOR_INTERNACAO}" title="#{messages.TITLE_QUANTIDADE_MAIOR_INTERNACAO}" value="#{manterCaracteristicasItensController.itemProcedHosp.quantidadeMaiorInternacao}" id="quantidadeMaiorInternacao"/>
                                </td>
                                <td rowspan="1" colspan="1">
                                    <mec:selectBooleanCheckbox label="#{messages.LABEL_DIARIA_ACOMPANHANTE}" title="#{messages.TITLE_DIARIA_ACOMPANHANTE}" value="#{manterCaracteristicasItensController.itemProcedHosp.diariaAcompanhante}" id="diariaAcompanhante"/>
                                </td>
                                <td rowspan="1" colspan="1">
                                    <mec:selectBooleanCheckbox label="#{messages.LABEL_HOSPITAL_DIA}" title="#{messages.TITLE_HOSPITAL_DIA}" value="#{manterCaracteristicasItensController.itemProcedHosp.hospDia}" id="hospDia"/>
                                </td>
                            </tr>
                            <tr>
                                <td rowspan="1" colspan="1">
                                    <mec:selectBooleanCheckbox label="#{messages.LABEL_CONSULTA}" title="#{messages.TITLE_CONSULTA}" value="#{manterCaracteristicasItensController.itemProcedHosp.consulta}" id="consulta"/>
                                </td>
                                <td rowspan="1" colspan="1">
                                    <mec:selectBooleanCheckbox label="#{messages.LABEL_EXIGE_CID_SEGUNDARIO}" title="#{messages.TITLE_EXIGE_CID_SEGUNDARIO}" value="#{manterCaracteristicasItensController.itemProcedHosp.cidadeObrigatoria}" id="cidadeObrigatoria"/>
                                </td>
                                <td rowspan="1" colspan="1">
                                    <mec:selectBooleanCheckbox label="#{messages.LABEL_EXIGE_VALOR}" title="#{messages.TITLE_EXIGE_VALOR}" value="#{manterCaracteristicasItensController.itemProcedHosp.exigeValor}" id="exigeValor"/>
                                </td>
                                <td rowspan="1" colspan="1">
                                    <mec:selectBooleanCheckbox label="#{messages.LABEL_DADOS_PARTO}" title="#{messages.TITLE_DADOS_PARTO}" value="#{manterCaracteristicasItensController.itemProcedHosp.dadosParto}" id="dadosParto"/>
                                </td>
                                <td rowspan="1" colspan="1">
                                    <mec:selectBooleanCheckbox label="#{messages.LABEL_PSIQUIATRIA}" title="#{messages.TITLE_PSIQUIATRIA}" value="#{manterCaracteristicasItensController.itemProcedHosp.psiquiatria}" id="psiquiatria"/>
                                </td>
                            </tr>
                            <tr>
                                <td rowspan="1" colspan="1">
                                    <mec:selectBooleanCheckbox label="#{messages.LABEL_EXIGE_CONSULTA}" title="#{messages.TITLE_EXIGE_CONSULTA}" value="#{manterCaracteristicasItensController.itemProcedHosp.exigeConsulta}" id="exigeConsulta"/>
                                </td>
                                <td rowspan="1" colspan="1">
                                    <mec:selectBooleanCheckbox label="#{messages.LABEL_COBRA_PROCEDIMENTO_ESPECIAL}" title="#{messages.TITLE_COBRA_PROCEDIMENTO_ESPECIAL}" value="#{manterCaracteristicasItensController.itemProcedHosp.cobraProcedimentoEspecial}" id="cobraProcedimentoEspecial"/>
                                </td>
                                <td rowspan="1" colspan="1">
                                    <mec:selectBooleanCheckbox label="#{messages.LABEL_COBRANCA_CONTA}" title="#{messages.TITLE_COBRANCA_CONTA}" value="#{manterCaracteristicasItensController.itemProcedHosp.cobrancaConta}" id="cobrancaConta"/>
                                </td>
                                <td rowspan="1" colspan="1">
                                    <mec:selectBooleanCheckbox label="#{messages.LABEL_ALTA_COMPLEXIDADE}" title="#{messages.TITLE_ALTA_COMPLEXIDADE}" value="#{manterCaracteristicasItensController.itemProcedHosp.faec}" id="faec"/>
                                </td>
                                <td rowspan="1" colspan="1">
                                    <mec:selectBooleanCheckbox label="#{messages.LABEL_CIRURGIA_MULTIPLA}" title="#{messages.TITLE_CIRURGIA_MULTIPLA}" value="#{manterCaracteristicasItensController.itemProcedHosp.cirurgiaMultipla}" id="cirurgiaMultipla"/>
                                </td>
                            </tr>
                            <tr>
                                <td rowspan="1" colspan="1">
                                    <mec:selectBooleanCheckbox label="#{messages.LABEL_AIDS}" title="#{messages.TITLE_AIDS}" value="#{manterCaracteristicasItensController.itemProcedHosp.aidsPolitraumatizado}" id="aidsPolitraumatizado"/>
                                </td>
                                <td rowspan="1" colspan="1">
                                    <mec:selectBooleanCheckbox label="#{messages.LABEL_BUSCA_DOADOR}" title="#{messages.TITLE_BUSCA_DOADOR}" value="#{manterCaracteristicasItensController.itemProcedHosp.buscaDoador}" id="buscaDoador"/>
                                </td>
                                <td rowspan="1" colspan="1">
                                    <mec:selectBooleanCheckbox label="#{messages.LABEL_ESTRATEGICO}" title="#{messages.TITLE_ESTRATEGICO}" value="#{manterCaracteristicasItensController.itemProcedHosp.dcihTransplante}" id="dcihTransplante"/>
                                </td>
                            </tr>
                        </table>
                    </p:outputPanel>
                </aghu:panelGeral>
            </aghu:linha>

            <aghu:linha>
                <aghu:panelGeral style="margin-left: 4px !important; margin-right: 4px !important;" legend="#{messages.LABEL_ASSOCIAR_CARACTERISTICAS}">
                    <aghu:linha>
                        <p:outputPanel id="panelCaracteristica" layout="inline">
                            <mec:suggestionBox label="#{messages.LABEL_TIPO_CARACTERISTICA}" title="#{messages.TITLE_TIPO_CARACTERISTICA}" required="true" descricaoInput="seq" descricaoLabel="caracteristica" suggestionAction="listarTiposCaracteristicasParaItens" id="tipoCaracteristica" controller="#{manterCaracteristicasItensController}" value="#{manterCaracteristicasItensController.tipoCaracteristica}">
                                <p:column>#{item.seq}</p:column>
                                <p:column>#{item.caracteristica}</p:column>
                            </mec:suggestionBox>
                            <mec:inputNumero label="#{messages.LABEL_VALOR_NUMERICO}" size="9" maxlength="9" title="#{messages.TITLE_VALOR_NUMERICO}" required="false" value="#{manterCaracteristicasItensController.valorNumerico}" id="valorNumerico"/>
                            <mec:inputText label="#{messages.LABEL_VALOR_CHAR}" size="10" maxlength="240" title="#{messages.TITLE_VALOR_CHAR}" required="false" style="text-transform:uppercase" value="#{manterCaracteristicasItensController.valorChar}" id="valorChar"/>
                            <mec:inputTextData label="#{messages.LABEL_VALOR_DATA}" required="false" title="#{messages.TITLE_VALOR_DATA}" value="#{manterCaracteristicasItensController.valorData}" id="valorData" tipo="data"/>
                            <BR/>
                            <mec:commandButton id="bt_adicionarCaract"
                                               value="#{messages.LABEL_ADICIONAR}"
                                               process="@form"
                                               action="#{manterCaracteristicasItensController.adicionarCaracteristica}"
                                               disabled="#{!mf:hasPermission(securityController,'manterCaracteristicasItens,alterar')}"
                                               profile="add"
                                               ajax="true"
                                               render="panelListaCaract, panelMsgNaoEncontrado, panelCaracteristica"/>
                        </p:outputPanel>
                    </aghu:linha>
                    <aghu:linha>
                        <p:outputPanel id="panelMsgNaoEncontrado" layout="inline">
                            <p:outputPanel id="msgNaoEncontrado" layout="block" styleClass="div-alerta" rendered="#{empty manterCaracteristicasItensController.listaCaractItemProcHosp}">
                                <h:outputText value="#{messages.LABEL_NENHUMA_CARACT_ENCONTRADA}"/>
                            </p:outputPanel>
                        </p:outputPanel>
                        <p:outputPanel id="panelListaCaract" layout="inline">
                            <p:outputPanel id="listaCaract" styleClass="tabela-hachurada" rendered="#{not empty manterCaracteristicasItensController.listaCaractItemProcHosp}" layout="inline">
                                <p:outputPanel layout="block" style="width: 100%; height:200px; overflow-y:scroll;">
                                    <mec:serverDataTable id="tabela" list="#{manterCaracteristicasItensController.listaCaractItemProcHosp}" controller="#{manterCaracteristicasItensController}" scrollable="true">
                                        <c:set var="_caract" value="#{item}"/>
                                        <p:column label="#{messages.LABEL_ACAO}">
                                            <f:facet name="header">
                                                <b>#{messages.LABEL_ACAO}</b>
                                            </f:facet>
                                            <mec:commandLink title="#{messages.LABEL_EXCLUIR}"
                                                             action="#{manterCaracteristicasItensController.removerCaracteristica(_caract)}"
                                                             render="panelMsgNaoEncontrado, panelListaCaract"
                                                             disabled="#{!mf:hasPermission(securityController,'manterCaracteristicasItens,excluir')}"
                                                             profile="delete"
                                                             ajax="true"
                                                             process="@this"/>
                                        </p:column>
                                        <p:column label="#{messages.LABEL_SEQ}">
                                            <f:facet name="header">
                                                <b>#{messages.LABEL_SEQ}</b>
                                            </f:facet>
                                            <h:outputText value="#{_caract.tipoCaracteristicaItem.seq}"/>
                                        </p:column>
                                        <p:column label="#{messages.LABEL_CARACTERISTICA}">
                                            <f:facet name="header">
                                                <b>#{messages.LABEL_CARACTERISTICA}</b>
                                            </f:facet>
                                            <h:outputText value="#{_caract.tipoCaracteristicaItem.caracteristica}"/>
                                        </p:column>
                                        <p:column label="#{messages.LABEL_VALOR_NUMERICO}">
                                            <f:facet name="header">
                                                <b>#{messages.LABEL_VALOR_NUMERICO}</b>
                                            </f:facet>
                                            <h:outputText value="#{_caract.valorNumerico}"/>
                                        </p:column>
                                        <p:column label="#{messages.LABEL_VALOR_CHAR}" width="350px">
                                            <f:facet name="header">
                                                <b>#{messages.LABEL_VALOR_CHAR}</b>
                                            </f:facet>
                                            <h:outputText value="#{_caract.valorChar}"/>
                                        </p:column>
                                        <p:column label="#{messages.LABEL_VALOR_DATA}">
                                            <f:facet name="header">
                                                <b>#{messages.LABEL_VALOR_DATA}</b>
                                            </f:facet>
                                            <h:outputText value="#{_caract.valorData}">
                                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                                            </h:outputText>
                                        </p:column>
                                    </mec:serverDataTable>
                                </p:outputPanel>
                            </p:outputPanel>
                        </p:outputPanel>
                    </aghu:linha>
                </aghu:panelGeral>
            </aghu:linha>

        </aghu:panelGeral>
        <aghu:acao>
            <mec:commandButton id="bt_gravar" process="@this" value="#{messages.LABEL_GRAVAR}" action="#{manterCaracteristicasItensController.gravar}" disabled="#{!mf:hasPermission(securityController,'manterCaracteristicasItens,alterar')}" profile="ok" ajax="true"/>
            <mec:commandButton includePageParams="true" id="bt_cancelar" immediate="true" value="#{messages.LABEL_CANCELAR}" action="#{manterCaracteristicasItensController.cancelar}" profile="cancel" ajax="true" process="@this"/>
        </aghu:acao>
    </h:form>
</p:outputPanel>
</ui:define>
</ui:composition>
</html>
