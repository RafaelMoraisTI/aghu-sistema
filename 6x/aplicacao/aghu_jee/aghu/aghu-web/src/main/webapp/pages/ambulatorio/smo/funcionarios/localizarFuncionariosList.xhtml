<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
	xmlns:mec="http://xmlns.jcp.org/jsf/composite/components"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:aghu="http://xmlns.jcp.org/jsf/component"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:mf="http://www.mec.gov.br/taglib">
<ui:composition template="/WEB-INF/templates/form_template.xhtml">
	<ui:define name="head">
		<title>#{messages.LABEL_PESQUISAR_LOCALIZAR_FUNCIONARIOS} ::
			#{messages.NOME_ABREVIADO_PROJETO}</title>
		<style xml:space="preserve">
.checked {
	background-image: url('../../../resources/img/icons/checked.png')
		!important;
	background-repeat: no-repeat;
	background-position: center;
}
</style>
	</ui:define>
	<ui:define name="metadata">
		<f:metadata>
			<f:viewAction
				action="#{localizarFuncionariosPaginatorController.iniciar}" />
		</f:metadata>
	</ui:define>
	<ui:define name="body">
		<mec:pageConfig
			controller="#{localizarFuncionariosPaginatorController}" />
	
		<h:form prependId="false" id="formPesquisar">
			<aghu:panelGeral legend="#{messages.LABEL_PESQUISAR_FUNCIONARIOS}">
				<aghu:linha>
					<mec:inputNumero id="pesqMatricula" size="7" maxlength="7"
						label="#{messages.LABEL_MATRICULA_FUNCIONARIO}"
						title="#{messages.TITLE_MATRICULA_FUNCIONARIO}"
						style="text-transform: uppercase"
						value="#{localizarFuncionariosPaginatorController.filtro.id.matricula}" />
					<mec:inputText id="pesqNome" size="50" maxlength="50"
						label="#{messages.LABEL_NOME_FUNCIONARIO}"
						title="#{messages.TITLE_NOME_FUNCIONARIO}"
						style="text-transform: uppercase"
						value="#{localizarFuncionariosPaginatorController.filtro.pessoaFisica.nome}" />
					<mec:inputNumero id="pesqRamal" size="4" maxlength="4"
						label="#{messages.LABEL_RAMAL_FUNCIONARIO}"
						title="#{messages.TITLE_RAMAL_FUNCIONARIO}"
						value="#{localizarFuncionariosPaginatorController.filtro.ramalTelefonico.numeroRamal}" />
					<mec:inputMesAno label="#{messages.LABEL_ADMISSAO_FUNCIONARIO}"
						id="pesqAdmissao" size="7" maxlength="7"
						title="#{messages.TITLE_ADMISSAO_FUNCIONARIO}"
						ajaxValidation="false"
						value="#{localizarFuncionariosPaginatorController.filtro.dtInicioVinculo}" />
				</aghu:linha>
				<aghu:linha>
					<mec:suggestionBox id="pesqCcLotacao"
						label="#{messages.LABEL_CCUSTOLOTACAO_FUNCIONARIO}"
						title="#{messages.TITLE_CCCUSTOLOTACAO_FUNCIONARIO}"
						suggestionAction="pesquisarCCLotacao" descricaoInput="codigo"
						descricaoLabel="descricao" maxlength="30" width="420"
						posDeleteAction="limparFiltroCCLotacao"
						controller="#{localizarFuncionariosPaginatorController}"
						value="#{localizarFuncionariosPaginatorController.centroCustoLotacao}">
						<p:column>
							<f:facet name="header">
								<b>#{messages.LABEL_CENTRO_CUSTO}</b>
							</f:facet> #{item.codigo}
              			</p:column>
						<p:column>
							<f:facet name="header">
								<b>#{messages.LABEL_DESCRICAO}</b>
							</f:facet> #{item.descricao}
              			</p:column>
						<p:column>
							<f:facet name="header">
								<b>#{messages.LABEL_SITUACAO}</b>
							</f:facet> #{item.indSituacao.descricao}
              			</p:column>
						<p:column>
							<f:facet name="header">
								<b>#{messages.LABEL_NOME_REDUZIDO}</b>
							</f:facet> #{item.nomeReduzido}
              			</p:column>
					</mec:suggestionBox>
					<mec:suggestionBox id="pesqCcAtuacao"
						label="#{messages.LABEL_CCUSTOATUACAO_FUNCIONARIO}"
						title="#{messages.TITLE_CCCUSTOATUACAO_FUNCIONARIO}"
						suggestionAction="pesquisarCCAtuacao" descricaoInput="codigo"
						descricaoLabel="descricao" maxlength="30" width="420"
						posDeleteAction="limparFiltroCCAtuacao"
						controller="#{localizarFuncionariosPaginatorController}"
						value="#{localizarFuncionariosPaginatorController.centroCustoAtuacao}">
						<p:column>
							<f:facet name="header">
								<b>#{messages.LABEL_CENTRO_CUSTO}</b>
							</f:facet> #{item.codigo}
              			</p:column>
						<p:column>
							<f:facet name="header">
								<b>#{messages.LABEL_DESCRICAO}</b>
							</f:facet> #{item.descricao}
              			</p:column>
						<p:column>
							<f:facet name="header">
								<b>#{messages.LABEL_SITUACAO}</b>
							</f:facet> #{item.indSituacao.descricao}
              			</p:column>
						<p:column>
							<f:facet name="header">
								<b>#{messages.LABEL_NOME_REDUZIDO}</b>
							</f:facet> #{item.nomeReduzido}
              			</p:column>
					</mec:suggestionBox>
				</aghu:linha>
				<aghu:linha>
					<mec:suggestionBox id="pesqVinculo"
						label="#{messages.LABEL_VINCULO_FUNCIONARIO}"
						title="#{messages.TITLE_VINCULO_FUNCIONARIO}"
						suggestionAction="pesquisarVinculo" descricaoInput="codigo"
						descricaoLabel="descricao" maxlength="30" width="420"
						posDeleteAction="limparFiltroVinculo"
						controller="#{localizarFuncionariosPaginatorController}"
						value="#{localizarFuncionariosPaginatorController.vinculo}">
						<p:column>
							<f:facet name="header">
								<b>#{messages.LABEL_CODIGO}</b>
							</f:facet> #{item.codigo}
              			</p:column>
						<p:column>
							<f:facet name="header">
								<b>#{messages.LABEL_VINCULO_FUNCIONARIO}</b>
							</f:facet> #{item.descricao}
              			</p:column>
					</mec:suggestionBox>
					<mec:suggestionBox id="pesqOcupacao"
						label="#{messages.LABEL_OCUPACAO_FUNCIONARIO}"
						title="#{messages.TITLE_OCUPACAO_FUNCIONARIO}"
						suggestionAction="pesquisarOcupacaoCargo" descricaoInput="codigo"
						descricaoLabel="descricao" maxlength="30" width="420"
						posDeleteAction="limparFiltroOcupacaoCargo"
						controller="#{localizarFuncionariosPaginatorController}"
						value="#{localizarFuncionariosPaginatorController.ocupacaoCargo}">
						<p:column>
							<f:facet name="header">
								<b>#{messages.LABEL_CARGO}</b>
							</f:facet> #{item.cargo.descricao}
						</p:column>
						<p:column>
							<f:facet name="header">
								<b>#{messages.LABEL_CODIGO}</b>
							</f:facet> #{item.codigo}
						</p:column>
						<p:column>
							<f:facet name="header">
								<b>#{messages.LABEL_OCUPACAO_FUNCIONARIO}</b>
							</f:facet> #{item.descricao}
						</p:column>
						<p:column>
							<f:facet name="header">
								<b>#{messages.LABEL_SITUACAO}</b>
							</f:facet> #{item.indSituacao.descricao}
						</p:column>
					</mec:suggestionBox>
				</aghu:linha>
			</aghu:panelGeral>
			<aghu:acao>
				<mec:commandButton id="bt_pesquisar"
					value="#{messages.LABEL_PESQUISAR}"
					action="#{localizarFuncionariosPaginatorController.pesquisar}"
					block="true"
					profile="ok" />
				<mec:commandButton id="bt_limpar" value="#{messages.LABEL_LIMPAR}"
					action="#{localizarFuncionariosPaginatorController.limpar}"
					render="formPesquisar, formResultado" profile="clear" ajax="true"
					process="@this" />
			</aghu:acao>
		</h:form>
		<h:form prependId="false" id="formResultado">
			<h:panelGroup
				rendered="#{localizarFuncionariosPaginatorController.dataModel.pesquisaAtiva}">
				<aghu:panelGeral
					legend="#{messages.LABEL_RESULTADO_PESQUISAR_FUNCIONARIOS}">
					<mec:serverDataTable dataModel="dataModel" id="tabelaFuncionarios"
						controller="#{localizarFuncionariosPaginatorController}">
						<c:set var="item" value="#{item}" />
						<p:column sortBy="#{item.matricula}" sortAble="true"
							style="width:5px;">
							<f:facet name="header">#{messages.LABEL_MATRICULA_FUNCIONARIO}</f:facet>
							<h:outputText value="#{item.matricula}" />
						</p:column>
						<p:column sortBy="#{item.nome}" sortAble="true"
							style="width:21px;">
							<f:facet name="header">#{messages.LABEL_NOME_FUNCIONARIO}</f:facet>
							<h:outputText id="txtNome"
								value="#{localizarFuncionariosPaginatorController.obterHintDescricao(item.nome)}" />
							<p:overlayPanel id="pnlNome" for="txtNome" showEvent="mouseover"
								hideEvent="mouseout" rendered="#{item.nome.length() > 20}">
								<h:outputText value="#{item.nome}" />
							</p:overlayPanel>
						</p:column>
						<p:column sortBy="#{item.ocupacao}" sortAble="true"
							style="width:20px;">
							<f:facet name="header">#{messages.LABEL_OCUPACAO_FUNCIONARIO}</f:facet>
							<h:outputText id="txtOcupacao"
								value="#{localizarFuncionariosPaginatorController.obterHintDescricao(item.ocupacao)}" />
							<p:overlayPanel id="pnlOcupacao" for="txtOcupacao"
								showEvent="mouseover" hideEvent="mouseout"
								rendered="#{item.ocupacao.length() > 20}">
								<h:outputText value="#{item.ocupacao}" />
							</p:overlayPanel>
						</p:column>
						<p:column sortBy="#{item.dtInicioVinculo}" sortAble="true"
							style="width:10px;">
							<f:facet name="header">#{messages.LABEL_ADMISSAO_FUNCIONARIO}</f:facet>
							<h:outputText value="#{item.dtInicioVinculo}">
								<f:convertDateTime pattern="MM/yyyy" />
							</h:outputText>
						</p:column>
						<p:column sortBy="#{item.dtFimVinculo}" sortAble="true"
							style="width:5px;">
							<f:facet name="header">#{messages.COLUNA_TERMINO}</f:facet>
							<h:outputText value="#{item.dtFimVinculo}">
								<f:convertDateTime pattern="dd/MM/yyyy" />
							</h:outputText>
						</p:column>
						<p:column style="text-align:center; width:4px;">
							<f:facet name="header">#{messages.COLUNA_ATIVO}</f:facet>
							<h:graphicImage url="../../../../resources/img/icons/checked.png"
								rendered="#{item.situacaoFuncionario}" />
						</p:column>
						<p:column style="width:5px;">
							<f:facet name="header">#{messages.LABEL_RAMAL_FUNCIONARIO}</f:facet>
							<h:outputText value="#{item.ramal}" />
						</p:column>
						<p:column sortBy="#{item.centroCustoLotacao}" sortAble="true"
							style="width:10px;">
							<f:facet name="header">#{messages.COLUNA_CCLOTACAO}</f:facet>
							<h:outputText id="codigoCCLotacao"
								value="#{item.codigoCentroCustoLotacao}" />
							<p:overlayPanel id="pnlCCLotacao" for="codigoCCLotacao"
								showEvent="mouseover" hideEvent="mouseout">
								<h:outputText value="#{item.descricaoCentroCustoLotacao}" />
								<br clear="none" />
								<h:outputText value="Ramal Chefia: #{item.ramalChefiaCCLotacao}" />
							</p:overlayPanel>
						</p:column>
						<p:column sortBy="#{item.centroCustoAtuacao}" sortAble="true"
							style="width:10px;">
							<f:facet name="header">#{messages.COLUNA_CCATUACAO}</f:facet>
							<h:outputText id="codigoCCAtuacao"
								value="#{item.codigoCentroCustoAtuacao}" />
							<p:overlayPanel id="pnlCCAtuacao" for="codigoCCAtuacao"
								showEvent="mouseover" hideEvent="mouseout">
								<h:outputText value="#{item.descricaoCentroCustoAtuacao}" />
								<br clear="none" />
								<h:outputText value="Ramal Chefia: #{item.ramalChefiaCCAtuacao}" />
							</p:overlayPanel>
						</p:column>
						<p:column sortBy="#{item.vinculo}" sortAble="true"
							style="width:5px;">
							<f:facet name="header">#{messages.LABEL_VINCULO_FUNCIONARIO}</f:facet>
							<h:outputText id="txtVinculo" value="#{item.vinculo}" />
							<p:overlayPanel id="pnlVinculo" for="txtVinculo"
								showEvent="mouseover" hideEvent="mouseout">
								<h:outputText value="#{item.descricaoVinculo}" />
							</p:overlayPanel>
						</p:column>
						<p:column
							rendered="#{localizarFuncionariosPaginatorController.colunaCarteira}"
							style="width:10px;">
							<f:facet name="header">#{messages.COLUNA_CARTEIRAUNIMED}</f:facet>
							<h:outputText value="#{item.carteiraUnimed}" />
						</p:column>
					</mec:serverDataTable>
				</aghu:panelGeral>
			</h:panelGroup>
		</h:form>
	</ui:define>
</ui:composition>
</html>
