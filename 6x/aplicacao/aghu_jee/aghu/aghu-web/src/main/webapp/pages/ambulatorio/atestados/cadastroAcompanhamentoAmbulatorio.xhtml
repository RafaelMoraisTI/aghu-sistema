<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
	xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:aghu="http://xmlns.jcp.org/jsf/component" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:mf="http://www.mec.gov.br/taglib">

	<p:outputPanel id="panelAcompanhamentoAba2" layout="inline">
	    <h:form prependId="false" id="formCadastroAcompanhamentoAba2">
	 	  <aghu:panelGeral id="panelGeralAcompanhamentoAba2" legend="#{messages.TITLE_ATESTADO_ACOMPANHAMENTO}">
	 		<aghu:linha>
					<mec:inputText id="nomeAcompanhateAba2" label="#{messages.LABEL_ATESTADO_ACOMP_DECLARO_QUE}" style="text-transform:uppercase"
						title="#{messages.TITLE_NOME_ACOMPANHATE_PACIENTE}" size="110" maxlength="60" required="true"
						value="#{cadastroAcompanhamentoAmbulatorioController.atestado.nomeAcompanhante}" 
						/>
			</aghu:linha>
			
			<aghu:linha>
				<span style="float: left; line-height: 60px; margin-right: 5px">#{messages.LABEL_ESTEVE_NESTE_HOSPITAL}</span>
				
				<mec:inputTextData id="idDataConsultaAba2" size="10" value="#{cadastroAcompanhamentoAmbulatorioController.atestado.dthrCons}" tipo="data" required="true"
					title="#{messages.TITLE_DATA_CONSULTA}" showLabel="false" label="#{messages.LABEL_DIA}" >
				</mec:inputTextData>	
				
				<span style="float: left; line-height: 60px; margin-right: 5px">#{messages.LABEL_COMO_ACOMPANHANTE_PACIENTE}</span>
			</aghu:linha>
			<aghu:linha>
				<mec:inputText id="dadosPacienteAba2" size="110" readonly="true" value="#{cadastroAcompanhamentoAmbulatorioController.dadosPaciente}" />
			</aghu:linha>
			<aghu:linha>
				
				<span style="float: left; line-height: 60px; margin-right: 5px">  das  </span>
				
				<mec:inputTextData id="idHoraInicioAba2" title="#{messages.TITLE_INFORME_HORA_INICIO_CONSULTA}"  value="#{cadastroAcompanhamentoAmbulatorioController.atestado.dataInicial}" 
				required="true" size="5" tipo="hora" showLabel="false" label="#{messages.LABEL_HORA_DE_INICIO}"/>
				
				<span style="float: left; line-height: 60px; margin-right: 5px">#{messages.LABEL_HRS_ATE}</span>
				
				<mec:inputTextData id="idHoraFimAba2" title="#{messages.TITLE_INFORME_HORA_TERMINO_CONSULTA}" 
				value="#{cadastroAcompanhamentoAmbulatorioController.atestado.dataFinal}" size="5" tipo="hora" required="true" 
				showLabel="false" label="#{messages.LABEL_HORA_DE_FIM}"/>
					
				<span style="float: left; line-height: 60px; margin-right: 5px"> Hrs</span>
			</aghu:linha>
			
			<aghu:linha>
				<mec:inputTextArea id="observacaoAcompanhamentoAba2" rows="5" cols="110" maxlength="2000" label="#{messages.LABEL_ATESTADO_ACOMP_OBSERVACAO}" 
							title="#{messages.TITLE_ACOMP_ATESTADO_AMBULATORIO}" value="#{cadastroAcompanhamentoAmbulatorioController.atestado.observacao}" />
			</aghu:linha>
	 		<aghu:linha>
	 			<mec:inputNumero id="nroViasAcompanhamentoAba2" value="#{cadastroAcompanhamentoAmbulatorioController.atestado.nroVias}"
						title="#{messages.TITLE_ATESTADO_ACOMP_NRO_VIAS}"	label="#{messages.LABEL_ATESTADO_ACOMP_NRO_VIAS}" maxlength="2" size="2" required="true"/>
			</aghu:linha>
			
			<aghu:acao newLine="false">
				<mec:commandButton id="bt_adicionarAcompanhamentoAba2" action="#{cadastroAcompanhamentoAmbulatorioController.gravar}"
					profile="add" value="#{messages.LABEL_ADICIONAR}" ajax="true" 	rendered="#{!cadastroAcompanhamentoAmbulatorioController.modoEdicao}"
					process="@this @(#panelGeralAcompanhamentoAba2)" 
					render="panelGeralAcompanhamentoAba2, panelListaAcompanhamentoAba2" disabled="#{not mf:hasPermission(securityController,'realizarAtestadoAcompanhamento,executar')}"/>
	
				<mec:commandButton id="bt_limparAcompanhamentoAba2" value="#{messages.LABEL_LIMPAR}" render="panelGeralAcompanhamentoAba2, panelListaAcompanhamentoAba2" process="@this"
					styleClass="bt_cinza" profile="clear" action="#{cadastroAcompanhamentoAmbulatorioController.limpar}" ajax="true" 
					rendered="#{!cadastroAcompanhamentoAmbulatorioController.modoEdicao}" />
					
				<mec:commandButton id="bt_alterarAcompanhamentoAba2" value="#{messages.LABEL_ALTERAR}" ajax="true"
						rendered="#{cadastroAcompanhamentoAmbulatorioController.modoEdicao}" action="#{cadastroAcompanhamentoAmbulatorioController.gravar}"
						process="@this @(#panelGeralAcompanhamentoAba2)" render="panelGeralAcompanhamentoAba2, panelListaAcompanhamentoAba2" profile="ok" />
	
				<mec:commandButton id="bt_cancelarAcompanhamentoAba2" value="#{messages.LABEL_NOTIF_TOPO_CANCELAR_EDICAO}"
					rendered="#{cadastroAcompanhamentoAmbulatorioController.modoEdicao}" block="true" ajax="true" process="@this"
					action="#{cadastroAcompanhamentoAmbulatorioController.limpar}" render="panelGeralAcompanhamentoAba2, panelListaAcompanhamentoAba2" profile="cancel" />
			</aghu:acao>
	 	  </aghu:panelGeral>
	 	  
	 	  <aghu:panelGeral id="panelListaAcompanhamentoAba2" legend="#{messages.TITLE_ATESTADO_ACOMP_ACOMPANHANTES}">
				<aghu:linha>
					<mec:serverDataTable id="listaAtestadosAcompanhamentoAba2" controller="#{cadastroAcompanhamentoAmbulatorioController}" selection="itemSelecionado"
							list="#{cadastroAcompanhamentoAmbulatorioController.listAtestadosComparecimento}" scrollable="true" scrollHeight="150">
						<c:set var="_atestadoAba2" value="#{item}" />
								
						<p:column id="acaoColuna" style="width:50px;" styleClass="first-column auto-adjust" rendered="true">
							<f:facet name="header">
								<h:outputText value="#{messages.LABEL_ACAO}" />
							</f:facet>
							<mec:commandLink id="link_editarAcompanhamentoAba2" title="#{messages.LABEL_EDITAR}" ajax="true" profile="edit"
								render="panelGeralAcompanhamentoAba2, panelListaAcompanhamentoAba2" process="@this" action="#{cadastroAcompanhamentoAmbulatorioController.editar}"
								rendered="#{mf:hasPermission(securityController,'realizarAtestadoAcompanhamento,executar') and !cadastroAcompanhamentoAmbulatorioController.editandoRegistro(_atestadoAba2)}">
								<f:setPropertyActionListener for="command" target="#{cadastroAcompanhamentoAmbulatorioController.itemSelecionado}" value="#{_atestadoAba2}" />
								<f:setPropertyActionListener for="command" target="#{cadastroAcompanhamentoAmbulatorioController.atestado}" value="#{_atestadoAba2}" />
							</mec:commandLink>
							<mec:commandLink id="link_excluirComparecimento" ajax="true" process="@this" title="#{messages.LABEL_EXCLUIR}"
												action="#{cadastroAcompanhamentoAmbulatorioController.excluir(item)}" profile="delete"
												render="panelGeralAcompanhamentoAba2, panelListaAcompanhamentoAba2"
												rendered="#{ mf:hasPermission(securityController,'realizarAtestadoAcompanhamento,executar') and !cadastroAcompanhamentoAmbulatorioController.editandoRegistro(_atestadoAba2)}">
							</mec:commandLink>
							
						</p:column>
				
						<p:column style="text-align: left;">
							<f:facet name="header" style="white-space:nowrap; text-align: left;">
								<h:outputText value="#{messages.LABEL_NOME_ACOMPANHANTE}" />
							</f:facet>
							<h:outputText id="declaracaoAcompanhamentoAba2"
								value="#{(_atestadoAba2.nomeAcompanhante.length() &gt; 32) ? fn:substring(_atestadoAba2.nomeAcompanhante,0,29).concat('...') :_atestadoAba2.nomeAcompanhante}" />
							<p:tooltip for="declaracaoAcompanhamentoAba2" styleClass="tooltip" layout="block"
								rendered="#{_atestadoAba2.nomeAcompanhante.length() &gt; 32}" style="width:600px; word-wrap: break-word;" trackMouse="true">
								<h:outputText value="#{_atestadoAba2.nomeAcompanhante}" />
							</p:tooltip>
						</p:column>
						
						<p:column style="width:60px; white-space:nowrap; text-align: left; !important;">
							<f:facet name="header" style="text-align: left;">
								<h:outputText value="#{messages.LABEL_CAD_COMPARECIMENTO_DATA}" />
							</f:facet>
							<h:outputText value="#{_atestadoAba2.dthrCons}">
								<f:convertDateTime pattern="dd/MM/yyyy" />
							</h:outputText>
						</p:column>
						
						<p:column style="text-align: left;">
							<f:facet name="header" style="white-space:nowrap; ">
								<h:outputText value="#{messages.LABEL_PESQUISAR_PACIENTES_AGENDADOS_PACIENTE}" />
							</f:facet>
							<h:outputText id="observacaoAcompanhamentoAba2"
								value="#{(cadastroAcompanhamentoAmbulatorioController.dadosPaciente.length() &gt; 40) ? fn:substring(cadastroAcompanhamentoAmbulatorioController.dadosPaciente,0,40).concat('...') :cadastroAcompanhamentoAmbulatorioController.dadosPaciente}" />
							<p:tooltip for="observacaoAcompanhamentoAba2" styleClass="tooltip" layout="block"
								rendered="#{cadastroAcompanhamentoAmbulatorioController.dadosPaciente.length() &gt; 40}" style="width:600px; word-wrap: break-word;" trackMouse="true">
								<h:outputText value="#{cadastroAcompanhamentoAmbulatorioController.dadosPaciente}" />
							</p:tooltip>
						</p:column>
						
						<p:column style="width:70px; white-space:nowrap; !important;">
							<f:facet name="header">
								<h:outputText value="#{messages.LABEL_HORA_DE_INICIO_ACOMPANHAMENTO}" />
							</f:facet>
							<h:outputText value="#{_atestadoAba2.dataInicial}">
								<f:convertDateTime pattern="HH:mm" />
							</h:outputText>
						</p:column>
	
						<p:column style="width:60px; white-space:nowrap; !important;">
							<f:facet name="header">
								<h:outputText value="#{messages.LABEL_HORA_DE_FINAL_ACOMPANHAMENTO}" />
							</f:facet>
							<h:outputText value="#{_atestadoAba2.dataFinal}">
								<f:convertDateTime pattern="HH:mm" />
							</h:outputText>
						</p:column>
						
						</mec:serverDataTable>
					</aghu:linha>
				</aghu:panelGeral>
	    </h:form>
	</p:outputPanel>
</html>
