<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:aghu="http://xmlns.jcp.org/jsf/component" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:mf="http://www.mec.gov.br/taglib">  
  <ui:composition template="/WEB-INF/templates/form_template.xhtml"> 
    <ui:define name="head"> 
      <title>#{messages.TITLE_ESPECIALIDADES_DISPONIVEIS} :: #{messages.NOME_ABREVIADO_PROJETO}</title> 
    </ui:define>  
    <ui:define name="body"> 
      <mec:pageConfig controller="#{pesquisaEspecialidadeDisponivelPaginatorController}"/>
  
        <h:form prependId="false" id="formPesquisa"> 
	        <aghu:panelGeral id="panelPesquisa" legend="#{messages.TITLE_ESPECIALIDADES_DISPONIVEIS}"> 
                <aghu:linha> 				  
					<mec:suggestionBox id="sgbespecialidade" label="#{messages.LABEL_ESPECIALIDADE}" title="#{messages.HINT_ESPECIALIDADE}" 
								suggestionAction="obterEspecialidade" descricaoInput="espSigla" descricaoLabel="espNomeEspecialidade"
								width="350px" maxlength="30" descricaoLimite="30" 
								controller="#{pesquisaEspecialidadeDisponivelPaginatorController}"
								value="#{pesquisaEspecialidadeDisponivelPaginatorController.filtro.especialidade}">
								<p:column>
									<f:facet name="header">
										<b>#{messages.LABEL_CODIGO}</b>
									</f:facet>#{item.seq}
		              			</p:column>
		              			<p:column>
									<f:facet name="header">
										<b>#{messages.LABEL_SIGLA}</b>
									</f:facet>#{item.espSigla}
		              			</p:column>
		              			<p:column>
									<f:facet name="header">
										<b>#{messages.LABEL_ESPECIALIDADE}</b>
									</f:facet>#{item.espNomeEspecialidade}
		              			</p:column>
					</mec:suggestionBox>
                 	<mec:suggestionBox id="sgbCondAtendimento" label="#{messages.LABEL_CONDICAO_DE_ATENDIMENTO}" title="#{messages.HINT_CONDICAO_ATENDIMENTO}" 
								suggestionAction="obterListaCondicaoAtendimento" descricaoInput="seq" descricaoLabel="descricao"
								width="350px" maxlength="30" descricaoLimite="30" 
								controller="#{pesquisaEspecialidadeDisponivelPaginatorController}"
								value="#{pesquisaEspecialidadeDisponivelPaginatorController.filtro.condicaoAtendimento}">
								<p:column>
									<f:facet name="header">
										<b>#{messages.LABEL_CODIGO}</b>
									</f:facet>#{item.seq}
		              			</p:column>
		              			<p:column>
									<f:facet name="header">
										<b>#{messages.LABEL_CONDICAO_DE_ATENDIMENTO}</b>
									</f:facet>#{item.descricao}
		              			</p:column>
					</mec:suggestionBox>
				</aghu:linha>
				<aghu:linha>
					<mec:suggestionBox id="sgbPagadores" label="#{messages.LABEL_PAGADOR}" title="#{messages.HINT_PAGADOR}" 
								suggestionAction="obterListaPagadores" descricaoInput="seq" descricaoLabel="descricao"
								width="350px" maxlength="30" descricaoLimite="30" 
								controller="#{pesquisaEspecialidadeDisponivelPaginatorController}"
								value="#{pesquisaEspecialidadeDisponivelPaginatorController.filtro.pagador}">
								<p:column>
									<f:facet name="header">
										<b>#{messages.LABEL_CODIGO}</b>
									</f:facet>#{item.seq}
		              			</p:column>
		              			<p:column>
									<f:facet name="header">
										<b>#{messages.LABEL_PAGADOR}</b>
									</f:facet>#{item.descricao}
		              			</p:column>
					</mec:suggestionBox>
					
					<mec:suggestionBox id="sgbTipoAgendamento" label="#{messages.LABEL_AUTORIZACAO}" title="#{messages.HINT_AUTORIZACAO}" 
								suggestionAction="obterListaTiposAgendamento" descricaoInput="seq" descricaoLabel="descricao"
								width="350px" maxlength="30" descricaoLimite="30" 
								controller="#{pesquisaEspecialidadeDisponivelPaginatorController}"
								value="#{pesquisaEspecialidadeDisponivelPaginatorController.filtro.autorizacao}">
								<p:column>
									<f:facet name="header">
										<b>#{messages.LABEL_CODIGO}</b>
									</f:facet>#{item.seq}
		              			</p:column>
		              			<p:column>
									<f:facet name="header">
										<b>#{messages.LABEL_AUTORIZACAO}</b>
									</f:facet>#{item.descricao}
		              			</p:column>
					</mec:suggestionBox>
                </aghu:linha>  
           
           		<aghu:linha>
					<mec:inputTextData required="true" id="dataInicial" label="#{messages.LABEL_DATA_INICIAL}" size="10" title="#{messages.HINT_DT_INICIAL}" value="#{pesquisaEspecialidadeDisponivelPaginatorController.filtro.dtInicial}" tipo="data" />  
					<mec:inputTextData required="true" id="dataFinal" label="#{messages.LABEL_DATA_FINAL}" size="10" title="#{messages.HINT_DT_FINAL}" value="#{pesquisaEspecialidadeDisponivelPaginatorController.filtro.dtFinal}" tipo="data" />  
					
					<mec:selectOneMenu enum="DominioSituacaoConsulta" style="width: 200px !important;" label="#{messages.LABEL_SITUACAO_CONSULTA}" id="situacaoConsultas" title="#{messages.HINT_SITUACAO_CONSULTA}" value="#{pesquisaEspecialidadeDisponivelPaginatorController.filtro.situacao}">
							<p:ajax process="@this" event="change" />	
					</mec:selectOneMenu>	
									
           		</aghu:linha>
		        </aghu:panelGeral> 
				<aghu:linha>
			        <aghu:acao> 
			          <mec:commandButton id="btPesquisar" value="#{messages.LABEL_PESQUISAR}" action="#{pesquisaEspecialidadeDisponivelPaginatorController.pesquisar}" profile="search" process="@this">
			          	<p:ajax event="click" process="@this" update="@(#panelQtde), @(#txtSomatorio)" /> 
			          </mec:commandButton>  
			          <mec:commandButton immediate="true" id="btLimpar" value="#{messages.LABEL_LIMPAR}" action="#{pesquisaEspecialidadeDisponivelPaginatorController.limpar}" profile="clear"/>  
				        <p:outputPanel id="panelQtde" style="width:200px !important; float:right !important; text-align:right !important; padding-right:40px !important; padding-top:20px !important;" rendered="#{pesquisaEspecialidadeDisponivelPaginatorController.dataModel.pesquisaAtiva}">
					        <h:outputLabel value="Quantidade Total:"/>
					        <h:outputText id="txtSomatorio" value="#{pesquisaEspecialidadeDisponivelPaginatorController.obterSomatorio()}"/>
				        </p:outputPanel>
			        </aghu:acao>  
		   		</aghu:linha>
			</h:form>
		 	<br clear="none" />	
		<aghu:linha>			
 		<h:form prependId="false" id="formConsultaGrade">
	 		<aghu:panelGeral rendered="#{pesquisaEspecialidadeDisponivelPaginatorController.dataModel.pesquisaAtiva}">
					<mec:serverDataTable id="listaGridEspecialidade" dataModel="dataModel" draggableColumns="false"
								controller="#{pesquisaEspecialidadeDisponivelPaginatorController}" selection="especialidadeDisponivelVO">					
						<p:column  style="text-align:left !important;">
							<f:facet name="header">
								<h:outputText value="#{messages.LABEL_SIGLA}" />
							</f:facet>
							<h:outputText value="#{item.sigla}" />
						</p:column>
						<p:column style="text-align:left !important;">
							<f:facet name="header">
								<h:outputText value="#{messages.LABEL_ESPECIALIDADE}" />
							</f:facet>
							<h:outputText id="colunaEspecialidade" value="#{pesquisaEspecialidadeDisponivelPaginatorController.obterHint(item.especialidade,42)}" />
							<p:overlayPanel id="hintColunaEspecialidade" for="colunaEspecialidade"
								showEvent="mouseover" hideEvent="mouseout"
								rendered="#{item.especialidade.length() > 42}">
								<h:outputText value="#{item.especialidade}" />
							</p:overlayPanel>
						</p:column>
						<p:column style="text-align:left !important;">
							<f:facet name="header">
								<h:outputText value="#{messages.LABEL_CONDICAO_DE_ATENDIMENTO}" />
							</f:facet>
							<h:outputText id="colunaCondAtendimento" value="#{pesquisaEspecialidadeDisponivelPaginatorController.obterHint(item.condicaoAtendimento,25)}" />
							<p:overlayPanel id="hintColunaCondAtendimento" for="colunaCondAtendimento"
								showEvent="mouseover" hideEvent="mouseout"
								rendered="#{item.condicaoAtendimento.length() > 25}">
								<h:outputText value="#{item.condicaoAtendimento}" />
							</p:overlayPanel>
						</p:column>
						<p:column style="text-align:left !important;">
							<f:facet name="header">
								<h:outputText value="#{messages.LABEL_PAGADOR}" />
							</f:facet>
							<h:outputText id="colunaPagador" value="#{pesquisaEspecialidadeDisponivelPaginatorController.obterHint(item.pagador,10)}" />
							<p:overlayPanel id="hintColunaPagador" for="colunaPagador"
								showEvent="mouseover" hideEvent="mouseout"
								rendered="#{item.pagador.length() > 10}">
								<h:outputText value="#{item.pagador}" />
							</p:overlayPanel>
						</p:column>
						<p:column style="text-align:left !important;">
							<f:facet name="header">
								<h:outputText value="#{messages.LABEL_AUTORIZACAO}" />
							</f:facet>
							<h:outputText id="colunaAutorizacao" value="#{pesquisaEspecialidadeDisponivelPaginatorController.obterHint(item.autorizacao,26)}" />
							<p:overlayPanel id="hintColunaAutorizacao" for="colunaAutorizacao"
								showEvent="mouseover" hideEvent="mouseout"
								rendered="#{item.autorizacao.length() > 26}">
								<h:outputText value="#{item.autorizacao}" />
							</p:overlayPanel>
						</p:column>
						<p:column style="text-align:left !important;">
							<f:facet name="header">
								<h:outputText value="#{messages.LABEL_QUANTIDADE}" />
							</f:facet>
							<h:outputText value="#{item.quantidade}" />
						</p:column>
						<p:column style="text-align:left !important;">
							<f:facet name="header">
								<h:outputText value="#{messages.LABEL_SITUACAO}" />
							</f:facet>
							<h:outputText id="colunaSituacao" value="#{item.situacao}" />
						</p:column>
				</mec:serverDataTable>
	 		</aghu:panelGeral>
		</h:form>
		</aghu:linha>
    </ui:define> 
  </ui:composition> 
</html>