<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:aghu="http://xmlns.jcp.org/jsf/component" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:mf="http://www.mec.gov.br/taglib">  
  <ui:composition template="/WEB-INF/templates/form_template.xhtml"> 
    <ui:define name="head"> 
      <title>#{messages.FIELDSET_TITLE_REQ_AUT_OPMS}</title>  
              <style xml:space="preserve">
   		#suggestionMaterialOpmes:suggestionMaterialOpmes:suggestion_input{
			width:300px !important;
		}
		#suggestionMaterialOpmes:suggestionMaterialOpmes:sgText{
			width:300px !important;
		}
		.externaQtdeSolicitada{
			width:65px;
		    overflow: auto;
		    display: table;
		}
		.qtdeSolicitadaCampo {
			display: table-cell;
    		vertical-align: middle;
    		width: 30px;
		}
		.qtdeSolicitadaCampo input[type=text]{
			width: 30px;
			height: 27px;
		}
		.botoesQuantidades {
			float:left;
			width:10px;
			height:36px;
			margin-bottom:-5px;
			margin-top:1px;
		}
		
		.botoesQuantidades input[type=button]{
			background-color: #4a75b5;
			display: block;
    		vertical-align: middle;
            font-size:8px;
            width:20px;
            height:15px;
		}
		
		.botaoQuantidade1,  .botaoQuantidade2{
		}
		
		div#inputSituacaoProcessoAutorizacao label,
		div#inputTotalCompativel label,
		div#inputTotalIncompativel {
			margin: 3px 6px;
		}
		.botaoQuantidade1 span.ui-c{
			margin-left:-7px;
			margin-top:-3px;  
		}
		.botaoQuantidade2 span.ui-c{
			margin-left:-6px; 
			margin-top:-4px;  
		}
		#tabelaListagemOpmes_data  thead{ 
			display: none !important;
		}
		
		#tabelaListagemOpmes_data  td{ 
			padding:1px 6px 1px !important;
		}
		
		#tabelaListagemOpmes th{ 
			font-size:9px !important;
		} 
		#tabelaListagemOpmes td{ 
			font-size:9px !important;
		}
		#inputSituacaoProcessoAutorizacao{  
			margin-top:3px; !important;
		}
		#inputTotalCompativel{  
			margin-top:3px; !important;
		}
		#icon_grupo {
			border: none;
			width: 25%;
			padding: 20px;
			border-radius: 10px;
		}	
		
	</style>  
    </ui:define>  
    <ui:define name="metadata"> 
      <f:metadata> 
        <f:viewAction action="#{requisicaoAutorizacaoOPMsController.inicio}"/> 
      </f:metadata> 
    </ui:define>  
    <ui:define name="body"> 
      <mec:pageConfig controller="#{requisicaoAutorizacaoOPMsController}"/>  
      <h:form prependId="false" id="formPesquisa"> 
        <p:outputPanel id="panelPrincipal" layout="inline" styleClass="aghu-panel-geral"> 
          <aghu:panelGeral legend="#{messages.FIELDSET_TITLE_REQ_AUT_OPMS}"> 
            <aghu:linha> 
              <mec:inputTextData id="dataRequisicao" size="15" label="#{messages.LABEL_DATA_REQUISICAO_ACOMP_PROC_AUT_OPMS}" value="#{requisicaoAutorizacaoOPMsController.dataRequisicao}" readonly="true" tipo="data"/>  
              <mec:inputText id="requerente" size="35" label="#{messages.LABEL_REQUERENTE}" value="#{requisicaoAutorizacaoOPMsController.requerente.matriculaVinculoNome}" readonly="true"/>  
              <mec:inputText id="etapaAtualRequisicao" size="38" label="#{messages.LABEL_ETAPA_ATUAL_REQUISICAO}" value="#{requisicaoAutorizacaoOPMsController.etapaAtualRequisicao}" readonly="true"/>  
              <mec:inputText id="procedimentoPrincipal" size="46" label="#{messages.LABEL_PROCEDIMENTO_PRINCIPAL}" value="#{requisicaoAutorizacaoOPMsController.procedimentoPrincipal}" readonly="true"/>  
              <mec:inputText id="procedimentoSus" size="46" label="#{messages.LABEL_REQUISICAO_PROCEDIMENTO_SUS}" value="#{requisicaoAutorizacaoOPMsController.procedimentoSus}" readonly="true"/> 
              <mec:inputNumero id="valorUnit" 
              		value="#{requisicaoAutorizacaoOPMsController.valorUnit}" 
              		label="#{messages.LABEL_VALOR_UNITARIO_SUS_OPME_PROCED}" 
              		maxlength="15" 
              		size="12" 
              		decimais="2"
              		readonly="true"
              		style="text-align:right !important;" />  
            </aghu:linha> 
            <aghu:linha> 
				<mec:inputTextData id="idDataProcedimento" 
              		label="#{messages.LABEL_CONS_PREP_OPME_DT_PROD}" 
              		readonly="true" 
              		value="#{requisicaoAutorizacaoOPMsController.dataProcedimento}" 
              		tipo="data"/> 
              	 <mec:inputText id="idNomePaciente" 
              		value="#{requisicaoAutorizacaoOPMsController.nomePaciente}" 
              		label="#{messages.LABEL_CONS_PREP_OPME_PACIENTE}" 
              		maxlength="50" 
              		size="50" 
              		readonly="true"/>  
              	 <mec:inputText id="idProtuario" 
              		value="#{requisicaoAutorizacaoOPMsController.strProntuario}" 
              		label="#{messages.LABEL_CONS_PREP_OPME_PRONT}" 
              		maxlength="8" 
              		size="8" 
              		readonly="true"/>  
            </aghu:linha>  		
            <aghu:linha> 
              <mec:inputTextArea id="justificativa" cols="80" rows="4" label="#{messages.LABEL_JUSTIF_REQUISICAO_MATERIAIS}" size="90" value="#{requisicaoAutorizacaoOPMsController.justificativa}" removerCaratersEspeciais="false" readonly="true"/>  
              <mec:inputTextArea id="observacao" cols="80" rows="4" label="#{messages.LABEL_OBSERVACOES_GERAIS}" size="90" value="#{requisicaoAutorizacaoOPMsController.observacao}" removerCaratersEspeciais="false" readonly="true"/> 
            </aghu:linha> 
            <aghu:linha> 
            <mec:commandButton id="btVisualisarAutorizacao" 
            		value="#{messages.LABEL_CONS_PREP_OPME_VISU_AUTO}" 
            		block="true"
            		disabled="#{not requisicaoAutorizacaoOPMsController.habilitaBotaoVisualizarAutorizacao}" 
            		action="#{requisicaoAutorizacaoOPMsController.visualizarAutorizacao}" 
            		style="float: left; margin-top: 15px !important;" 
            		styleClass=" icon-see-print bt_cinza"> 
              <f:setPropertyActionListener target="#{visualizarAutorizacaoOpmeController.voltarParaUrl}" value="blococirurgico-requisicaoAutorizacaoOPMs" for="command"/>  
              <f:setPropertyActionListener target="#{visualizarAutorizacaoOpmeController.seqRequisicao}" value="#{requisicaoAutorizacaoOPMsController.itemRequisicao.requisicaoSeq}" for="command"/> 
            </mec:commandButton> 
            
            <mec:commandButton id="consultarHistorico"
              		value="#{messages.LABEL_ACAO_CONSULTAR_HISTORICO_PROCESSO_OPME}" 
              		action="#{requisicaoAutorizacaoOPMsController.consultarHistorico()}" 
              		disabled="#{requisicaoAutorizacaoOPMsController.fluxoSeq eq null ? true : false}"
              		styleClass="icon-see-print bt_cinza" 
              		ajax="true" 
              		render="modalConsultarHistoricoProcessoPanel" 
              		style="float: right; margin-top: 15px !important;">   
            </mec:commandButton> 
             <mec:commandButton id="consultarHistoricoGrid"
              		value="Visualizar Tabela OPMEs" 
              		action="#{requisicaoAutorizacaoOPMsController.carregaGridOpme()}" 
              		styleClass="icon-see-print bt_cinza" 
              		render="modalConsultarGridWG" 
              		style="float: right; margin-top: 15px !important;">   
            </mec:commandButton> 
             </aghu:linha> 
          </aghu:panelGeral> 
        </p:outputPanel>  
        <aghu:panelGeral legend="#{messages.FIELDSET_TITLE_LISTA_MATERIAIS_PROCED}"> 
          <aghu:linha> 
            <mec:selectOneMenu id="compativel" 
            		enum="DominioSimNao" 
            		label="#{messages.LABEL_REQUISICAO_COMPATIVEL}" 
            		title="#{messages.TITLE_REQUISICAO_COMPATIVEL}" 
            		value="#{requisicaoAutorizacaoOPMsController.compativel}"/>  
            <mec:selectOneMenu id="licitado" 
            		enum="DominioSimNao" 
            		label="#{messages.LABEL_REQUISICAO_LICITADO}" 
            		title="#{messages.TITLE_REQUISICAO_LICITADO}" 
            		value="#{requisicaoAutorizacaoOPMsController.licitado}"/>  
            <mec:commandButton id="btPesquisar" 
            		value="#{messages.LABEL_PESQUISAR}" 
            		action="#{requisicaoAutorizacaoOPMsController.pesquisar}" 
            		render="regionTabelaListaMateriais" 
            		profile="search" 
            		style="margin-top: 15px !important;"/> 
            
          </aghu:linha>  
          <p:outputPanel  id="regionTabelaListaMateriais" layout="inline"> 
            <aghu:linha>  
                <mec:serverDataTable id="tableListaMateriais"
                	style="border-top: 0 none !important" 
                	name="tableListaMateriais"  
                	list="#{requisicaoAutorizacaoOPMsController.listaMateriaisVO}"
                	selection="itemListaSelecionado"
                	controller="#{requisicaoAutorizacaoOPMsController}"
                	rendered="#{not empty requisicaoAutorizacaoOPMsController.listaMateriaisVO}"> 
                  <c:set var="_item" value="#{item}"/>  
                  
                  
                  <p:column  sortable="true" style="width:4%;"> 
	                  <f:facet name="header"> 
	                  	<h:outputText value="#{messages.LABEL_ORCAMENTO}"/> 
	                  </f:facet>  
                 		<h:commandLink
									rendered="#{_item.anexoOrcamento != null}" 
									title="#{messages.TITLE_DOWNLOAD_DOCUMENTO}"
									actionListener="#{requisicaoAutorizacaoOPMsController.download(_item)}"
									styleClass="silk-icon silk-attach"
									style="margin-left:16px;"/>
                  </p:column> 
                  
                  <p:column style="width:27%;"> 
                    <f:facet name="header"> 
                      <h:outputText value="#{messages.LABEL_CODIGO_DESCRICAO_MATERIAL}" title="#{messages.LABEL_CODIGO_DESCRICAO_MATERIAL}" style="float:left !important; text-align:left !important;"/> 
                    </f:facet>  
                    <h:outputText value="#{_item.codigoDescricaoMaterial}"/> 
                  </p:column>  
                  <p:column> 
                    <f:facet name="header"> 
                      <h:outputText value="#{messages.LABEL_REQUISICAO_COMPATIVEL}" title="#{messages.HELP_LABEL_REQUISICAO_COMPATIVEL}" style="float:left !important; text-align:left !important;"/> 
                    </f:facet>  
                    <h:outputText value="#{_item.compativel}"/> 
                  </p:column>  
                  <p:column> 
                    <f:facet name="header"> 
                      <h:outputText value="#{messages.LABEL_REQUISICAO_LICITADO}" title="#{messages.HELP_LABEL_REQUISICAO_LICITADO}" style="float:left !important; text-align:left !important;"/> 
                    </f:facet>  
                    <h:outputText value="#{_item.licitado}"/> 
                  </p:column>  
                  <p:column> 
                    <f:facet name="header"> 
                      <h:outputText value="#{messages.LABEL_QTDE_SOL_OPM}" title="#{messages.TITLE_QTDE_SOL}" style="float:left !important; text-align:left !important;"/> 
                    </f:facet>  
                    <h:outputText value="#{_item.quantidadeSolicitada}" style="float:right !important; text-align:right !important;"/> 
                  </p:column>  
                  <p:column> 
                    <f:facet name="header"> 
                      <h:outputText value="#{messages.LABEL_QTDE_AUT_SUS}" title="#{messages.HELP_LABEL_QTDE_SUS}" style="float:left !important; text-align:left !important;"/> 
                    </f:facet>  
                    <h:outputText value="#{_item.quantidadeAutorizadaHospital}" style="float:right !important; text-align:right !important;"/> 
                  </p:column>  
                  <p:column> 
                    <f:facet name="header"> 
                      <h:outputText value="#{messages.LABEL_VALOR_UNITARIO_SUS_OPME}" title="#{messages.HELP_LABEL_REQUISICAO_VALOR_UNITARIO}" style="float:left !important; text-align:left !important;"/> 
                    </f:facet>  
                    <h:outputText value="#{_item.valorUnitario}" styleClass="mascara(decimal)}" style="float:right !important; text-align:right !important;"> 
                      <f:converter converterId="currencyConverter"/> 
                    </h:outputText> 
                  </p:column>  
                  <p:column> 
                    <f:facet name="header"> 
                      <h:outputText value="#{messages.LABEL_VL_TOTAL_SOL}" title="#{messages.HELP_LABEL_VALOR_TOTAL_SOLICITADO}" style="float:left !important; text-align:left !important;"/> 
                    </f:facet>  
                    <h:outputText value="#{_item.valorTotalSolicitado}" styleClass="mascara(decimal)}" style="float:right !important; text-align:right !important;"> 
                      <f:converter converterId="currencyConverter"/> 
                    </h:outputText> 
                  </p:column>  
                  <p:column> 
                    <f:facet name="header"> 
                      <h:outputText value="#{messages.LABEL_VAL_TOTAL_AUT_SUS}" title="#{messages.HELP_LABEL_VAL_TOTAL_AUT_SUS}" style="float:left !important; text-align:left !important;"/> 
                    </f:facet>  
                    <h:outputText value="#{_item.valorTabelaSus}" styleClass="mascara(decimal)}" style="float:right !important; text-align:right !important;"> 
                      <f:converter converterId="currencyConverter"/> 
                    </h:outputText> 
                  </p:column>  
                  <p:column> 
                    <f:facet name="header"> 
                      <h:outputText value="#{messages.LABEL_REQUISICAO_DIFERENCA_VALOR}" title="#{messages.HELP_LABEL_REQUISICAO_DIFERENCA_VALOR}" style="float:left !important; text-align:left !important;"/> 
                    </f:facet>  
                    <h:outputText value="#{_item.diferencaValor}" styleClass="mascara(decimal)}" style="float:right !important; text-align:right !important;"> 
                      <f:converter converterId="currencyConverter"/> 
                    </h:outputText> 
                  </p:column> 
                </mec:serverDataTable>
            </aghu:linha>  
            <aghu:linha> 
              <div style="float: right !important;">
	            <mec:inputNumero id="totalCompativel" 
              		label="#{messages.LABEL_TOTAL_COMPATIVEL}" 
              		value="#{requisicaoAutorizacaoOPMsController.totalCompativel}" 
              		posicaoLabel="esquerda" 
              		decimais="2"
              		style="text-align:right !important;"
              		readonly="true"/>  
                <mec:inputNumero id="totalIncompativel"
              		label="#{messages.LABEL_TOTAL_INCOMPATIVEL}" 
              		value="#{requisicaoAutorizacaoOPMsController.totalIncompativel}" 
              		posicaoLabel="esquerda"
              		decimais="2" 
              		style="text-align:right !important;"
              		readonly="true"/>
              </div> 
            </aghu:linha>  
            <aghu:linha> 
              <mec:inputTextArea id="incompatibilidade" 
              		rows="4" 
              		label="#{messages.LABEL_INCOMPATIBILIDADES_ENCONTRADAS}"
					cols="150"
              		value="#{requisicaoAutorizacaoOPMsController.incompatibilidade}" 
              		removerCaratersEspeciais="false" 
              		readonly="true"/> 
            </aghu:linha>  
            <br clear="none"/> 
          </p:outputPanel>  
          <aghu:linha> 
            <mec:commandButton id="btAutorizar" 
            	value="#{messages.LABEL_AUTORIZAR}" 
            	readonly="#{not requisicaoAutorizacaoOPMsController.habilitaAutorizacao}"
            	action="#{requisicaoAutorizacaoOPMsController.abreObservacaoAutorizacao}"
            	process="@this"
            	ajax="true" 
            	profile="ok"
            	style="float: left;"/>  
            <mec:commandButton id="btNaoAutorizar" 
            	value="#{messages.LABEL_NAO_AUTORIZAR}" 
            	readonly="#{not requisicaoAutorizacaoOPMsController.habilitaAutorizacao}"
            	action="#{requisicaoAutorizacaoOPMsController.abreJustificativaNegacao}" 
            	styleClass="bt_verde icon-negar"
            	profile="cancel"
            	process="@this"
            	ajax="true"
            	style="float: left;"/>  
            <mec:commandButton id="bt_voltar" 
            	value="#{messages.LABEL_VOLTAR}"
            	immediate="true"
				action="#{requisicaoAutorizacaoOPMsController.voltar}"
				styleClass="bt_vermelho icon-back bt_cinza"
				profile="back"/> 
          </aghu:linha> 
        </aghu:panelGeral> 
        <p:dialog id="modalObservacaoAprovacao" 
        		width="480" 
        		height="170" modal="true"
				overlapEmbedObjects="true"
				showWhenRendered="#{requisicaoAutorizacaoOPMsController.abreObservacaoAutorizacao}"
				widgetVar="modalObservacaoAprovacaoWG">
		  <f:facet name="header" id="headerModalObservacaoAprovacao">
			<h:panelGroup id="panelHeaderGroupModalObservacaoAprovacao">
				<h:outputText value="#{messages.TITLE_CONFIRMAR_AUTORIZACAO}" id="textLabelObservacaoAprovacao" />
			</h:panelGroup>
		  </f:facet>
		  <aghu:linha>
		    <p:outputPanel id="outtextAreaObservacaoAprovacao">
			  <mec:inputTextArea id="textAreaObservacaoAprovacao" 
			  		rows="4" style="width: 445px;" 
			  		label="#{messages.LABEL_OBSERVACAO_AUTORIZACAO}"
					size="125" maxlength="500" styleClass="maxlength_(500)" 
					value="#{requisicaoAutorizacaoOPMsController.observacaoAutorizacao}"
					removerCaratersEspeciais="false">
				<p:ajax event="change" process="@this" ajax="true" />
			  </mec:inputTextArea>
			</p:outputPanel>
		  </aghu:linha>
		  <aghu:acao class="acaoInterna">
		    <mec:commandButton id="btGravaObservacaoAprovacao"
		    	render="outObservacaoAprovacao,btAutorizar,btNaoAutorizar" 
		    	styleClass="bt_secund icon-yes"
				value="#{messages.TITLE_CONFIRMAR_AUTORIZACAO}"
				process="@this"
				ajax="true"
				action="#{requisicaoAutorizacaoOPMsController.autorizar}"
				profile="ok" style="margin-top:10px !important;" >
			  <f:setPropertyActionListener target="#{acompanharProcessoAutorizacaoOPMsController.executarIniciar}" value="#{true}" for="command"/>
			</mec:commandButton>		
			<mec:commandButton id="btCancelarObservacaoAprovacao" 
				styleClass="bt_error icon-no"
				value="#{messages.LABEL_CANCELAR}"
				process="@this" 
				ajax="true"
				action="#{requisicaoAutorizacaoOPMsController.cancelarObservacaoAutorizacao}"
				profile="cancel" style="margin-top:10px !important;" />
		  </aghu:acao>
		</p:dialog>  
		</h:form>   
		<p:dialog id="modalJustificativaNegacao" 
			width="480" height="190" modal="true"
			showWhenRendered="#{requisicaoAutorizacaoOPMsController.abreJustificativaNegacao}"
			widgetVar="modalJustificativaNegacaoWG">
		<h:form prependId="false" id="formJust"> 	
		  <f:facet name="header" id="headerModalJustificativa">
			<h:panelGroup id="panelHeaderGroupModalJustificativa">
			  <h:outputText value="#{messages.TITLE_JUSTIFICATIVA_NAO_AUTORIZAR_REQUISICAO}" id="textLabelJustificativa"></h:outputText>
			</h:panelGroup>
		  </f:facet>
		  <aghu:linha>
			<p:outputPanel id="outtextAreaJustificativa">
			  <mec:inputTextArea id="textAreaJustificativa" rows="4" style="width: 445px;" 
			  		label="#{messages.LABEL_JUSTIFICATIVA}" size="125"
					required="true" maxlength="500"
					styleClass="maxlength_(500)" 
					value="#{requisicaoAutorizacaoOPMsController.justificativaNegacao}"
					removerCaratersEspeciais="false">
			    <p:ajax event="change" process="@this" ajax="true" />
			  </mec:inputTextArea>
		    </p:outputPanel>
		  </aghu:linha>
		  <aghu:acao class="acaoInterna">
			<mec:commandButton id="btGravaJustificativa" 
				render="outJustificativa" 
				styleClass="bt_secund icon-yes" 
				value="#{messages.LABEL_GRAVAR}" 
				process="@this"
				ajax="true" 
				action="#{requisicaoAutorizacaoOPMsController.naoAutorizar}"
				profile="ok" />
			<mec:commandButton id="btCancelarJustificativa" 
				render="outJustificativa" 
				styleClass="bt_error icon-no" value="#{messages.LABEL_CANCELAR}" 
				process="@this"
				ajax="true" 
				action="#{requisicaoAutorizacaoOPMsController.cancelarObservacaoNaoAutorizacao}"
				profile="cancel" /> 					
		  </aghu:acao>
		 </h:form>
		</p:dialog>
		<h:form prependId="false"> 
        	<p:outputPanel layout="inline"> 
		      <p:dialog id="modalConsultarHistoricoProcesso" 
		    		resizeable="false" 
		    		zindex="2" 
		    		width="900" 
		    		height="450" 
		    		modal="true" 
		    		resizable="false" 
		    		widgetVar="modalConsultarHistoricoProcessoWG" 
		    		closable="true"> 
		      <f:facet name="header"> 
		        <h:panelGroup> 
		          <h:outputText value="#{messages.FILDSET_MODAL_CONSULTAR_HISTORICO_PROCESSO}"/> 
		        </h:panelGroup> 
		      </f:facet>  
		      <aghu:panelGeral style="padding:10px;"> 
		        <p:outputPanel id="modalConsultarHistoricoProcessoPanel" layout="inline"> 
		          <aghu:linha> 
		            <div id="divTableHist" style="width:100%; max-height: 300px; overflow:auto;"> 
		              <mec:serverDataTable xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" 
		              		id="tableConsultarHistoricoProcesso" 
		              		name="tableConsultarHistoricoProcesso" 
		              		list="#{requisicaoAutorizacaoOPMsController.listaHistoricoVO}"
		              		selection="requisicoesOPMEsProcedimentosVinculadosSelecionado"
		              		controller="#{requisicaoAutorizacaoOPMsController}" 
		              		scrollable="true">  
		                <c:set var="_item" value="#{item}"/>  
		                <p:column sortBy="#{_item.dataRegistro}" sortable="true"> 
		                  <f:facet name="header"> 
		                    <h:outputText value="#{messages.LABEL_REGISTRO_ANOTACOES}"/> 
		                  </f:facet>  
		                  <h:outputText value="#{_item.dataRegistro}"> 
		                    <f:convertDateTime pattern="dd/MM/yyyy"/> 
		                  </h:outputText> 
		                </p:column>  
		                <p:column sortBy="#{_item.descricaoEtapa}" sortable="true"> 
		                  <f:facet name="header"> 
		                    <h:outputText value="#{messages.LABEL_ETAPA}"/> 
		                  </f:facet>  
		                  <h:outputText value="#{_item.descricaoEtapa}"/> 
		                </p:column>  
		                <p:column sortBy="#{_item.nomePessoaFisica}" sortable="true"> 
		                  <f:facet name="header"> 
		                    <h:outputText value="#{messages.LABEL_EXECUTOR}"/> 
		                  </f:facet>  
		                  <h:outputText value="#{_item.nomePessoaFisica}"/> 
		                </p:column>  
		                <p:column sortBy="#{_item.acao.descricao}" sortable="true"> 
		                  <f:facet name="header"> 
		                    <h:outputText value="#{messages.LABEL_ACAO_REALIZADA}"/> 
		                  </f:facet>  
		                  <h:outputText value="#{_item.acao.descricao}"/> 
		                </p:column>  
		                <p:column sortBy="#{_item.justificativa}" sortable="true"> 
		                  <f:facet name="header"> 
		                    <h:outputText value="#{messages.LABEL_JUSTIFICATIVA}"/> 
		                  </f:facet>  
		                  <h:outputText value="#{_item.justificativa}"/> 
		                </p:column>  
		                <p:column sortBy="#{_item.observacao}" sortable="true"> 
		                  <f:facet name="header"> 
		                    <h:outputText value="#{messages.LABEL_OBSERVACAO}"/> 
		                  </f:facet>  
		                  <h:outputText value="#{_item.observacao}"/>  
		                  <p:tooltip direction="bottom-right" styleClass="tooltip" layout="block"> 
		                    <h:outputText value="#{_item.observacao}"/> 
		                  </p:tooltip> 
		                </p:column> 
		              </mec:serverDataTable> 
		            </div> 
		          </aghu:linha> 
		        </p:outputPanel> 
		      </aghu:panelGeral> 
		    </p:dialog> 
        	</p:outputPanel> 
       </h:form> 
       
       <h:form prependId="false"> 
        	<p:outputPanel layout="inline"> 
		      <p:dialog id="modalConsultarGrid" 
		    		resizeable="false" 
		    		zindex="2" 
		    		width="950" 
		    		height="500" 
		    		modal="true" 
		    		resizable="false" 
		    		widgetVar="modalConsultarGridWG" 
		    		closable="true"> 
		      <f:facet name="header"> 
		        <h:panelGroup> 
		          <h:outputText value="Tabela OPMEs"/> 
		        </h:panelGroup> 
		      </f:facet>  
		      <aghu:panelGeral style="padding:10px;"> 
			    <p:dataTable  id="tabelaListagemOpmes" 
		          name="tabelaListagemOpmes" 
		          value="#{requisicaoAutorizacaoOPMsController.listaPesquisada}" 
		          var="_itemModal" 
		          style="float:left !important;"> 
	          
	            <p:column id="colCor" style="width: 3%; vertical-align: center;" headerText="Grupo"> 
					<div id="icon_grupo"  style="background-color: #{_itemModal.cor.descricao} !important;"></div>
	            </p:column>  
	            <p:column id="colItemProcedimentoHospitalar" style="width: 15%" headerText="#{messages.LABEL_ITEM_PROCEDIMENTO_HOSPITALAR_SIGTAP}"> 
	              <h:outputText value="#{_itemModal.itemProcedimentoHospitalar}" rendered="#{empty _itemModal.voQuebra}" id="colTextoItemProcedimentoHospitalar" title="#{_itemModal.itemProcedimentoHospitalar}"/> 
	            </p:column>  
	            <p:column id="colQtdeAut" style="text-align:right; width: 5%" headerText="#{messages.LABEL_QTDE_AUT}"> 
	              <h:outputText value="#{_itemModal.qtdeAut}" id="colTextoQtdeAut" rendered="#{empty _itemModal.voQuebra}"/> 
	            </p:column>  
	            <p:column id="colQtdeSol" style="text-align:right; width: 5%" headerText="#{messages.LABEL_QTDE_SOLICITADA_OPME}">  
	              <h:outputText value="#{_itemModal.qtdeSol}" id="colTextQtdeSol" rendered="#{empty _itemModal.voQuebra}" style="#{_itemModal.corQtdeSol}"/> 
	            </p:column>  
	            <p:column id="colValorunit" style="text-align:right; width: 4%" headerText="#{messages.LABEL_VALOR_UNIT_OPMES}">  
	              <h:outputText value="#{_itemModal.valorUnit}" id="colTextoValorUnit" rendered="#{empty _itemModal.voQuebra}"> 
	                <f:convertNumber pattern="#,##0.00"/> 
	              </h:outputText> 
	            </p:column>  
	            <p:column id="colValorTotal" style="text-align:right; width: 3%" headerText="#{messages.LABEL_VLR_TOTAL}"> 
	              <h:outputText value="#{_itemModal.valorTotal}" id="colValorTotalText" rendered="#{empty _itemModal.voQuebra}"> 
	                <f:convertNumber pattern="#,##0.00"/> 
	              </h:outputText> 
	            </p:column>  
	            
	            <p:column id="colSel" style="width: 39%" rendered="#{empty _itemModal.voQuebra}" headerText="Material Hospital"> 
		         		<p:dataTable id="tabelaListagemOpmes2" 
			         		 name="tabelaListagemOpmes2"  
			          		 value="#{_itemModal.filhos}" 
			          		 var="_filho"
			          		 style="width: 100% !important;">
			          		 
			          		  <p:column id="colSel1" style="width: 10%" > 
					                <div class="externaQtdeSolicitada"> 
					                  <div class="qtdeSolicitadaCampo"> 
					                    <h:inputText id="colSelecionado" 
					                    	label="#{messages.LABEL_TOTAL_COMPATIVEL}" 
					                    	style="text-align:right;" 
					                    	value="#{_filho.qtdeSolicitadaMaterial}"
					                    	disabled="true"> 
					                      <f:converter converterId="javax.faces.Integer"/>  
					                    </h:inputText> 
					                  </div>  
					                </div> 
		            		</p:column>  
			          		<p:column id="colCodigo" style="width:64%;white-space:normal!important" >
			          			<h:outputText value="#{_filho.codigoEDescricao}" title="#{_filho.codigoEDescricao}"/>
			          		</p:column>
			          		<p:column id="colMaterialMarca" style="width: 15%" >
			          			<h:outputText value="#{_filho.descricaoMarcasComerciais}" title="#{_filho.descricaoMarcasComerciais}"/>
			          		</p:column>
			          		<p:column id="colUnidadeMaterial" style="width: 9%" >
			          			<h:outputText value="#{_filho.unidadeMaterial}" title="#{_filho.unidadeMaterial}"/>
			          		</p:column>    
			          	</p:dataTable>	  
		            </p:column>  
		       	</p:dataTable> 
		      </aghu:panelGeral> 
		    </p:dialog> 
        	</p:outputPanel> 
       </h:form>
    </ui:define> 
  </ui:composition> 
</html>
