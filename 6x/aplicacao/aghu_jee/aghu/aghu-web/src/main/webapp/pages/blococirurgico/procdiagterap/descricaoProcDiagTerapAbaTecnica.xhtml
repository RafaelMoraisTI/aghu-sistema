<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:aghu="http://xmlns.jcp.org/jsf/component" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:mf="http://www.mec.gov.br/taglib">  
  <ui:composition> 
    <h:form prependId="false" id="formPesquisaDescTecnica"> 
      <aghu:linha> 
        <mec:inputTextData id="dthrInicioProcedimento" label="#{messages.LABEL_DESCRICAO_PROC_DIAG_TERAP_INICIO_PROCEDIMENTO}" title="#{messages.TITLE_DESCRICAO_PROC_DIAG_TERAP_INICIO_PROCEDIMENTO}" size="16" maxlength="16" readonly="#{descricaoProcDiagTerapController.isShowNotaAdicional()}" value="#{descricaoProcDiagTerapTecnicaController.dthrInicioProcedimento}" tipo="datahora"> 
          <p:ajax event="dateSelect" update="@(#bodyDescricaoProcDiagTerap)" process="@this" listener="#{descricaoProcDiagTerapTecnicaController.gravarDadoDescDthrInicio}"/>
          <p:ajax event="change" update="@(#bodyDescricaoProcDiagTerap)" process="@this" listener="#{descricaoProcDiagTerapTecnicaController.gravarDadoDescDthrInicio}"/> 
        </mec:inputTextData>  
        <mec:inputTextData id="dthrFimProcedimento" label="#{messages.LABEL_DESCRICAO_PROC_DIAG_TERAP_FIM_PROCEDIMENTO}" title="#{messages.TITLE_DESCRICAO_PROC_DIAG_TERAP_FIM_PROCEDIMENTO}" size="16" maxlength="16" readonly="#{descricaoProcDiagTerapController.isShowNotaAdicional()}" value="#{descricaoProcDiagTerapTecnicaController.dthrFimProcedimento}" tipo="datahora"> 
          <p:ajax event="dateSelect" update="@(#bodyDescricaoProcDiagTerap)" process="@this" listener="#{descricaoProcDiagTerapTecnicaController.gravarDadoDescDthrFim}"/>
          <p:ajax event="change" update="@(#bodyDescricaoProcDiagTerap)" process="@this" listener="#{descricaoProcDiagTerapTecnicaController.gravarDadoDescDthrFim}"/> 
        </mec:inputTextData> 
      </aghu:linha>
      <aghu:linha>
	      <table width="100%" cellpadding="0" cellspacing="0" style="border-spacing: 10px !important;"> 
	        <tr valign="top"> 
	          <td id="procedimento_td" rowspan="1" colspan="1"> 
	            <mec:field name="procedimento_field" id="procedimento_field" required="false" fieldStyle="float: none !important;" label="#{messages.LABEL_PROCEDIMENTOS}" 
	            title="#{descricaoProcDiagTerapController.isShowNotaAdicional() ? '' : messages.TITLE_DESCRICAO_PROC_DIAG_TERAP_PROCEDIMENTOS}"/>  
	            <div style="border: 1px solid #CCC !important; border-radius: 3px !important; width: 98% !important; height: 300px !important; overflow:auto;"> 
	              <p:outputPanel id="tree_panel" layout="inline"> 
					<p:tree value="#{descricaoProcDiagTerapTecnicaController.nodoRaiz}"
					var="nodo" animate="true" dynamic="true" cache="false" id="tree" style="width:100%"
					selectionMode="single" selection="#{descricaoProcDiagTerapTecnicaController.nodoSelecionado}">  
						<p:ajax event="expand" listener="#{descricaoProcDiagTerapTecnicaController.onNodeExpand}" disabled="#{descricaoProcDiagTerapController.isShowNotaAdicional()}"/>
						<p:ajax event="select" listener="#{descricaoProcDiagTerapTecnicaController.onNodeSelect}" update="@(#descricao_textarea)" disabled="#{descricaoProcDiagTerapController.isShowNotaAdicional()}"/>
						<p:treeNode>
							<div style="float:left; padding-right:6px;">
								<p:graphicImage library="img" url="#{nodo.icone}" rendered="#{not empty nodo.icone}" />  
							</div>
							<div>
								<h:outputText value="#{nodo.descricao}"/>
							</div>
						</p:treeNode>  
					</p:tree>
	              </p:outputPanel> 
	            </div> 
	          </td>  
	          <td id="descricao_td" rowspan="1" colspan="1"> 
	            <mec:inputTextArea id="descricao_textarea" cols="93" rows="21" label="#{messages.LABEL_DESCRICAO}" 
	            title="#{messages.TITLE_DESCRICAO_PROC_DIAG_TERAP_DESCRICAO}" 
	            value="#{descricaoProcDiagTerapTecnicaController.strDescricaoTecnica}" requiredFake="true" 
	            readonly="#{descricaoProcDiagTerapController.isShowNotaAdicional()}" maxlength="4000"> 
	              <p:ajax event="change" process="@this" listener="#{descricaoProcDiagTerapTecnicaController.gravarDescricaoTecnica}"/> 
	            </mec:inputTextArea> 
	          </td> 
	        </tr> 
	      </table>
		</aghu:linha>
    </h:form> 
  </ui:composition> 
</html>
