<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:aghu="http://xmlns.jcp.org/jsf/component" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:mf="http://www.mec.gov.br/taglib">  
  <ui:composition template="/WEB-INF/templates/form_template.xhtml"> 
                
    <ui:define name="head"><title>#{messages.TITLE_MANTER_TABELAS_SISTEMA}</title>
    </ui:define>                
    <ui:define name="body"> 
      <mec:pageConfig controller="#{tabelasSistemaController}" ignoreEnter="true"/>
		<h:form prependId="false" id="formTabelaSistema">
			<aghu:panelGeral legend="#{messages.TITLE_CADASTRAR_TABELA_SISTEMA}">						
			  	<aghu:linha>												
					<mec:inputNumero
						name="seq"
						required="false"
						value="#{tabelasSistemaController.tabelaSistema.seq}"
						label="#{messages.LABEL_SEQ}"
					    maxlength="6"
					    readonly="true"
					    rendered="#{tabelasSistemaController.mostrarSeq}"				    
					    size="6">
					</mec:inputNumero>

					<mec:inputText label="#{messages.LABEL_NOME}" name="nome" 
					    size="51" maxlength="50" 
						title="#{messages.TITLE_NOME_TABELA_SISTEMA}"
						value="#{tabelasSistemaController.tabelaSistema.nome}"
						required="true"
						styleclass="suggestion_input"
						style="text-transform:uppercase">							
					</mec:inputText>	
				</aghu:linha>
				
				<aghu:linha>						
				
					<mec:suggestionBox id="suggestion_cor"
						label="#{messages.LABEL_COR}"
						title="Selecione a Cor para a pesquisa" descricaoInput="seq"
						descricaoLabel="cor"
						suggestionAction="pesquisarCoresTabelasSistema" required="false"
						controller="#{tabelasSistemaController}"
						value="#{tabelasSistemaController.tabelaSistema.cor}">
						<p:column>
							<f:facet name="header">
							</f:facet>
							#{item.seq}
						</p:column>
						<p:column>
							<f:facet name="header">
								#{messages.LABEL_COR}
							</f:facet>
							#{item.cor}
						</p:column>
						<p:column>
							<f:facet name="header">
								#{messages.LABEL_DESCRICAO}
							</f:facet>
							#{item.descricao}
						</p:column>
					</mec:suggestionBox>
					
					<mec:selectOneMenu enum="DominioCategoriaTabela"
						label="#{messages.LABEL_CATEGORIA}" name="categoria"
						value="#{tabelasSistemaController.tabelaSistema.categoria}"
						title="#{messages.TITLE_CATEGORIA_TABELA_SISTEMA}">
					</mec:selectOneMenu>
					
					<mec:inputText 
						id="versao"
						label="#{messages.LABEL_VERSAO}" 
						name="versao" required="true"
						removerCaratersEspeciais="false"
					    size="11" maxlength="10" 
						title="#{messages.TITLE_VERSAO_TABELA_SISTEMA}"
						value="#{tabelasSistemaController.tabelaSistema.versao}"
						style="text-transform:uppercase">							
					</mec:inputText>
					
				</aghu:linha>
				
				<aghu:linha>						
					<mec:inputTextData
						label="#{messages.LABEL_DATA_CARGA}"
						title="#{messages.TITLE_DATA_CARGA_TABELA_SISTEMA}"
						id="dataCarga" size="10" maxlength="10"
						value="#{tabelasSistemaController.tabelaSistema.dataCarga}" />
						
						<mec:inputTextData
						label="#{messages.LABEL_DATA_VALIDACAO}"
						title="#{messages.TITLE_DATA_VALIDACAO_TABELA_SISTEMA}"
						id="dataValidacao" size="10" maxlength="10"
						value="#{tabelasSistemaController.tabelaSistema.dataValidacao}" />
						
					<mec:inputText 
						id="gestor" 
					    size="51" maxlength="50" 
						label="#{messages.LABEL_GESTOR}" 
						title="#{messages.TITLE_GESTOR_TABELA_SISTEMA}"
						value="#{tabelasSistemaController.tabelaSistema.gestor}"
						style="text-transform:uppercase"/>	
						
						<mec:suggestionBox id="responsavelValidacao"
							label="#{messages.LABEL_RESPONSAVEL_VALIDACAO}"
							title="Selecione o Responsável pela validação" descricaoInput="matriculaVinculo"
							descricaoLabel="nome"
							suggestionAction="pesquisarRapServidoresVOPorCodigoDescricao" 
							controller="#{tabelasSistemaController}"
							value="#{tabelasSistemaController.servidorResponsavelVO}">
							<p:column>
								#{item.nome}
							</p:column>
							<p:column>
								#{item.vinculo}
							</p:column>
							<p:column>
								#{item.matricula}
							</p:column>
						</mec:suggestionBox>
				</aghu:linha>
				
				<aghu:linha>						
					<mec:inputTextData
						label="#{messages.LABEL_DATA_CRIACAO}"
						title="#{messages.TITLE_DATA_CRIACAO_TABELA_SISTEMA}"
						name="dataCriacao" size="10" maxlength="10"
						readonly="true"
						value="#{tabelasSistemaController.tabelaSistema.criadoEm}" />
						
					<mec:inputText 
						id="servidorCriacao"
						name="servidorCriacao" 
						label="#{messages.LABEL_SERVIDOR_CRIACAO}"
						value="#{tabelasSistemaController.tabelaSistema.servidorCriacao.pessoaFisica.nome}"
						size="45"
						readonly="true"
						maxlength="60"/>
						
					<mec:inputTextData
						label="#{messages.LABEL_DATA_ULTIMA_ALTERACAO}"
						title="#{messages.TITLE_DATA_ULTIMA_ALTERACAO_TABELA_SISTEMA}"
						name="dataUltimaAlteracao" size="10" maxlength="10"
						readonly="true"
						value="#{tabelasSistemaController.tabelaSistema.dataUltimaAlteracao}" />
				</aghu:linha>
				<aghu:linha>							
					<mec:inputText 
						id="servidorUltAlteracao"
						name="servidorUltAlteracao" 
						label="#{messages.LABEL_SERVIDOR_ULTIMA_ALTERACAO}"
						value="#{tabelasSistemaController.tabelaSistema.servidorUltAlteracao.pessoaFisica.nome}"
						size="45"
						readonly="true"
						maxlength="60"/>
				</aghu:linha>	
				
				<aghu:linha>						
					<mec:inputText label="#{messages.LABEL_ORIGEM_TABELA_SISTEMA}" name="origem"
					    size="51" maxlength="50"
						title="#{messages.TITLE_ORIGEM_TABELA_SISTEMA}"
						value="#{tabelasSistemaController.tabelaSistema.origem}"
						style="text-transform:uppercase">
					</mec:inputText>
					
					<mec:suggestionBox id="suggestion_menu"
						label="#{messages.LABEL_MENU_TABELA_SISTEMA}"
						title="#{messages.TITLE_MENU_TABELA_SISTEMA}" descricaoInput="id"
						descricaoLabel="nome"
						suggestionAction="pesquisarMenusTabelasSistema" required="false"
						readonly="#{not mf:hasPermission(securityController,'cadastrarPAC,gravar')}"
						controller="#{tabelasSistemaController}"
						value="#{tabelasSistemaController.tabelaSistema.menu}">
						<p:column>
							<f:facet name="header">
								#{messages.LABEL_CODIGO}
							</f:facet>
							#{item.id}
						</p:column>
						<p:column>
							<f:facet name="header">
								#{messages.LABEL_NOME}
							</f:facet>
							#{item.nome}
						</p:column>
					</mec:suggestionBox>
				</aghu:linha>

			  	<aghu:linha>
				  	<mec:inputNumero
						id="periodicidadeNro"
						value="#{tabelasSistemaController.tabelaSistema.periodicidadeNro}"
						jsfConverter="javax.faces.Short"
						label="#{messages.LABEL_NUMERO}" 
					    title="#{messages.TITLE_NUMERO_PERIODICIDADE}"
						maxlength="3" size="5"/>
					     
					<mec:selectOneMenu 
						id="periodicidadeTipo"
						enum="DominioPeriodicidadeAdm"
						label="#{messages.LABEL_PERIODO}" 
						title="#{messages.TITLE_PERIODO_PERIODICIDADE}"
						value="#{tabelasSistemaController.tabelaSistema.periodicidadeTipo}"/>
				</aghu:linha>
				
				<aghu:linha>
					<mec:inputTextArea id="descricao" rows="4" cols="95" maxlength="250" title="#{messages.TITLE_TABELA_SISTEMA_DESCRICAO}" label="#{messages.LABEL_DESCRICAO}" value="#{tabelasSistemaController.tabelaSistema.descricao}" />
				</aghu:linha>
		   </aghu:panelGeral>
			 
		    <aghu:acao>
	    		<mec:commandButton id="bt_salvar" profile="ok"
					value="#{messages.LABEL_GRAVAR}" 
					action="#{tabelasSistemaController.confirmar}">					
				</mec:commandButton>
				<mec:backButton id="bt_cancelar" profile="cancel" value="#{messages.LABEL_CANCELAR}" immediate="true" action="#{tabelasSistemaController.cancelar}"/>

			</aghu:acao>
		</h:form>

	</ui:define>
</ui:composition>
</html>