<?xml version="1.0" encoding="UTF-8"?>

<html 
	xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" 
	xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" 
	xmlns:p="http://primefaces.org/ui" 
	xmlns:pe="http://primefaces.org/ui/extensions" 
	xmlns:aghu="http://xmlns.jcp.org/jsf/component" 
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
	xmlns:f="http://xmlns.jcp.org/jsf/core" 
	xmlns:h="http://xmlns.jcp.org/jsf/html" 
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" 
	xmlns:mf="http://www.mec.gov.br/taglib">
	  
  <ui:composition> 
	 
	<p:poll interval="60" 
		update="tabelaMonitorDesarqProntuarios_Ambulatorio"  
		process="@this"/>

	<aghu:table>
		<mec:serverDataTable id="tabelaMonitorDesarqProntuarios_Ambulatorio" draggableColumns="false" dataModel="ambulatorioDataModel" 
		controller="#{monitorDesarquivamentoProntuarioAmbulatorioPaginatorController}"> 
		  <c:set var="_movimentacaoVO" value="#{item}"/>  
		  <p:column styleClass="auto-adjust" > 
			<f:facet name="header"> 
			  <h:outputText value="#{messages.LABEL_SELECIONAR}"/> 
			</f:facet>  
			  <p:tooltip direction="top-right" styleClass="tooltip" layout="block"> 
				<h:outputText value="#{messages.LABEL_OBS}" style="font-weight: bold;"/>  
				<h:outputText value=" #{_movimentacaoVO.movimentacao.observacoes}"/> 
			  </p:tooltip>  
			  <h:selectBooleanCheckbox value="#{_movimentacaoVO.selecionado}">
			  	<p:ajax event="change" listener="#{monitoramentoDesarquivamentoProntuarioController.selecionarProntuarioAmbulatorio(_movimentacaoVO)}" />
			  </h:selectBooleanCheckbox>
		  </p:column>  
		  <p:column sortBy="#{_movimentacaoVO.movimentacao.paciente.prontuario}" 
		  	style="#{empty _movimentacaoVO.movimentacao.observacoes?'':'background-color: #6495ED'}"> 
			<f:facet name="header"> 
			  <h:outputText value="#{messages.LABEL_PRONTUARIO}"/> 
			</f:facet>  
			<p:outputPanel layout="block"> 
			  <p:tooltip direction="top-right" styleClass="tooltip" layout="block"> 
				<h:outputText value="#{messages.LABEL_OBS}" style="font-weight: bold;"/>  
				<h:outputText value=" #{_movimentacaoVO.movimentacao.observacoes}"/> 
			  </p:tooltip>  
			  <h:outputText style="#{empty _movimentacaoVO.movimentacao.observacoes?'':'color: white'}" value="#{_movimentacaoVO.movimentacao.paciente.prontuario}"/> 
			</p:outputPanel> 
		  </p:column>  
		  <p:column sortBy="#{_movimentacaoVO.movimentacao.paciente.nome}" style="white-space:nowrap!important;"> 
			<f:facet name="header"> 
			  <h:outputText value="#{messages.LABEL_NOME}"/> 
			</f:facet>  
			<p:outputPanel layout="block"> 
			  <p:tooltip direction="top-right" styleClass="tooltip" layout="block"> 
				<h:outputText value="#{messages.LABEL_OBS}" style="font-weight: bold;"/>  
				<h:outputText value=" #{_movimentacaoVO.movimentacao.observacoes}"/> 
			  </p:tooltip>  
			  <h:outputText value="#{_movimentacaoVO.movimentacao.paciente.nome}"/> 
			</p:outputPanel> 
		  </p:column>  
		  <p:column sortBy="#{_movimentacaoVO.movimentacao.dataMovimento}"> 
			<f:facet name="header"> 
			  <h:outputText value="#{messages.LABEL_DATA_MOVIMENTO}"/> 
			</f:facet>  
			<p:outputPanel layout="block"> 
			  <p:tooltip direction="top-right" styleClass="tooltip" layout="block"> 
				<h:outputText value="#{messages.LABEL_OBS}" style="font-weight: bold;"/>  
				<h:outputText value=" #{_movimentacaoVO.movimentacao.observacoes}"/> 
			  </p:tooltip>  
			  <h:outputText value="#{_movimentacaoVO.movimentacao.dataMovimento}"> 
				<f:convertDateTime pattern="dd/MM/yyyy HH:mm"/> 
			  </h:outputText> 
			</p:outputPanel> 
		  </p:column>  
		  <p:column sortBy="#{_movimentacaoVO.movimentacao.local}"> 
			<f:facet name="header"> 
			  <h:outputText value="#{messages.LABEL_LOCAL}"/> 
			</f:facet>  
			<p:outputPanel layout="block"> 
			  <p:tooltip direction="top-right" styleClass="tooltip" layout="block"> 
				<h:outputText value="#{messages.LABEL_OBS}" style="font-weight: bold;"/>  
				<h:outputText value=" #{_movimentacaoVO.movimentacao.observacoes}"/> 
			  </p:tooltip>  
			  <h:outputText value="#{_movimentacaoVO.movimentacao.local}"/> 
			</p:outputPanel> 
		  </p:column>  
		  <p:column sortBy="#{_movimentacaoVO.movimentacao.volumes}"> 
			<f:facet name="header"> 
			  <h:outputText value="#{messages.LABEL_VOLUME}"/> 
			</f:facet>  
			<p:outputPanel layout="block"> 
			  <p:tooltip direction="top-right" styleClass="tooltip" layout="block"> 
				<h:outputText value="#{messages.LABEL_OBS}" style="font-weight: bold;"/>  
				<h:outputText value=" #{_movimentacaoVO.movimentacao.observacoes}"/> 
			  </p:tooltip>  
			  <h:outputText value="#{_movimentacaoVO.movimentacao.volumes}"/> 
			</p:outputPanel> 
		  </p:column>  
		  <p:column sortBy="#{_movimentacaoVO.movimentacao.tipoEnvio}"> 
			<f:facet name="header"> 
			  <h:outputText value="#{messages.LABEL_TIPO_ENVIO}"/> 
			</f:facet>  
			<p:outputPanel layout="block"> 
			  <p:tooltip direction="top-right" styleClass="tooltip" layout="block"> 
				<h:outputText value="#{messages.LABEL_OBS}" style="font-weight: bold;"/>  
				<h:outputText value=" #{_movimentacaoVO.movimentacao.observacoes}"/> 
			  </p:tooltip>  
			  <h:outputText value="#{_movimentacaoVO.movimentacao.tipoEnvio.descricao}"/> 
			</p:outputPanel> 
		  </p:column>  
		  <p:column sortBy="#{_movimentacaoVO.movimentacao.situacao}"> 
			<f:facet name="header"> 
			  <h:outputText value="#{messages.LABEL_SITUACAO}"/> 
			</f:facet>  
			<p:outputPanel layout="block"> 
			  <p:tooltip direction="top-right" styleClass="tooltip" layout="block"> 
				<h:outputText value="#{messages.LABEL_OBS}" style="font-weight: bold;"/>  
				<h:outputText value=" #{_movimentacaoVO.movimentacao.observacoes}"/> 
			  </p:tooltip>  
			  <h:outputText value="#{_movimentacaoVO.movimentacao.situacao.descricao}"/> 
			</p:outputPanel> 
		  </p:column> 
		</mec:serverDataTable> 
		</aghu:table>
	  <aghu:acao> 
		<mec:commandButton value="#{messages.LABEL_REFRESH}" id="bt_refpaginator" 
			action="#{monitoramentoDesarquivamentoProntuarioController.reiniciar}" 
			icon="aghu-icons-16x16 aghu-icon-refresh" ajax="false"/>  
		<mec:commandButton value="#{messages.LABEL_MOVIMENTAR}" id="bt_buscarAmbulatorio"  
			action="#{monitoramentoDesarquivamentoProntuarioController.buscarProntuario}" 
			profile="search" ajax="false"/>  
		<mec:commandButton value="#{messages.LABEL_BUSCAR_E_IMPRIMIR}" id="bt_imprimir" 
			action="#{monitoramentoDesarquivamentoProntuarioController.buscarImprimirProntuario}" 
			render="tabelaMonitorDesarqProntuarios_Ambulatorio" profile="print"/> 
	  </aghu:acao> 

  </ui:composition> 
</html>
